[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Intro",
    "section": "",
    "text": "This repository contains examples for the cityseer package.",
    "crumbs": [
      "Intro"
    ]
  },
  {
    "objectID": "index.html#datasets",
    "href": "index.html#datasets",
    "title": "Intro",
    "section": "Datasets",
    "text": "Datasets\nThe datasets used from the recipes are available on the datasets page, where you can also find information on the sources.",
    "crumbs": [
      "Intro"
    ]
  },
  {
    "objectID": "index.html#python-101",
    "href": "index.html#python-101",
    "title": "Intro",
    "section": "Python 101",
    "text": "Python 101\nIf you are new to Python or computational notebooks, start with the Python 101 section.",
    "crumbs": [
      "Intro"
    ]
  },
  {
    "objectID": "index.html#recipes",
    "href": "index.html#recipes",
    "title": "Intro",
    "section": "Recipes",
    "text": "Recipes\nIf you already have some experience, you can dive straight into the recipes section, which contains practical examples and use-cases for cityseer.",
    "crumbs": [
      "Intro"
    ]
  },
  {
    "objectID": "index.html#installation",
    "href": "index.html#installation",
    "title": "Intro",
    "section": "Installation",
    "text": "Installation\nTo install cityseer, use pip:\npip install --upgrade cityseer\nOr, from a notebook:\n!pip install --upgrade cityseer\nThe examples in this cookbook also use packages such as geopandas, networkx, and matplotlib. You can install these using the same method.",
    "crumbs": [
      "Intro"
    ]
  },
  {
    "objectID": "class/2_basics.html",
    "href": "class/2_basics.html",
    "title": "Python 101",
    "section": "",
    "text": "Python is a versatile language, widely used for urban analysis and data science. This guide introduces its foundational concepts.\nThe best way to learn Python is by trying things out. Change the examples, break them, and see what happens. Progress comes fastest when you actively use the tools to solve problems and learn as you go.\nThis is a brief introduction to Python. To use it effectively day-to-day, you’ll need hands-on practice and to explore further resources, which are widely available online. It’s a great time to learn, as Large Language Models (LLMs) can help speed up the process and answer many of your questions. However, be mindful: use LLMs to amplify your understanding and guide your learning, not as a substitute for grasping the concepts yourself. Relying on them to do the work without understanding means you might not learn effectively and could miss out on using these tools to their full potential.",
    "crumbs": [
      "Python 101",
      "Python 101"
    ]
  },
  {
    "objectID": "class/2_basics.html#collections",
    "href": "class/2_basics.html#collections",
    "title": "Python 101",
    "section": "Collections",
    "text": "Collections\nOften, you need to work with multiple pieces of data at once. Python provides several ways to group data, each with its own characteristics.\n\n\n\n\n\n\n\n\n\n\n\nType\nOrdered\nUnique\nMutable\nExample Syntax\nExample Use Case\n\n\n\n\nList\nYes\nNo\nYes\n[1, 2, 3]\nShopping list, coordinates\n\n\nTuple\nYes\nNo\nNo\n(1, 2, 3)\nFixed coordinates, RGB colour\n\n\nSet\nNo\nYes (Values)\nYes\n{1, 2, 3}\nUnique tags, deduplication\n\n\nDictionary\nYes\nYes (Keys)\nYes\n{\"a\": 1, \"b\": 2}\nLookup tables, data records\n\n\n\n\nLists\nUse lists when the order of items is important and you might need to change them later. Lists are mutable (meaning they can be changed after creation). Think of them like a row of mailboxes: you can change what’s inside a mailbox. Access items using their index (position, starting from 0) in square brackets []. Negative indexing is also handy, where -1 refers to the last item, -2 to the second last, and so on.\nCreate a list using square brackets []:\n\nplanets = [\"Mercury\", \"Venus\", \"Earth\", \"Mars\"]\n\nplanets\n\n['Mercury', 'Venus', 'Earth', 'Mars']\n\n\nAccess items by index (position, starting from 0)\n\nprint(planets[0]) # Mercury\nprint(planets[2]) # Earth\n\nMercury\nEarth\n\n\nReverse index\n\nplanets[-1] # Mars\nplanets[-3] # Venus\n\n'Venus'\n\n\nAdd an item to the end\n\nplanets.append(\"Jupiter\")\n\nplanets\n\n['Mercury', 'Venus', 'Earth', 'Mars', 'Jupiter']\n\n\n\n\n\n\n\n\nNote\n\n\n\nPython has several useful built-in functions. One is len(), which we’ll use below. It returns the length (i.e., the number of items) of an object like a list or a string.\n\n\nGet the number of items\n\nlen(planets) # Output: 5\n\n5\n\n\nLists are mutable (can be changed after creation)\n\nplanets[0] = \"Fast Planet\" # Change the first item\nplanets[3] = \"Red Planet\" # Update Mars\n\nplanets\n\n['Fast Planet', 'Venus', 'Earth', 'Red Planet', 'Jupiter']\n\n\nCommon list operations\n\nplanets.insert(1, \"New Planet\") # Insert at a specific index\nprint(planets)\n\n['Fast Planet', 'New Planet', 'Venus', 'Earth', 'Red Planet', 'Jupiter']\n\n\nRemove item at index 2 and get its value\n\nremoved_planet = planets.pop(2)\nprint(f\"Removed: {removed_planet}\")\nprint(planets)\n\nRemoved: Venus\n['Fast Planet', 'New Planet', 'Earth', 'Red Planet', 'Jupiter']\n\n\n\n\nDictionaries\nUse dictionaries when you need to associate values with unique keys (like looking up a word in a dictionary to find its definition). They are very efficient for retrieving values when you know the key.\nOnce data is stored, you can easily retrieve or update a value using its key.\nDictionaries are defined using curly braces {}. Each item is a key-value pair, separated by a colon :. The key is on the left, and the value is on the right.\nSimilar to lists, dictionaries use square brackets [] to access values, but instead of a numerical index, you use the key.\n\n# Create a dictionary using curly braces {}\n# Format: {key1: value1, key2: value2}\nbuilding_info = {\n    \"type\": \"Residential\",\n    \"floors\": 5,\n    \"year_built\": 1998\n}\nbuilding_info\n\n{'type': 'Residential', 'floors': 5, 'year_built': 1998}\n\n\n\n# Access values using keys\nprint(building_info[\"type\"]) # Residential\nprint(building_info[\"floors\"]) # 5\n\nResidential\n5\n\n\n\n# Add a new key-value pair\nbuilding_info[\"has_elevator\"] = True\nprint(building_info)\n\n{'type': 'Residential', 'floors': 5, 'year_built': 1998, 'has_elevator': True}\n\n\n\n# Dictionaries are mutable\nbuilding_info[\"year_built\"] = 2000 # Update a value\nprint(building_info)\n\n{'type': 'Residential', 'floors': 5, 'year_built': 2000, 'has_elevator': True}\n\n\n\n# Common dictionary operations\nprint(building_info.keys())   # Get all keys\nprint(building_info.values()) # Get all values\nprint(building_info.get(\"address\", \"Not specified\")) # Get value, provide default if key not found\n\ndict_keys(['type', 'floors', 'year_built', 'has_elevator'])\ndict_values(['Residential', 5, 2000, True])\nNot specified\n\n\n\n\nTuples\nUse tuples for ordered collections of items that shouldn’t change after creation (e.g., coordinates). Tuples are immutable, meaning they cannot be altered once created.\n\n# A tuple of coordinates\npoint = (10.5, 25.3)\nprint(point)\nprint(point[0]) # Access items like lists\n\n(10.5, 25.3)\n10.5\n\n\n# point[0] = 11.0 # This would cause a TypeError! Tuples are immutable.\n\n# Tuples are often used to return multiple values from functions or for unpacking\ndef get_coordinates():\n    return (10.5, 25.3)\n\n\ncoords = get_coordinates()\nlat, lon = coords # Tuple unpacking\nprint(f\"Latitude: {lat}, Longitude: {lon}\")\n\nLatitude: 10.5, Longitude: 25.3\n\n\n\n\nSets\nUse sets when you need a collection of unique items, and the order of those items isn’t important.\n\n # Duplicate \"London\" is ignored\nunique_cities = {\"London\", \"Paris\", \"Berlin\", \"London\"}\n# Output might be in any order, e.g., {'Berlin', 'London', 'Paris'}\nprint(unique_cities)\n\n{'London', 'Berlin', 'Paris'}\n\n\n\n# Check for membership\nprint(\"Paris\" in unique_cities) # True\n\nTrue\n\n\n\n# Add an item\nunique_cities.add(\"Rome\")\nprint(unique_cities)\n\n{'London', 'Rome', 'Berlin', 'Paris'}\n\n\n\n# Set operations\nset1 = {1, 2, 3}\nset2 = {3, 4, 5}\nprint(set1.union(set2))        # All items from both: {1, 2, 3, 4, 5}\nprint(set1.intersection(set2)) # Items in both: {3}\nprint(set1.difference(set2))   # Items in set1 but not set2: {1, 2}\n\n{1, 2, 3, 4, 5}\n{3}\n{1, 2}",
    "crumbs": [
      "Python 101",
      "Python 101"
    ]
  },
  {
    "objectID": "class/2_basics.html#control-flow",
    "href": "class/2_basics.html#control-flow",
    "title": "Python 101",
    "section": "Control Flow",
    "text": "Control Flow\nControl flow structures are fundamental to programming. They allow your code to make decisions (using if/elif/else) and repeat actions (using for/while loops).\n\nConditionals\nConditionals allow your program to execute different blocks of code based on whether certain conditions are True or False. They use comparison operators to evaluate conditions.\n\n# Comparison operators return boolean values\nprint(5 == 5) # Equal to: True\nprint(5 != 3) # Not equal to: True\nprint(5 &gt; 3)  # Greater than: True\nprint(5 &lt; 3)  # Less than: False\nprint(5 &gt;= 5) # Greater than or equal to: True\nprint(5 &lt;= 3) # Less than or equal to: False\n\nTrue\nTrue\nTrue\nFalse\nTrue\nFalse\n\n\n\n\n\n\n\n\nIndentation\n\n\n\nIndentation is non-negotiable in Python: it defines code blocks. Always use consistent spacing (the common convention is 4 spaces per indentation level) and avoid mixing spaces with tabs. Code blocks are introduced by a colon (:) and can be nested.\n\n# Example of indentation\nfor i in range(3):\n    if i == 2:\n        print(f\"{i} is two\")\n    else:\n        print(f\"{i} is not two\")\n\n0 is not two\n1 is not two\n2 is two\n\n\n\n\nUse if, elif (short for ‘else if’), and else to direct the flow of execution. Conditions can be combined using and and or. For identity checks (e.g., if a value is None), use is and is not.\n\npopulation_density = 5000 # people per sq km\n\nif population_density &gt; 10000:\n    print(\"Very high density\")\nelif population_density &gt; 3000:\n    print(\"High density\")\nelif population_density &gt; 1000:\n    print(\"Medium density\")\nelse:\n    print(\"Low density\")\n\nHigh density\n\n\n\n# Combining conditions with 'and', 'or'\nfloors = 12\n\nif population_density &gt; 3000 and floors &gt; 10:\n    print(\"High density and tall buildings\")\n\nHigh density and tall buildings\n\n\n\n# Checking for None (often used for missing data)\nmaybe_data = None # Represents absence of a value\n\nif maybe_data is None:\n    print(\"Data is missing.\")\nelse:\n    print(f\"Data found: {maybe_data}\")\n\nData is missing.\n\n\nThis conditional logic enables your program to adapt its behaviour to various situations.\n\n\nLoops\nLoops are fantastic for avoiding repetitive code. They are essential for processing items in collections and can be combined with conditionals to apply logic selectively to each item.\n\nfor Loops\nUse for loops to iterate over each item in a sequence (such as a list, tuple, or string). In each pass (iteration), the loop variable (e.g., planet in the example below) takes the value of the current item from the sequence.\n\n# Loop through a list\nfor planet in planets:\n    print(f\"Checking planet: {planet}\")\n\nChecking planet: Fast Planet\nChecking planet: New Planet\nChecking planet: Earth\nChecking planet: Red Planet\nChecking planet: Jupiter\n\n\n\n\nwhile Loops\nUse while loops when you don’t know exactly how many times to loop in advance, but you know the condition under which the loop should continue running.\n\n# Countdown\ncountdown = 3\nwhile countdown &gt; 0:\n    print(countdown)\n    # Decrease countdown (essential to avoid infinite loop!!!)\n    countdown = countdown - 1\nprint(\"Blast off!\")\n\n3\n2\n1\nBlast off!\n\n\nCaution: Ensure the while loop’s condition eventually becomes False, otherwise it will run forever (an infinite loop)!\n\n\n\nExercise\nCreate a list named numbers containing the integers from 1 to 10. Then, write a loop that iterates through this list. For each number, if it is even, print the number.\nHint: The modulo operator (%) gives the remainder of a division. A number is even if number % 2 == 0.",
    "crumbs": [
      "Python 101",
      "Python 101"
    ]
  },
  {
    "objectID": "class/2_basics.html#functions",
    "href": "class/2_basics.html#functions",
    "title": "Python 101",
    "section": "Functions",
    "text": "Functions\nFunctions help you organise your code into logical, reusable blocks. This improves readability, makes debugging easier, and simplifies maintenance. If you find yourself copying and pasting code, that’s often a good sign you could write a function instead.\n\n# Define a function with parameters (inputs)\ndef calculate_density(population, area, unit=\"sq km\"):\n    \"\"\"Calculates population density.\n\n    It's good practice to include a *docstring* (documentation string) right after\n    the def line to explain what the function does, its parameters, and what it returns.\n\n    Args:\n        population (int): The total population.\n        area (float): The total area.\n        unit (str, optional): The unit for the area. Defaults to \"sq km\".\n\n    Returns:\n        float: The calculated density, or 0 if area is non-positive.\n    \"\"\"\n    if area &lt;= 0:\n        print(\"Area must be positive to calculate density.\")\n        return 0 # Return 0 or raise an error for invalid input\n    density = population / area\n    return density\n\n# Call the function with arguments (values for the parameters)\ndensity1 = calculate_density(1000000, 50)\nprint(f\"Density 1: {density1:.2f} people per sq km\")\n\ndensity2 = calculate_density(population=500000, area=100, unit=\"square kilometres\") # Can name arguments\nprint(f\"Density 2: {density2:.2f} people per square kilometres\")\n\n# Example of invalid input\ndensity_invalid = calculate_density(1000, 0)\nprint(f\"Density invalid: {density_invalid}\")\n\nDensity 1: 20000.00 people per sq km\nDensity 2: 5000.00 people per square kilometres\nArea must be positive to calculate density.\nDensity invalid: 0\n\n\n\n# Call the function with arguments (values for the parameters)\ndensity1 = calculate_density(1000000, 50)\nprint(f\"Density 1: {density1:.2f} people per sq km\")\n\nDensity 1: 20000.00 people per sq km\n\n\n\n# Can name arguments\ndensity2 = calculate_density(\n    population=500000, area=100, unit=\"square kilometres\"\n)\nprint(f\"Density 2: {density2:.2f} people per square kilometres\")\n\nDensity 2: 5000.00 people per square kilometres\n\n\n\n# Example of invalid input\ndensity_invalid = calculate_density(1000, 0)\nprint(f\"Density invalid: {density_invalid}\")\n\nArea must be positive to calculate density.\nDensity invalid: 0\n\n\nKey Ideas:\n\nParameters: These are the names listed in the function definition’s parentheses (e.g., population, area).\nArguments: These are the actual values you pass to the function when you call it.\nDefault Arguments: You can give parameters default values (e.g., unit=\"sq km\"). If you don’t provide an argument for that parameter when calling the function, the default value is used.\nScope: Variables defined inside a function are typically local to that function, meaning they only exist and can be accessed within that function.\nDocstrings: As mentioned, the triple-quoted string \"\"\"...\"\"\" right after the def line. They are used to document what the function does, its arguments (often listed under an Args: section), and what it returns (under a Returns: section). Good docstrings are vital for writing understandable and maintainable code.\nReturn Statement: The return statement is used to send a value back from the function to the place where it was called. If a function doesn’t have a return statement, or if the return statement is used without a value, it implicitly returns None.\n\nFunctions make your code modular, which means it’s broken down into smaller, manageable pieces. This makes it easier to test and understand. While functions don’t always have to return a value (e.g., a function that just prints something), they often do.",
    "crumbs": [
      "Python 101",
      "Python 101"
    ]
  },
  {
    "objectID": "class/2_basics.html#importing-modules",
    "href": "class/2_basics.html#importing-modules",
    "title": "Python 101",
    "section": "Importing Modules",
    "text": "Importing Modules\nPython has a vast collection of modules that provide ready-to-use tools – so you often don’t need to reinvent the wheel! If you encounter an unfamiliar function, it’s a good idea to check the import statements, usually found at the top of the file, as the function might come from an imported module.\n\nimport math # Import the built-in math module\n\nradius = 5\narea = math.pi * (radius ** 2) # Use math.pi\nprint(f\"Circle Area: {area:.2f}\")\n\nCircle Area: 78.54\n\n\n\ncircumference = 2 * math.pi * radius\nprint(f\"Circle Circumference: {circumference:.2f}\")\n\nCircle Circumference: 31.42\n\n\n\n# You can also import specific methods from a module\nfrom math import sqrt # Import only the square root function\nprint(f\"Square root of 16 is {sqrt(16)}\")\n\nSquare root of 16 is 4.0\n\n\nKey Idea: import module_name makes the functions and variables within that module available, accessed via module_name.function_name.\nIn later sections, we’ll be making extensive use of powerful libraries such as pandas, geopandas, and cityseer, which are all imported as modules.",
    "crumbs": [
      "Python 101",
      "Python 101"
    ]
  },
  {
    "objectID": "class/2_basics.html#common-errors",
    "href": "class/2_basics.html#common-errors",
    "title": "Python 101",
    "section": "Common Errors",
    "text": "Common Errors\nDon’t worry, errors are a normal part of programming! Learning to read and understand error messages is a key skill for fixing them. If you get stuck, searching for the error message online is often helpful – chances are, someone else has encountered the same problem. You can also ask an LLM to help explain what an error message means.\n\nNameError: name '...' is not defined: You tried to use a variable before assigning a value to it, or you misspelled the variable name.\nTypeError: unsupported operand type(s) for ...: You tried to perform an operation on incompatible data types (e.g., adding a string to an integer: \"Hello\" + 5).\nSyntaxError: invalid syntax: You made a mistake in the Python grammar (e.g., missing colon :, mismatched parentheses ()).\nIndexError: list index out of range: You tried to access an item in a list using an index that doesn’t exist (e.g., accessing my_list[5] when the list only has 3 items).\nImportError: No module named '...' or ModuleNotFoundError: No module named '...': You tried to import a module that Python can’t find. It might be misspelled or not installed.\n\nDebugging Tip: When you encounter an error, the last line of the message usually tells you the specific type of error. The lines mentioned in the traceback help you find where the problem occurred in your code. Sprinkling print() statements in your code to check the values of variables at different stages can also be a very effective way to debug. And remember, it’s common to fix one error only to find another – just tackle them one by one.",
    "crumbs": [
      "Python 101",
      "Python 101"
    ]
  },
  {
    "objectID": "class/5_ecosystem.html",
    "href": "class/5_ecosystem.html",
    "title": "Geospatial Ecosystem",
    "section": "",
    "text": "Building upon our previous explorations of Python, Shapely, and GeoPandas, this lesson introduces the broader Python geospatial ecosystem. We will focus on two particularly useful libraries: osmnx for acquiring urban data from OpenStreetMap, and momepy for conducting urban morphology analysis.",
    "crumbs": [
      "Python 101",
      "Geospatial Ecosystem"
    ]
  },
  {
    "objectID": "class/5_ecosystem.html#osmnx",
    "href": "class/5_ecosystem.html#osmnx",
    "title": "Geospatial Ecosystem",
    "section": "osmnx",
    "text": "osmnx\nosmnx is a Python package that simplifies downloading and working with geospatial data from OpenStreetMap (OSM), such as building footprints or points of interest.\nThis example demonstrates how to download building footprints within a 1km radius of a specified location in Nicosia, Cyprus, defined by its coordinates. osmnx provides several methods for downloading data; here, we will use features_from_point.\n\n# Define the point of interest (latitude, longitude) and distance\ncenter_point = (35.17526, 33.36402)\ndistance_m = 1000\n\n# Download building footprints\ngdf_buildings = ox.features_from_point(\n    center_point, tags={\"building\": True}, dist=distance_m\n)\n\nosmnx returns GeoDataFrames which, as shown in the previous lesson, are ideal for spatial analysis in Python. Note the tags={\"building\": True} argument, which instructs osmnx to fetch all features tagged as buildings in OSM. By changing these tags, you can also download other types of features, such as roads or parks.\nIt is good practice to inspect the data you have downloaded. The head() function displays the first few rows of the GeoDataFrame, allowing you to quickly check the data structure and attributes.\n\n# Display the first few rows of the buildings GeoDataFrame\ngdf_buildings.head()\n\n\n\n\n\n\n\n\n\ngeometry\namenity\nbuilding\nbus\nname\npublic_transport\naddr:city\naddr:housenumber\naddr:postcode\naddr:street\n...\nindoor_seating\ntomb\nname:hy\nwikipedia:hy\nconstruction\ntheatre:type\nassociation\nhouse\ntype\ninscription\n\n\nelement\nid\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nnode\n4338033483\nPOINT (33.36625 35.18368)\nbus_station\nyes\nyes\nİtimat (Lefkoşa Mağusa Servis)\nstation\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n5206675859\nPOINT (33.35992 35.17344)\nNaN\nyes\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n12027040593\nPOINT (33.35773 35.17435)\nNaN\nyes\nNaN\nApostolic Nunciature to Cyprus\nNaN\nNicosia\n1\n1010\nPafou\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\nrelation\n2580980\nPOLYGON ((33.36224 35.17641, 33.3628 35.17652,...\nNaN\nyes\nNaN\nBüyük Han\nNaN\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nmultipolygon\nOTTOMAN\n\n\n2785751\nPOLYGON ((33.36028 35.17739, 33.36019 35.17701...\nNaN\nyes\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nMüftü Raci Sokak\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nmultipolygon\nNaN\n\n\n\n\n5 rows × 170 columns\n\n\n\nYou can also plot the downloaded data:\n\n# Set up a plot\nfig, ax = plt.subplots(figsize=(10, 10))\n\n# Plot the buildings\ngdf_buildings.plot(ax=ax)\n\n# Set the title and remove the axis for a cleaner look\nax.set_title(f\"Buildings around {center_point} ({distance_m}m radius)\")\nax.axis(\"off\")\n\n(np.float64(33.351370125),\n np.float64(33.376489175),\n np.float64(35.164918945000004),\n np.float64(35.185606754999995))\n\n\n\n\n\n\n\n\n\nFor more detailed information on different ways to query OSM features data, refer to the osmnx features documentation.",
    "crumbs": [
      "Python 101",
      "Geospatial Ecosystem"
    ]
  },
  {
    "objectID": "class/5_ecosystem.html#data-preparation",
    "href": "class/5_ecosystem.html#data-preparation",
    "title": "Geospatial Ecosystem",
    "section": "Data Preparation",
    "text": "Data Preparation\nTo streamline the subsequent analysis, it is advisable to first filter for the types of geometry you intend to work with. In this instance, we are interested in polygon or multi-polygon geometries and will discard other types, such as points or linestrings.\n\n# Filter out non-polygon geometries\ngdf_buildings = gdf_buildings[\n    gdf_buildings.geometry.type.isin(['Polygon', 'MultiPolygon'])\n]\n\ngdf_buildings.head()\n\n\n\n\n\n\n\n\n\ngeometry\namenity\nbuilding\nbus\nname\npublic_transport\naddr:city\naddr:housenumber\naddr:postcode\naddr:street\n...\nindoor_seating\ntomb\nname:hy\nwikipedia:hy\nconstruction\ntheatre:type\nassociation\nhouse\ntype\ninscription\n\n\nelement\nid\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nrelation\n2580980\nPOLYGON ((33.36224 35.17641, 33.3628 35.17652,...\nNaN\nyes\nNaN\nBüyük Han\nNaN\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nmultipolygon\nOTTOMAN\n\n\n2785751\nPOLYGON ((33.36028 35.17739, 33.36019 35.17701...\nNaN\nyes\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nMüftü Raci Sokak\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nmultipolygon\nNaN\n\n\n3403727\nPOLYGON ((33.36277 35.17718, 33.36274 35.17688...\nNaN\nyes\nNaN\nKumarcılar Hanı\nNaN\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nmultipolygon\nNaN\n\n\n8756098\nPOLYGON ((33.36483 35.17161, 33.36483 35.17161...\nNaN\nyes\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nmultipolygon\nNaN\n\n\n8762332\nPOLYGON ((33.36003 35.17852, 33.36002 35.17849...\nNaN\nhouse\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nmultipolygon\nNaN\n\n\n\n\n5 rows × 170 columns\n\n\n\nSecondly, we will reset the index so that all features are neatly indexed from zero upwards, without duplicates.\n\n# Reset the index\ngdf_buildings = gdf_buildings.reset_index(drop=True)\n\ngdf_buildings.head()\n\n\n\n\n\n\n\n\ngeometry\namenity\nbuilding\nbus\nname\npublic_transport\naddr:city\naddr:housenumber\naddr:postcode\naddr:street\n...\nindoor_seating\ntomb\nname:hy\nwikipedia:hy\nconstruction\ntheatre:type\nassociation\nhouse\ntype\ninscription\n\n\n\n\n0\nPOLYGON ((33.36224 35.17641, 33.3628 35.17652,...\nNaN\nyes\nNaN\nBüyük Han\nNaN\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nmultipolygon\nOTTOMAN\n\n\n1\nPOLYGON ((33.36028 35.17739, 33.36019 35.17701...\nNaN\nyes\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nMüftü Raci Sokak\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nmultipolygon\nNaN\n\n\n2\nPOLYGON ((33.36277 35.17718, 33.36274 35.17688...\nNaN\nyes\nNaN\nKumarcılar Hanı\nNaN\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nmultipolygon\nNaN\n\n\n3\nPOLYGON ((33.36483 35.17161, 33.36483 35.17161...\nNaN\nyes\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nmultipolygon\nNaN\n\n\n4\nPOLYGON ((33.36003 35.17852, 33.36002 35.17849...\nNaN\nhouse\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nmultipolygon\nNaN\n\n\n\n\n5 rows × 170 columns\n\n\n\nThirdly, we will drop any columns not relevant to our analysis. In this case, we will retain the geometry column and the building column.\n\ngdf_buildings = gdf_buildings[['geometry', 'building']]\n\ngdf_buildings.head()\n\n\n\n\n\n\n\n\ngeometry\nbuilding\n\n\n\n\n0\nPOLYGON ((33.36224 35.17641, 33.3628 35.17652,...\nyes\n\n\n1\nPOLYGON ((33.36028 35.17739, 33.36019 35.17701...\nyes\n\n\n2\nPOLYGON ((33.36277 35.17718, 33.36274 35.17688...\nyes\n\n\n3\nPOLYGON ((33.36483 35.17161, 33.36483 35.17161...\nyes\n\n\n4\nPOLYGON ((33.36003 35.17852, 33.36002 35.17849...\nhouse\n\n\n\n\n\n\n\nBefore performing morphological analysis, it is necessary to ensure your data is in a projected Coordinate Reference System (CRS). Morphological metrics often involve measurements of distance and area, which are only accurate in a projected CRS. For Nicosia, we will use EPSG:3035 (ETRS89 / LAEA Europe), a European projection.\n\n# Set the target CRS\ngdf_buildings_proj = gdf_buildings.to_crs(3035)\n\nLet’s replot the building data to ensure everything is in order.\n\n# Set up a plot\nfig, ax = plt.subplots(figsize=(10, 10))\n\n# Plot the buildings\ngdf_buildings_proj.plot(ax=ax)\n\n# Set the title and remove axis\nax.set_title(f\"Buildings around {center_point} ({distance_m}m radius)\")\nax.axis(\"off\")\n\n(np.float64(6433775.66431334),\n np.float64(6436461.588935598),\n np.float64(1669215.3095963916),\n np.float64(1672018.7854921184))",
    "crumbs": [
      "Python 101",
      "Geospatial Ecosystem"
    ]
  },
  {
    "objectID": "class/5_ecosystem.html#momepy",
    "href": "class/5_ecosystem.html#momepy",
    "title": "Geospatial Ecosystem",
    "section": "momepy",
    "text": "momepy\nmomepy is a library for the quantitative analysis of urban form – also known as urban morphology. It operates primarily on GeoDataFrames and provides a range of functions for calculating various morphological metrics.\nBy way of example, we will explore two of these functions.\n\nBuilding Orientations\nmomepy can calculate the orientation of building footprints using the orientation function.\n\n# Calculate building orientation\ngdf_buildings_proj['orientation'] = momepy.orientation(gdf_buildings_proj)\n\nfig, ax = plt.subplots(figsize=(10, 10))\ngdf_buildings_proj.plot(ax=ax, column='orientation', cmap='Spectral')\nax.set_title(f\"Building orientations\")\nax.axis(\"off\")\n\n(np.float64(6433775.66431334),\n np.float64(6436461.588935598),\n np.float64(1669215.3095963916),\n np.float64(1672018.7854921184))\n\n\n\n\n\n\n\n\n\n\n\nShared Walls\nmomepy can calculate shared wall lengths between buildings using the shared_walls function.\n\n# Calculate shared wall lengths\ngdf_buildings_proj['shared_wall_length'] = momepy.shared_walls(gdf_buildings_proj)\n\nfig, ax = plt.subplots(figsize=(10, 10))\ngdf_buildings_proj.plot(ax=ax, column='shared_wall_length', cmap='hot')\nax.set_title(f\"Building shared wall lengths\")\nax.axis(\"off\")\n\n(np.float64(6433775.66431334),\n np.float64(6436461.588935598),\n np.float64(1669215.3095963916),\n np.float64(1672018.7854921184))\n\n\n\n\n\n\n\n\n\nMany other functions are available in momepy for calculating various morphological metrics. For a comprehensive list, please refer to the momepy documentation.",
    "crumbs": [
      "Python 101",
      "Geospatial Ecosystem"
    ]
  },
  {
    "objectID": "class/5_ecosystem.html#summary",
    "href": "class/5_ecosystem.html#summary",
    "title": "Geospatial Ecosystem",
    "section": "Summary",
    "text": "Summary\nThis has been a brief exploration of the broader Python geospatial ecosystem, focusing on osmnx for downloading urban data from OpenStreetMap and momepy for conducting urban morphology analysis. This is just a small sample of what these and other tools can achieve.\nRemember that with GeoPandas, you can export your data. So, after downloading data and running any variety of metrics using available Python packages, you can then export the file, which can be further visualised or manipulated with packages such as QGIS. For example, you can export your data to a GeoPackage file using the to_file method:\ngdf_buildings_proj.to_file(\"nicosia_buildings_metrics.gpkg\", driver=\"GPKG\")",
    "crumbs": [
      "Python 101",
      "Geospatial Ecosystem"
    ]
  },
  {
    "objectID": "class/4_geopandas.html",
    "href": "class/4_geopandas.html",
    "title": "GeoPandas",
    "section": "",
    "text": "In urban analysis, working with spatial data often means handling numerous geographic features simultaneously, such as buildings, streets, or administrative boundaries. While processing each feature individually is possible, it’s considerably more efficient to manage and analyse them collectively within a structured format.\nFor general data analysis in Python, the pandas library is the standard tool. Pandas provides the DataFrame, a powerful table-like structure where rows represent observations (e.g., individual buildings) and columns store their attributes (e.g., height, area, land use). This structure is conceptually similar to attribute tables found in GIS software such as QGIS or ArcGIS.\nGeoPandas extends pandas by incorporating first-class support for geographic data. It introduces the GeoDataFrame, which is effectively a pandas DataFrame enhanced with a dedicated column for storing geometry objects (such as points, lines, or polygons). This integration allows you to seamlessly combine tabular data analysis with spatial operations.\nKey features of GeoPandas include:",
    "crumbs": [
      "Python 101",
      "GeoPandas"
    ]
  },
  {
    "objectID": "class/4_geopandas.html#from-scratch",
    "href": "class/4_geopandas.html#from-scratch",
    "title": "GeoPandas",
    "section": "From Scratch",
    "text": "From Scratch\nAlthough you’ll frequently load spatial data directly from files, knowing how to create a GeoDataFrame manually is beneficial. To do this, you typically need:\n\nTabular data (like a list of dictionaries or a pandas DataFrame).\nCorresponding geometry objects.\nA Coordinate Reference System (CRS) identifier.\n\nLet’s begin with a simple example.\n\nimport geopandas as gpd\nfrom shapely.geometry import Point\n\nFirst, we’ll define some tabular data as a list of dictionaries. Each dictionary will represent a city, storing its name and approximate coordinates (longitude, latitude).\n\ndata = [\n    {\"city\": \"Madrid\", \"x\": -3.7038, \"y\": 40.4168},\n    {\"city\": \"Barcelona\", \"x\": 2.1734, \"y\": 41.3851},\n    {\"city\": \"Valencia\", \"x\": -0.3774, \"y\": 39.4699}\n]\n\ndata\n\n[{'city': 'Madrid', 'x': -3.7038, 'y': 40.4168},\n {'city': 'Barcelona', 'x': 2.1734, 'y': 41.3851},\n {'city': 'Valencia', 'x': -0.3774, 'y': 39.4699}]\n\n\nNext, we need to create the corresponding geometry objects. As these are coordinates, Point objects are suitable. We can generate a list of Point objects directly from our data.\n\n# Create Point geometries from the x and y columns\nlocations = []\n\nfor city in data:\n    locations.append(Point(city[\"x\"], city[\"y\"]))\n\nlocations\n\n[&lt;POINT (-3.704 40.417)&gt;, &lt;POINT (2.173 41.385)&gt;, &lt;POINT (-0.377 39.47)&gt;]\n\n\nWith the tabular data and geometry prepared, the final component is the CRS. Given that the coordinates are longitude and latitude, the appropriate CRS is WGS 84, identified by the EPSG code 4326.\nWe can now construct the GeoDataFrame:\n\ngdf_cities = gpd.GeoDataFrame(\n    data,  # The tabular data\n    geometry=locations,  # The Shapely geometry objects\n    crs=\"EPSG:4326\"  # Coordinate Reference System (WGS 84)\n)\n\ngdf_cities\n\n\n\n\n\n\n\n\ncity\nx\ny\ngeometry\n\n\n\n\n0\nMadrid\n-3.7038\n40.4168\nPOINT (-3.7038 40.4168)\n\n\n1\nBarcelona\n2.1734\n41.3851\nPOINT (2.1734 41.3851)\n\n\n2\nValencia\n-0.3774\n39.4699\nPOINT (-0.3774 39.4699)\n\n\n\n\n\n\n\nNotice that GeoPandas automatically recognised the geometry list as the active geometry column. (You can also specify a different column name if needed.)",
    "crumbs": [
      "Python 101",
      "GeoPandas"
    ]
  },
  {
    "objectID": "class/4_geopandas.html#indexing",
    "href": "class/4_geopandas.html#indexing",
    "title": "GeoPandas",
    "section": "Indexing",
    "text": "Indexing\nSimilar to pandas DataFrames, GeoDataFrames possess an index. By default, this is a range of integers. You can assign a more meaningful index using one of the columns (e.g., the city name) with the set_index() method. This often simplifies data selection.\n\ngdf_cities = gdf_cities.set_index(\"city\")\n\ngdf_cities\n\n\n\n\n\n\n\n\nx\ny\ngeometry\n\n\ncity\n\n\n\n\n\n\n\nMadrid\n-3.7038\n40.4168\nPOINT (-3.7038 40.4168)\n\n\nBarcelona\n2.1734\n41.3851\nPOINT (2.1734 41.3851)\n\n\nValencia\n-0.3774\n39.4699\nPOINT (-0.3774 39.4699)\n\n\n\n\n\n\n\nYou can access a row using its index. Pandas provides a special indexing method, loc[], which allows you to access rows by their index label. This is especially useful when you’ve set a meaningful index, such as city names.\n\ngdf_cities.loc[\"Madrid\"]\n\nx                           -3.7038\ny                           40.4168\ngeometry    POINT (-3.7038 40.4168)\nName: Madrid, dtype: object\n\n\nYou can also specify a column name. For instance, to retrieve the latitude of Barcelona:\n\ngdf_cities.loc['Barcelona', \"y\"]\n\nnp.float64(41.3851)\n\n\nTo retrieve all rows for a specific column, use the : operator. For example, to get all rows for the y column:\n\ngdf_cities.loc[:, \"y\"]\n\ncity\nMadrid       40.4168\nBarcelona    41.3851\nValencia     39.4699\nName: y, dtype: float64\n\n\nA particularly powerful feature of GeoDataFrames is the ability to filter rows based on their properties. To do this, you create a boolean mask, which can then be used to exclude rows you are not interested in. For instance, if you want to filter the cities to include only those with a latitude greater than 40, you can proceed as follows:\n\n# Create a boolean mask\nmask = gdf_cities[\"y\"] &gt; 40\n\nmask\n\ncity\nMadrid        True\nBarcelona     True\nValencia     False\nName: y, dtype: bool\n\n\nThis mask is a pandas Series of boolean values, where True indicates that the condition (y &gt; 40) is met, and False indicates it is not. You can now apply this mask to filter the rows in the original GeoDataFrame.\n\n# Use the mask to filter the rows\ngdf_cities.loc[mask]\n\n\n\n\n\n\n\n\nx\ny\ngeometry\n\n\ncity\n\n\n\n\n\n\n\nMadrid\n-3.7038\n40.4168\nPOINT (-3.7038 40.4168)\n\n\nBarcelona\n2.1734\n41.3851\nPOINT (2.1734 41.3851)\n\n\n\n\n\n\n\nAs shown, only two rows are returned because Valencia, the third city, has a latitude below 40.",
    "crumbs": [
      "Python 101",
      "GeoPandas"
    ]
  },
  {
    "objectID": "class/4_geopandas.html#geospatial",
    "href": "class/4_geopandas.html#geospatial",
    "title": "GeoPandas",
    "section": "Geospatial",
    "text": "Geospatial\nGeoDataFrames possess special properties stemming from their spatial nature.\nFor instance, GeoPandas is aware of which column contains the spatial data. You can access this column directly using the .geometry attribute, which returns a GeoSeries.\n\ngdf_cities.geometry\n\ncity\nMadrid       POINT (-3.7038 40.4168)\nBarcelona     POINT (2.1734 41.3851)\nValencia     POINT (-0.3774 39.4699)\nName: geometry, dtype: geometry\n\n\nSimilarly, it knows the CRS, accessible via the .crs attribute.\n\ngdf_cities.crs\n\n&lt;Geographic 2D CRS: EPSG:4326&gt;\nName: WGS 84\nAxis Info [ellipsoidal]:\n- Lat[north]: Geodetic latitude (degree)\n- Lon[east]: Geodetic longitude (degree)\nArea of Use:\n- name: World.\n- bounds: (-180.0, -90.0, 180.0, 90.0)\nDatum: World Geodetic System 1984 ensemble\n- Ellipsoid: WGS 84\n- Prime Meridian: Greenwich\n\n\nGeoPandas conveniently integrates with matplotlib for straightforward plotting. Calling .plot() on a GeoDataFrame will render its geometries.\n\ngdf_cities.plot()\n\n\n\n\n\n\n\n\n\nCoordinate Transformations\nGeoPandas makes CRS transformation straightforward with the to_crs() method. Ensure you use a projected coordinate reference system when performing detailed spatial analysis. Let’s convert our cities GeoDataFrame to EPSG:3035, a projected equal-area CRS suitable for Europe (ETRS89-LAEA).\n\ngdf_cities_proj = gdf_cities.to_crs(3035)\n\ngdf_cities_proj\n\n\n\n\n\n\n\n\nx\ny\ngeometry\n\n\ncity\n\n\n\n\n\n\n\nMadrid\n-3.7038\n40.4168\nPOINT (3159390.356 2029850.92)\n\n\nBarcelona\n2.1734\n41.3851\nPOINT (3664996.992 2065549.826)\n\n\nValencia\n-0.3774\n39.4699\nPOINT (3426003.188 1881060.49)\n\n\n\n\n\n\n\nNotice how the x and y columns no longer match the geometry, as the geometry is now in metres according to EPSG:3035. The .crs attribute reflects this change:\n\ngdf_cities_proj.crs\n\n&lt;Projected CRS: EPSG:3035&gt;\nName: ETRS89-extended / LAEA Europe\nAxis Info [cartesian]:\n- Y[north]: Northing (metre)\n- X[east]: Easting (metre)\nArea of Use:\n- name: Europe - European Union (EU) countries and candidates. Europe - onshore and offshore: Albania; Andorra; Austria; Belgium; Bosnia and Herzegovina; Bulgaria; Croatia; Cyprus; Czechia; Denmark; Estonia; Faroe Islands; Finland; France; Germany; Gibraltar; Greece; Hungary; Iceland; Ireland; Italy; Kosovo; Latvia; Liechtenstein; Lithuania; Luxembourg; Malta; Monaco; Montenegro; Netherlands; North Macedonia; Norway including Svalbard and Jan Mayen; Poland; Portugal including Madeira and Azores; Romania; San Marino; Serbia; Slovakia; Slovenia; Spain including Canary Islands; Sweden; Switzerland; Türkiye (Turkey); United Kingdom (UK) including Channel Islands and Isle of Man; Vatican City State.\n- bounds: (-35.58, 24.6, 44.83, 84.73)\nCoordinate Operation:\n- name: Europe Equal Area 2001\n- method: Lambert Azimuthal Equal Area\nDatum: European Terrestrial Reference System 1989 ensemble\n- Ellipsoid: GRS 1980\n- Prime Meridian: Greenwich\n\n\nPlotting the transformed data shows the locations relative to the new projected coordinate system.\n\ngdf_cities_proj.plot()\n\n\n\n\n\n\n\n\n\n\nSpatial Operations\nGeoPandas enables you to apply spatial operations directly to GeoDataFrames or GeoSeries. These operations are applied element-wise.\nFor instance, to create a 100km buffer around each city:\n\n# The buffer distance is in the units of the CRS (metres for EPSG:3035)\ngdf_cities_proj[\"geometry\"] = gdf_cities_proj.geometry.buffer(100000)  # 100km buffer\n\ngdf_cities_proj.plot()\n\n\n\n\n\n\n\n\nAlternatively, you can calculate the distance from each feature in a GeoDataFrame to a single Shapely geometry object. Let’s determine the distance from each city buffer to a specific point (also defined in EPSG:3035 coordinates):\n\n# Define a point in the same CRS (EPSG:3035)\npt = Point(3300000, 2000000)\n\n# Calculate distance from each geometry in the GeoSeries to the point\ngdf_cities_proj.geometry.distance(pt)\n\ncity\nMadrid        43770.428827\nBarcelona    270860.150569\nValencia      73357.551677\ndtype: float64\n\n\n\n\nCreating and Updating Columns\nCreating or updating column values in a DataFrame is straightforward.\nFor example, if we wished to create a new column named ‘easting’ and assign it the x-coordinate of the geometry, we could proceed as follows:\n\ngdf_cities_proj['easting'] = gdf_cities_proj.geometry.centroid.x\n\ngdf_cities_proj\n\n\n\n\n\n\n\n\nx\ny\ngeometry\neasting\n\n\ncity\n\n\n\n\n\n\n\n\nMadrid\n-3.7038\n40.4168\nPOLYGON ((3259390.356 2029850.92, 3258908.829 ...\n3.159390e+06\n\n\nBarcelona\n2.1734\n41.3851\nPOLYGON ((3764996.992 2065549.826, 3764515.465...\n3.664997e+06\n\n\nValencia\n-0.3774\n39.4699\nPOLYGON ((3526003.188 1881060.49, 3525521.661 ...\n3.426003e+06\n\n\n\n\n\n\n\nEach geometry row in the DataFrame is a Shapely geometry, so you can use standard Shapely syntax to access properties such as the centroid or its x-coordinate.\nIf you decide instead to update the existing x and y columns, you can reference them directly:\n\ngdf_cities_proj['x'] = gdf_cities_proj.geometry.centroid.x\ngdf_cities_proj['y'] = gdf_cities_proj.geometry.centroid.y\n\ngdf_cities_proj\n\n\n\n\n\n\n\n\nx\ny\ngeometry\neasting\n\n\ncity\n\n\n\n\n\n\n\n\nMadrid\n3.159390e+06\n2.029851e+06\nPOLYGON ((3259390.356 2029850.92, 3258908.829 ...\n3.159390e+06\n\n\nBarcelona\n3.664997e+06\n2.065550e+06\nPOLYGON ((3764996.992 2065549.826, 3764515.465...\n3.664997e+06\n\n\nValencia\n3.426003e+06\n1.881060e+06\nPOLYGON ((3526003.188 1881060.49, 3525521.661 ...\n3.426003e+06\n\n\n\n\n\n\n\nDataFrames offer an extensive variety of useful methods; here, we will use the drop method to remove the column we no longer wish to retain:\n\ngdf_cities_proj = gdf_cities_proj.drop(columns=['easting'])\n\ngdf_cities_proj\n\n\n\n\n\n\n\n\nx\ny\ngeometry\n\n\ncity\n\n\n\n\n\n\n\nMadrid\n3.159390e+06\n2.029851e+06\nPOLYGON ((3259390.356 2029850.92, 3258908.829 ...\n\n\nBarcelona\n3.664997e+06\n2.065550e+06\nPOLYGON ((3764996.992 2065549.826, 3764515.465...\n\n\nValencia\n3.426003e+06\n1.881060e+06\nPOLYGON ((3526003.188 1881060.49, 3525521.661 ...",
    "crumbs": [
      "Python 101",
      "GeoPandas"
    ]
  },
  {
    "objectID": "class/4_geopandas.html#working-with-data",
    "href": "class/4_geopandas.html#working-with-data",
    "title": "GeoPandas",
    "section": "Working with Data",
    "text": "Working with Data\n\nReading Data\nGeoPandas can read various spatial data formats, such as Shapefiles, GeoPackages, and GeoJSON files. The read_file() function is the primary method for this. Note that the file path in the example below must be adjusted to point to the actual location of the file on your computer.\n\nmad_bldgs = gpd.read_file('../data/madrid_buildings/madrid_bldgs.gpkg')\n\nmad_bldgs.head()\n\n\n\n\n\n\n\n\nmean_height\narea\nperimeter\ncompactness\norientation\nvolume\nfloor_area_ratio\nform_factor\ncorners\nshape_index\nfractal_dimension\ngeometry\n\n\n\n\n0\nNaN\n187.418714\n58.669276\n0.491102\n40.235999\nNaN\nNaN\nNaN\n4\n0.700787\n1.026350\nPOLYGON ((448688.642 4492911, 448678.351 44928...\n\n\n1\n7.0\n39.082821\n26.992208\n0.472874\n10.252128\n273.579749\n78.165643\n5.410857\n4\n0.687658\n1.041691\nPOLYGON ((440862.665 4482604.017, 440862.64 44...\n\n\n2\n7.0\n39.373412\n27.050303\n0.475086\n10.252128\n275.613883\n78.746824\n5.400665\n4\n0.689265\n1.040760\nPOLYGON ((440862.681 4482608.269, 440862.665 4...\n\n\n3\n7.5\n37.933979\n26.739878\n0.464266\n10.252129\n284.504846\n75.867959\n5.513124\n4\n0.681371\n1.045072\nPOLYGON ((440862.705 4482612.365, 440862.681 4...\n\n\n4\n7.0\n39.013701\n26.972641\n0.472468\n10.183618\n273.095907\n78.027402\n5.412350\n4\n0.687363\n1.041798\nPOLYGON ((440880.29 4482607.963, 440880.274 44...\n\n\n\n\n\n\n\nThe head() method shows the first few rows of the GeoDataFrame, including the geometry column. The CRS is automatically detected and set.\n\n\nPlotting\nLet’s plot the data.\n\nmad_bldgs.plot()\n\n\n\n\n\n\n\n\nTo zoom in when plotting, you can set your x and y-axis limits. For a cleaner plot, it is also generally preferable to turn off the axes so that the coordinates do not render.\n\nax = mad_bldgs.plot()\n\nax.set_xlim(439000, 442000)\nax.set_ylim(4473000, 4476000)\nax.axis('off')\n\n(np.float64(439000.0),\n np.float64(442000.0),\n np.float64(4473000.0),\n np.float64(4476000.0))\n\n\n\n\n\n\n\n\n\nLet’s create a new column named area, which we will set to the value of each geometry’s area. Then, we will plot the data again, this time rendering the colour according to the building’s area.\n\nmad_bldgs['area'] = mad_bldgs.geometry.area\n\nax = mad_bldgs.plot(\n    column='area',\n    cmap='viridis',\n    vmax=10000,\n)\n\nax.set_xlim(439000, 442000)\nax.set_ylim(4473000, 4476000)\nax.axis('off')\n\n(np.float64(439000.0),\n np.float64(442000.0),\n np.float64(4473000.0),\n np.float64(4476000.0))\n\n\n\n\n\n\n\n\n\n\n\nSaving Data\nGeoPandas can save GeoDataFrames to various formats, including Shapefiles, GeoPackages, and GeoJSON files. The to_file() method is used for this purpose. You can specify the format using the driver parameter.\nmad_bldgs.to_file('bldgs_w_area.gpkg', driver='GPKG')",
    "crumbs": [
      "Python 101",
      "GeoPandas"
    ]
  },
  {
    "objectID": "recipes/accessibility/osm_accessibility_polys.html",
    "href": "recipes/accessibility/osm_accessibility_polys.html",
    "title": "Park accessibility from OSM data",
    "section": "",
    "text": "Calculate park accessibilities from OSM data.\nThis examples calculates park accessibility for London using OpenStreetMap Polygon data.\n\nfrom cityseer.metrics import layers\nfrom cityseer.tools import graphs, io\nimport matplotlib.pyplot as plt\nfrom osmnx import features\n\nTo start, follow the same approach as shown in the network examples to create the network.\n\nlng, lat = -0.13396079424572427, 51.51371088849723\nbuffer = 1500\npoly_wgs, epsg_code = io.buffered_point_poly(lng, lat, buffer)\nG = io.osm_graph_from_poly(poly_wgs)\nG_dual = graphs.nx_to_dual(G)\nnodes_gdf, _edges_gdf, network_structure = io.network_structure_from_nx(G_dual)\n\nWARNING:cityseer.tools.io:Merging node 12450391665 into 25544116 due to identical x, y coords.\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nINFO:cityseer.tools.graphs:Generating interpolated edge geometries.\n100%|██████████| 24145/24145 [00:00&lt;00:00, 40425.07it/s]\nINFO:cityseer.tools.io:Converting networkX graph to CRS code 32630.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\n100%|██████████| 22421/22421 [00:00&lt;00:00, 1121652.77it/s]\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\n100%|██████████| 24145/24145 [00:01&lt;00:00, 17382.42it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 22421/22421 [00:00&lt;00:00, 22910.69it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 12164/12164 [00:00&lt;00:00, 1199245.79it/s]\n100%|██████████| 12164/12164 [00:01&lt;00:00, 9660.49it/s] \nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 10440/10440 [00:00&lt;00:00, 56795.28it/s]\n100%|██████████| 7388/7388 [00:00&lt;00:00, 299816.34it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 9003/9003 [00:00&lt;00:00, 706783.44it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 6656/6656 [00:00&lt;00:00, 1207129.65it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 5274/5274 [00:00&lt;00:00, 141390.97it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6665/6665 [00:00&lt;00:00, 134299.78it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 6616/6616 [00:00&lt;00:00, 1419122.19it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 5274/5274 [00:00&lt;00:00, 35527.37it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6672/6672 [00:00&lt;00:00, 59759.71it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 6662/6662 [00:00&lt;00:00, 1381306.70it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 5274/5274 [00:00&lt;00:00, 133356.40it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6663/6663 [00:00&lt;00:00, 424721.09it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 6663/6663 [00:00&lt;00:00, 1121724.63it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 5274/5274 [00:00&lt;00:00, 85316.10it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6664/6664 [00:00&lt;00:00, 441791.80it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 5274/5274 [00:00&lt;00:00, 49655.34it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 5274/5274 [00:00&lt;00:00, 6443.98it/s] \nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6612/6612 [00:00&lt;00:00, 224302.31it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 5234/5234 [00:00&lt;00:00, 377555.89it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 5162/5162 [00:00&lt;00:00, 47760.01it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 5162/5162 [00:07&lt;00:00, 730.07it/s] \nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6067/6067 [00:00&lt;00:00, 71531.13it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 4805/4805 [00:00&lt;00:00, 425262.83it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 4769/4769 [00:00&lt;00:00, 54261.06it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 4769/4769 [00:01&lt;00:00, 3164.51it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 5862/5862 [00:00&lt;00:00, 166349.87it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 4717/4717 [00:00&lt;00:00, 433985.52it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 4702/4702 [00:00&lt;00:00, 33487.20it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 4702/4702 [00:02&lt;00:00, 1902.17it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 5720/5720 [00:00&lt;00:00, 246774.52it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 4621/4621 [00:00&lt;00:00, 603890.91it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 4606/4606 [00:00&lt;00:00, 52581.06it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 5697/5697 [00:00&lt;00:00, 1399083.66it/s]\nINFO:cityseer.tools.graphs:Snapping gapped endings.\n100%|██████████| 4606/4606 [00:00&lt;00:00, 17467.62it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 5895/5895 [00:00&lt;00:00, 1611511.57it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 4606/4606 [00:00&lt;00:00, 15205.69it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6783/6783 [00:00&lt;00:00, 345400.69it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\n100%|██████████| 5101/5101 [00:00&lt;00:00, 666702.34it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 4301/4301 [00:00&lt;00:00, 31614.77it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4821/4821 [00:00&lt;00:00, 967869.98it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3140/3140 [00:00&lt;00:00, 10759.43it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4862/4862 [00:00&lt;00:00, 104319.59it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3140/3140 [00:00&lt;00:00, 51642.04it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 3140/3140 [00:11&lt;00:00, 268.60it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 3880/3880 [00:00&lt;00:00, 42523.80it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 3681/3681 [00:00&lt;00:00, 1656570.07it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 2475/2475 [00:00&lt;00:00, 12262.67it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 3691/3691 [00:00&lt;00:00, 358842.34it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 2475/2475 [00:00&lt;00:00, 52322.04it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 2475/2475 [00:06&lt;00:00, 383.79it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 3167/3167 [00:00&lt;00:00, 54885.61it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 2028/2028 [00:00&lt;00:00, 81357.11it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\n100%|██████████| 2929/2929 [00:00&lt;00:00, 143003.17it/s]\nINFO:cityseer.tools.graphs:Ironing edges.\n100%|██████████| 2911/2911 [00:00&lt;00:00, 21519.45it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\n100%|██████████| 2900/2900 [00:00&lt;00:00, 380275.17it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\n100%|██████████| 1887/1887 [00:00&lt;00:00, 938867.34it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 1869/1869 [00:00&lt;00:00, 254501.47it/s]\nINFO:cityseer.tools.graphs:Converting graph to dual.\nINFO:cityseer.tools.graphs:Preparing dual nodes\n100%|██████████| 2849/2849 [00:00&lt;00:00, 41237.27it/s]\nINFO:cityseer.tools.graphs:Preparing dual edges (splitting and welding geoms)\n100%|██████████| 2849/2849 [00:04&lt;00:00, 704.53it/s]\nINFO:cityseer.tools.io:Preparing node and edge arrays from networkX graph.\n100%|██████████| 2849/2849 [00:00&lt;00:00, 19640.14it/s]\n100%|██████████| 2849/2849 [00:00&lt;00:00, 4356.11it/s]\nINFO:cityseer.graph:Edge R-tree built successfully with 6712 items.\n\n\nPrepare the parks GeoDataFrame by downloading the data from OpenStreetMap. The osmnx features_from_polygon works well for this purpose. In this instance, we are specifically targeting features that are labelled as a leisure type of park. You can use the same idea to extract other features or land use types.\nIt is important to convert the derivative GeoDataFrame to the same CRS as the network.\n\ndata_gdf = features.features_from_polygon(poly_wgs, tags={\"leisure\": [\"park\"]})\ndata_gdf = data_gdf.to_crs(nodes_gdf.crs)\n# reset index\ndata_gdf = data_gdf.reset_index(level=0, drop=True)\n\ndata_gdf\n\n\n\n\n\n\n\n\ngeometry\nGBV\nbarrier\nleisure\nname\nwikidata\nwikimedia_commons\nwikipedia\naccess\nopening_hours\n...\nbottle\nhistoric\nloc_name\nname:cy\nname:zh\nfoot\nname:ja\nalt_name\ntype\nsurface\n\n\nid\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n5579381\nPOLYGON ((699189.384 5709943.8, 699189.043 570...\nNaN\nNaN\npark\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nmultipolygon\ngrass\n\n\n3241371\nPOLYGON ((699470.032 5711728.944, 699463.775 5...\nActive\nfence\npark\nRussell Square\nQ1346906\nCategory:Russell_Square_Gardens\nen:Russell Square\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n3241840\nPOLYGON ((699136.323 5712190.801, 699139.55 57...\nNaN\nfence\npark\nTavistock Square\nQ1936696\nNaN\nen:Tavistock Square\npermissive\n07:30-sunset\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n4075108\nPOLYGON ((700241.772 5711256.088, 700243.597 5...\nNaN\nNaN\npark\nLincoln's Inn\nQ69482\nNaN\nen:Lincoln's Inn\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n4081049\nPOLYGON ((697602.375 5710597.115, 697665.44 57...\nNaN\nNaN\npark\nGrosvenor Square\nQ932992\nNaN\nen:Grosvenor Square\nyes\nMo-Su 07:30-dusk\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n4082589\nPOLYGON ((699169.133 5710522.521, 699170.334 5...\nNaN\nNaN\npark\nLeicester Square\nQ848912\nNaN\nen:Leicester Square\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n4253286\nPOLYGON ((699082.827 5711964.714, 699083.941 5...\nNaN\nfence\npark\nWoburn Square\nQ8028979\nNaN\nen:Woburn Square\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n4253288\nPOLYGON ((698963.988 5712061.606, 698963.808 5...\nNaN\nfence\npark\nGordon Square\nQ5585854\nNaN\nen:Gordon Square\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n4253646\nPOLYGON ((699584.927 5711815.931, 699611.882 5...\nActive\nfence\npark\nQueen Square Gardens\nQ3414013\nNaN\nen:Queen Square, London\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n4253657\nPOLYGON ((699910.437 5711532.233, 699874.943 5...\nNaN\nfence\npark\nRed Lion Square\nQ7304535\nNaN\nen:Red Lion Square\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n4253887\nPOLYGON ((698115.449 5710348.292, 698119.405 5...\nNaN\nfence\npark\nBerkeley Square\nQ127212\nNaN\nen:Berkeley Square\nyes\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n4253932\nPOLYGON ((699870.898 5710562.893, 699873.608 5...\nNaN\nNaN\npark\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n4254099\nPOLYGON ((699716.747 5710187.296, 699727.176 5...\nNaN\nNaN\npark\nVictoria Embankment Gardens\nQ7926695\nCategory:Victoria_Embankment_Gardens\nen:Victoria Embankment Gardens\nyes\nJan 01-Feb 15 08:30-16:30,Feb 16-Feb 29 08:30-...\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n4256229\nPOLYGON ((698615.632 5710615.991, 698633.72 57...\nNaN\nNaN\npark\nGolden Square\nQ5579811\nNaN\nen:Golden Square\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n4256950\nPOLYGON ((699673.205 5710055.344, 699673.178 5...\nNaN\nNaN\npark\nWhitehall Garden\nNaN\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n4256953\nPOLYGON ((699632.625 5709861.45, 699609.71 570...\nNaN\nNaN\npark\nWhitehall Garden\nQ18901051\nNaN\nen:Privy Garden of the Palace of Whitehall\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n4272920\nPOLYGON ((698780.057 5711434.937, 698778.086 5...\nNaN\nNaN\npark\nCrabtree Fields\nNaN\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n4358458\nPOLYGON ((698780.409 5710065.433, 698774.297 5...\nNaN\nNaN\npark\nSt James's Square Gardens\nQ500529\nNaN\nen:St James's Square\npermissive\nMo-Fr 10:00-16:30\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n4373996\nPOLYGON ((699943.843 5709744.706, 699930.88 57...\nNaN\nNaN\npark\nJubilee Gardens\nQ2290816\nNaN\nNaN\npermissive\n24/7\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n4393572\nPOLYGON ((699597.511 5711517.797, 699598.705 5...\nNaN\nfence\npark\nBloomsbury Square Gardens\nQ885408\nNaN\nen:Bloomsbury Square\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n30131571\nPOLYGON ((698717.644 5711636.424, 698722.347 5...\nNaN\nNaN\npark\nWhitfield Gardens\nNaN\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n30613392\nPOLYGON ((700001.375 5711083.483, 699989.142 5...\nNaN\nfence\npark\nLincoln's Inn Fields\nQ2736153\nNaN\nen:Lincoln's Inn Fields\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n38310101\nPOLYGON ((698169.651 5710815.626, 698174.877 5...\nNaN\nNaN\npark\nHanover Square\nQ3783111\nNaN\nen:Hanover Square, Westminster\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n38318550\nPOLYGON ((697694.563 5710327.204, 697699.041 5...\nNaN\nNaN\npark\nMount Street Gardens\nQ6923901\nNaN\nen:Mount Street Gardens\nNaN\nMo-Sa 08:00-17:00; Su,PH 09:00-17:00\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n40879988\nPOLYGON ((698941.172 5710700.987, 698972.984 5...\nNaN\nNaN\npark\nSt Anne's Churchyard\nQ18748717\nNaN\nen:St Anne's Churchyard\nNaN\nweek 1-13 Mo-Su 10:00-16:00; week 14-43 10:00-...\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n41117901\nPOLYGON ((699231.843 5710970.608, 699225.581 5...\nNaN\nNaN\npark\nNaN\nNaN\nNaN\nNaN\nyes\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n55736532\nPOLYGON ((699677.177 5712135.764, 699677.997 5...\nNaN\nNaN\npark\nBrunswick Square Gardens\nQ4979544\nNaN\nen:Brunswick Square\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n55737057\nPOLYGON ((699889.676 5712020.139, 699885.9 571...\nNaN\nNaN\npark\nCoram's Fields\nQ1131898\nCategory:Coram's Fields\nen:Coram's Fields\nNaN\nNaN\n...\nno\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n87079253\nPOLYGON ((698284.966 5709536.508, 698293.537 5...\nNaN\nNaN\npark\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n148004650\nPOLYGON ((698126.464 5711132.172, 698126.288 5...\nNaN\nNaN\npark\nCavendish Square\nQ5055036\nNaN\nen:Cavendish Square\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n154116823\nPOLYGON ((697490.773 5711412.593, 697470.912 5...\nNaN\nNaN\npark\nPaddington Street Gardens South\nQ15265011\nNaN\nen:Paddington Street Gardens\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n161024051\nPOLYGON ((700293.75 5710609.096, 700295.862 57...\nNaN\nfence\npark\nVictoria Embankment Gardens\nNaN\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n368199014\nPOLYGON ((698984.135 5711072.821, 698985.147 5...\nNaN\nfence\npark\nSoho Square Gardens\nQ2705335\nCategory:Soho_Square\nen:Soho Square\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n374960368\nPOLYGON ((698635.692 5709611.129, 698652.371 5...\nNaN\nNaN\npark\nSt. James's Park\nQ216914\nNaN\nen:St James's Park\nyes\nMo-Su 05:00-00:00\n...\nNaN\npark\nSt. James's Park\nParc Iago Sant\n圣詹姆士公园\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n374969316\nPOLYGON ((698857.167 5709732.666, 698824.199 5...\nNaN\nNaN\npark\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nyes\nNaN\nNaN\nNaN\nNaN\n\n\n383999575\nPOLYGON ((698502.689 5711443.431, 698530.335 5...\nNaN\nNaN\npark\nPearson Square\nQ67199266\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n747150853\nPOLYGON ((698874.805 5711610.457, 698884.695 5...\nNaN\nNaN\npark\nAlfred Place Gardens\nNaN\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n803099035\nPOLYGON ((699279.695 5712391.179, 699278.264 5...\nNaN\nNaN\npark\nCartwright Gardens\nQ19600673\nNaN\nen:Cartwright Gardens\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nカートライト・ガーデンズ\nNaN\nNaN\nNaN\n\n\n863554956\nPOLYGON ((698548.21 5709661.801, 698533.411 57...\nNaN\nNaN\npark\nThe Green Park\nQ119892\nNaN\nen:Green Park\nNaN\nNaN\n...\nNaN\npark\nNaN\nNaN\n绿园\nNaN\nNaN\nGreen Park\nNaN\nNaN\n\n\n1066129483\nPOLYGON ((697725.772 5710203.851, 697729.543 5...\nNaN\nNaN\npark\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n1098763494\nPOLYGON ((698632.144 5711655.736, 698650.639 5...\nNaN\nNaN\npark\nThe Poets' Park\nNaN\nNaN\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n\n\n41 rows × 50 columns\n\n\n\nOnce the data has been prepared, use the layers.compute_accessibilities method to compute accessibilities. The landuse_column_label and the target accessibility keys should correspond to the data in the input GeoDataFrame. Use the max_netw_assign_dist parameter to configurethe distance for network assignment.\n\n# compute pub accessibility\ndistances = [100, 200, 400, 800]\nnodes_gdf, data_gdf = layers.compute_accessibilities(\n    data_gdf,\n    landuse_column_label=\"leisure\",\n    accessibility_keys=[\"park\"],\n    nodes_gdf=nodes_gdf,\n    network_structure=network_structure,\n    distances=distances,\n)\n\nINFO:cityseer.metrics.layers:Computing land-use accessibility for: park\nINFO:cityseer.metrics.layers:Assigning data to network.\nINFO:cityseer.data:Assigning 41 data entries to network nodes (max_dist: 100).\nINFO:cityseer.data:Collected 325 potential node assignments from data entries.\nINFO:cityseer.data:Finished assigning data. 325 assignments added to 306 nodes.\nINFO:cityseer.graph:Barriers unset and R-tree cleared.\n100%|██████████| 2849/2849 [00:01&lt;00:00, 2792.29it/s]\nINFO:cityseer.config:Metrics computed for:\nINFO:cityseer.config:Distance: 100m, Beta: 0.04, Walking Time: 1.25 minutes.\nINFO:cityseer.config:Distance: 200m, Beta: 0.02, Walking Time: 2.5 minutes.\nINFO:cityseer.config:Distance: 400m, Beta: 0.01, Walking Time: 5.0 minutes.\nINFO:cityseer.config:Distance: 800m, Beta: 0.005, Walking Time: 10.0 minutes.\n\n\nThe output columns are named cc_{key}_{distance}_{type}. Where the keys will correspond to the input accessibility keys and the distances will correspond to the input distances. The types will correspond to either non-weighted nw or distance weighted wt count, or else the distance to the nearest instance of a given landuse.\nStandard GeoPandas functionality can be used to explore, visualise, or save the results.\n\nnodes_gdf.columns\n\nIndex(['ns_node_idx', 'x', 'y', 'live', 'weight', 'primal_edge',\n       'primal_edge_node_a', 'primal_edge_node_b', 'primal_edge_idx',\n       'dual_node', 'cc_park_100_nw', 'cc_park_100_wt', 'cc_park_200_nw',\n       'cc_park_200_wt', 'cc_park_400_nw', 'cc_park_400_wt', 'cc_park_800_nw',\n       'cc_park_800_wt', 'cc_park_nearest_max_800'],\n      dtype='object')\n\n\n\nfig, ax = plt.subplots(1, 1, figsize=(8, 8), facecolor=\"#1d1d1d\")\nnodes_gdf.plot(\n    column=\"cc_park_nearest_max_800\",\n    cmap=\"viridis_r\",\n    legend=False,\n    ax=ax,\n)\ndata_gdf.plot(\n    markersize=2,\n    edgecolor=None,\n    color=\"grey\",\n    legend=False,\n    ax=ax,\n)\nax.axis(False)\n\n(np.float64(697035.8123208123),\n np.float64(700647.6928482385),\n np.float64(5709138.304744158),\n np.float64(5712549.39964246))"
  },
  {
    "objectID": "recipes/accessibility/index.html",
    "href": "recipes/accessibility/index.html",
    "title": "Accessibilities",
    "section": "",
    "text": "The following two examples use the layers.compute_accessibilities method to compute accessibilities to land uses. In general, the same network pre-processing steps can be followed as shown for these network preparation steps or for the network centrality steps. A data set is their necessary for identifying the locations of different land uses and it is the impossible to compete accessibilities over the network using the layers.compute_accessibilities method.\nThis method requires:\nThe output GeoDataFrame will contain new columns for each landuse in the following three forms.\nThe last example follows a similar approach, but computes mixed land-uses using the layers.compute_mixed_uses method.",
    "crumbs": [
      "Cityseer Recipes",
      "Accessibilities"
    ]
  },
  {
    "objectID": "recipes/accessibility/index.html#landuse-accessibility-from-geopandas-data",
    "href": "recipes/accessibility/index.html#landuse-accessibility-from-geopandas-data",
    "title": "Accessibilities",
    "section": "Landuse accessibility from geopandas data",
    "text": "Landuse accessibility from geopandas data\nCalculate landuse accessibilities from a geopandas GeoDataFrame.\nNotebook",
    "crumbs": [
      "Cityseer Recipes",
      "Accessibilities"
    ]
  },
  {
    "objectID": "recipes/accessibility/index.html#landuse-accessibility-from-osm-data",
    "href": "recipes/accessibility/index.html#landuse-accessibility-from-osm-data",
    "title": "Accessibilities",
    "section": "Landuse accessibility from OSM data",
    "text": "Landuse accessibility from OSM data\nCalculate landuse accessibilities from OpenStreetMap.\nNotebook",
    "crumbs": [
      "Cityseer Recipes",
      "Accessibilities"
    ]
  },
  {
    "objectID": "recipes/accessibility/index.html#parks-accessibility-from-osm-data",
    "href": "recipes/accessibility/index.html#parks-accessibility-from-osm-data",
    "title": "Accessibilities",
    "section": "Parks accessibility from OSM data",
    "text": "Parks accessibility from OSM data\nCalculate park accessibilities from OSM Polygon data.\nNotebook",
    "crumbs": [
      "Cityseer Recipes",
      "Accessibilities"
    ]
  },
  {
    "objectID": "recipes/accessibility/index.html#calculating-mixed-uses",
    "href": "recipes/accessibility/index.html#calculating-mixed-uses",
    "title": "Accessibilities",
    "section": "Calculating mixed-uses",
    "text": "Calculating mixed-uses\nCalculate mixed land-uses.\nNotebook",
    "crumbs": [
      "Cityseer Recipes",
      "Accessibilities"
    ]
  },
  {
    "objectID": "recipes/accessibility/gpd_mixed_uses.html",
    "href": "recipes/accessibility/gpd_mixed_uses.html",
    "title": "Calculate mixed land-uses.",
    "section": "",
    "text": "Calculate mixed landuses from a geopandas GeoDataFrame.\n\nimport geopandas as gpd\nimport matplotlib.pyplot as plt\nfrom cityseer.metrics import layers\nfrom cityseer.tools import graphs, io\n\nTo start, follow the same approach as shown in the network examples to create the network.\n\nstreets_gpd = gpd.read_file(\"data/madrid_streets/street_network.gpkg\")\nstreets_gpd = streets_gpd.explode(reset_index=True)\nG = io.nx_from_generic_geopandas(streets_gpd)\nG_dual = graphs.nx_to_dual(G)\nnodes_gdf, _edges_gdf, network_structure = io.network_structure_from_nx(G_dual)\n\n100%|██████████| 47155/47155 [00:10&lt;00:00, 4345.39it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\n100%|██████████| 47129/47129 [00:00&lt;00:00, 108206.43it/s]\nINFO:cityseer.tools.graphs:Converting graph to dual.\nINFO:cityseer.tools.graphs:Preparing dual nodes\n100%|██████████| 47129/47129 [00:01&lt;00:00, 23991.18it/s]\nINFO:cityseer.tools.graphs:Preparing dual edges (splitting and welding geoms)\n100%|██████████| 47129/47129 [02:37&lt;00:00, 299.40it/s]\nINFO:cityseer.tools.io:Preparing node and edge arrays from networkX graph.\n100%|██████████| 47129/47129 [00:01&lt;00:00, 42389.17it/s]\n100%|██████████| 47129/47129 [00:13&lt;00:00, 3378.55it/s]\nINFO:cityseer.graph:Edge R-tree built successfully with 104026 items.\n\n\nRead-in the dataset from the source Geopackage or Shapefile Geopandas.\n\nprems_gpd = gpd.read_file(\"data/madrid_premises/madrid_premises.gpkg\")\nprems_gpd.head()\n\n\n\n\n\n\n\n\nindex\nlocal_id\nlocal_distr_id\nlocal_distr_desc\nlocal_neighb_id\nlocal_neighb_desc\nlocal_neighb_code\nlocal_census_section_id\nlocal_census_section_desc\nsection_id\nsection_desc\ndivision_id\ndivision_desc\nepigraph_id\nepigraph_desc\neasting\nnorthing\ngeometry\n\n\n\n\n0\n0\n10003324\n1\nCENTRO\n105\nUNIVERSIDAD\n5\n1091\n91\nI\nhospitality\n56\nfood_bev\n561001\nRESTAURANTE\n440181.6\n4475586.5\nPOINT (440181.6 4475586.5)\n\n\n1\n1\n10003330\n1\nCENTRO\n105\nUNIVERSIDAD\n5\n1115\n115\nR\nart_rec_entert\n90\ncreat_entert\n900003\nTEATRO Y ACTIVIDADES ESCENICAS REALIZADAS EN D...\n440000.6\n4474761.5\nPOINT (440000.6 4474761.5)\n\n\n2\n2\n10003356\n1\nCENTRO\n104\nJUSTICIA\n4\n1074\n74\nI\nhospitality\n56\nfood_bev\n561004\nBAR RESTAURANTE\n440618.6\n4474692.5\nPOINT (440618.6 4474692.5)\n\n\n3\n3\n10003364\n1\nCENTRO\n104\nJUSTICIA\n4\n1075\n75\nG\nwholesale_retail_motor\n47\nretail\n472401\nCOMERCIO AL POR MENOR DE PAN Y PRODUCTOS DE PA...\n440666.6\n4474909.5\nPOINT (440666.6 4474909.5)\n\n\n4\n4\n10003367\n1\nCENTRO\n106\nSOL\n6\n1119\n119\nG\nwholesale_retail_motor\n47\nretail\n477701\nCOMERCIO AL POR MENOR DE JOYAS, RELOJERIA Y BI...\n440378.6\n4474380.5\nPOINT (440378.6 4474380.5)\n\n\n\n\n\n\n\nIdentify or prepare any columns and land uses of interest, for which you want to compute accessibilities.\n\nprems_gpd.division_desc.unique()\n\narray(['food_bev', 'creat_entert', 'retail', 'services', 'education',\n       'accommod', 'Real Estate Activities',\n       'Residential Care Activities',\n       'Social Services Without Accommodation',\n       'Graphic Arts and Reproduction of Recorded Media',\n       'Sale and Repair of Motor Vehicles and Motorcycles',\n       'Decontamination and Other Waste Management Services',\n       'Gambling and Betting Activities', 'sports_rec', 'health',\n       'Wholesale Trade and Middlemen, Except for Motor Vehicles and Motorcycles',\n       'Telecommunications',\n       'Financial Services, Except Insurance and Pension Funds',\n       'Associative Activities', 'Veterinary Activities',\n       'Auxiliary Services to Financial Services and Insurance',\n       'Insurance, Reinsurance, and Pension Funds, Except Compulsory Social Security',\n       'Rental Activities',\n       'Office Administrative and Other Business Support Activities',\n       'Technical Services of Architecture and Engineering; Technical Testing and Analysis',\n       'Other Manufacturing Industries',\n       'Storage and Activities Related to Transport',\n       'Specialized Construction Activities and Building Finishing',\n       'Clothing Manufacturing',\n       'Activities of Travel Agencies, Tour Operators, Reservation Services, and Related Activities',\n       'Land Transport and Pipeline Transport',\n       'Other Professional, Scientific, and Technical Activities',\n       'Computer Repair, Personal Effects, and Household Items',\n       'Publishing (Includes Software)', 'Postal and Courier Activities',\n       'Food Industry', 'Advertising and Market Research',\n       'Public Administration and Defense; Compulsory Social Security',\n       'Film, Video, and TV Program Activities, Sound Recording, and Music Publishing, Sound Recording and Music Publishing',\n       'Legal and Accounting Activities',\n       'Building Promotion and Construction',\n       'Supply of Electricity, Gas, Steam, and Air Conditioning',\n       'Activities of Libraries, Archives, Museums, and Other Cultural Activities',\n       'Paper Industry',\n       'Manufacturing of Computer, Electronic, and Optical Products',\n       'Security and Investigation Activities',\n       'Leather and Footwear Industry',\n       'Repair and Installation of Machinery and Equipment',\n       'Manufacturing of Metal Products, Except Machinery and Equipment',\n       'Furniture Manufacturing',\n       'Building Services and Gardening Activities', 'Chemical Industry',\n       'Programming, Consultancy, and Other Computer-Related Activities',\n       'Manufacturing of Other Non-Metallic Mineral Products',\n       'Textile Industry', 'Research and Development',\n       'Activities of Head Offices; Management Consultancy Activities',\n       'Pharmaceutical Product Manufacturing',\n       'Manufacturing of Machinery and Equipment N.E.C.',\n       'Manufacturing of Motor Vehicles, Trailers, and Semi-Trailers',\n       'Information Services',\n       'Manufacturing of Rubber and Plastic Products',\n       'Manufacturing of Electrical Equipment',\n       'Manufacturing of Other Transport Equipment', 'Civil Engineering',\n       'Wood and Cork Industry, Except Furniture; Basketry and Basketwork',\n       'Waste Collection, Treatment, and Disposal; Materials Recovery',\n       'Activities of Extraterritorial Organizations and Bodies',\n       'Air Transport', 'Employment Activities',\n       'Agriculture, Livestock, Hunting, and Related Service Activities',\n       'Metallurgy; Manufacturing of Iron, Steel, and Ferro-Alloy Products',\n       'Broadcasting and Television Programming and Broadcasting Activities',\n       'Wastewater Collection and Treatment', 'Beverage Manufacturing',\n       'Water Collection, Treatment, and Supply',\n       'Support Activities for Extractive Industries',\n       'Other Extractive Industries', 'Forestry and Logging',\n       'Tobacco Industry'], dtype=object)\n\n\nOnce the land use and network data has been prepared, use the layers.compute_mixed_uses method to compute accessibilities to land uses. The landuse_column_label should correspond to the data in the input GeoDataFrame.\n\n# compute pub accessibility\ndistances = [100, 200, 400, 800]\nnodes_gdf, prems_gpd = layers.compute_mixed_uses(\n    prems_gpd,\n    landuse_column_label=\"division_desc\",\n    nodes_gdf=nodes_gdf,\n    network_structure=network_structure,\n    distances=distances,\n)\n\nINFO:cityseer.metrics.layers:Computing mixed-use measures.\nINFO:cityseer.metrics.layers:Assigning data to network.\nINFO:cityseer.data:Assigning 117358 data entries to network nodes (max_dist: 400).\nINFO:cityseer.data:Collected 198409 potential node assignments from data entries.\nINFO:cityseer.data:Finished assigning data. 198409 assignments added to 24598 nodes.\nINFO:cityseer.graph:Barriers unset and R-tree cleared.\n100%|██████████| 47129/47129 [00:20&lt;00:00, 2324.75it/s]\nINFO:cityseer.config:Metrics computed for:\nINFO:cityseer.config:Distance: 100m, Beta: 0.04, Walking Time: 1.25 minutes.\nINFO:cityseer.config:Distance: 200m, Beta: 0.02, Walking Time: 2.5 minutes.\nINFO:cityseer.config:Distance: 400m, Beta: 0.01, Walking Time: 5.0 minutes.\nINFO:cityseer.config:Distance: 800m, Beta: 0.005, Walking Time: 10.0 minutes.\n\n\nThe output columns are named cc_{key}_{distance}_{type}. Where the keys will correspond to the form of mixed-use measure and the distances will correspond to the input distances. The measures are available in non-weighted nw or distance weighted wt form.\nStandard GeoPandas functionality can be used to explore, visualise, or save the results.\n\nnodes_gdf.columns\n\nIndex(['ns_node_idx', 'x', 'y', 'live', 'weight', 'primal_edge',\n       'primal_edge_node_a', 'primal_edge_node_b', 'primal_edge_idx',\n       'dual_node', 'cc_hill_q0_100_nw', 'cc_hill_q0_100_wt',\n       'cc_hill_q1_100_nw', 'cc_hill_q1_100_wt', 'cc_hill_q2_100_nw',\n       'cc_hill_q2_100_wt', 'cc_hill_q0_200_nw', 'cc_hill_q0_200_wt',\n       'cc_hill_q1_200_nw', 'cc_hill_q1_200_wt', 'cc_hill_q2_200_nw',\n       'cc_hill_q2_200_wt', 'cc_hill_q0_400_nw', 'cc_hill_q0_400_wt',\n       'cc_hill_q1_400_nw', 'cc_hill_q1_400_wt', 'cc_hill_q2_400_nw',\n       'cc_hill_q2_400_wt', 'cc_hill_q0_800_nw', 'cc_hill_q0_800_wt',\n       'cc_hill_q1_800_nw', 'cc_hill_q1_800_wt', 'cc_hill_q2_800_nw',\n       'cc_hill_q2_800_wt'],\n      dtype='object')\n\n\n\nfig, ax = plt.subplots(1, 1, figsize=(8, 8), facecolor=\"#1d1d1d\")\nnodes_gdf.plot(\n    column=\"cc_hill_q0_400_wt\",\n    cmap=\"hot\",\n    legend=False,\n    ax=ax,\n)\nprems_gpd.plot(\n    column=\"division_desc\",\n    cmap=\"tab20\",\n    markersize=1,\n    edgecolor=None,\n    legend=False,\n    ax=ax,\n)\nax.set_xlim(439000, 439000 + 2500)\nax.set_ylim(4473000, 4473000 + 2500)\nax.axis(False)\n\n(np.float64(439000.0),\n np.float64(441500.0),\n np.float64(4473000.0),\n np.float64(4475500.0))"
  },
  {
    "objectID": "recipes/continuity/continuity_osm.html",
    "href": "recipes/continuity/continuity_osm.html",
    "title": "OSM",
    "section": "",
    "text": "Set the coordinates and buffer distances to your preferred extents.\n\nfrom cityseer.tools import io\n\n# lng, lat, buffer_dist, plot_buffer = -1.7063649924889566, 52.19277374082795, 1500, 1250  # stratford-upon-avon\nlng, lat, buffer_dist, plot_buffer = (\n    -0.13039709427587876,\n    51.516434828344366,\n    6000,\n    5000,\n)  # london\n# lng, lat, buffer_dist, plot_buffer = 18.425702641104582, -33.9204746754594, 3000, 2500  # cape town\npoly_wgs, _ = io.buffered_point_poly(lng, lat, buffer_dist)\npoly_utm, _ = io.buffered_point_poly(lng, lat, buffer_dist, projected=True)\n# select extents for plotting\nplot_bbox = poly_utm.centroid.buffer(plot_buffer).bounds"
  },
  {
    "objectID": "recipes/continuity/continuity_osm.html#preparation",
    "href": "recipes/continuity/continuity_osm.html#preparation",
    "title": "OSM",
    "section": "",
    "text": "Set the coordinates and buffer distances to your preferred extents.\n\nfrom cityseer.tools import io\n\n# lng, lat, buffer_dist, plot_buffer = -1.7063649924889566, 52.19277374082795, 1500, 1250  # stratford-upon-avon\nlng, lat, buffer_dist, plot_buffer = (\n    -0.13039709427587876,\n    51.516434828344366,\n    6000,\n    5000,\n)  # london\n# lng, lat, buffer_dist, plot_buffer = 18.425702641104582, -33.9204746754594, 3000, 2500  # cape town\npoly_wgs, _ = io.buffered_point_poly(lng, lat, buffer_dist)\npoly_utm, _ = io.buffered_point_poly(lng, lat, buffer_dist, projected=True)\n# select extents for plotting\nplot_bbox = poly_utm.centroid.buffer(plot_buffer).bounds"
  },
  {
    "objectID": "recipes/continuity/continuity_osm.html#loading-data-from-osm",
    "href": "recipes/continuity/continuity_osm.html#loading-data-from-osm",
    "title": "OSM",
    "section": "Loading data from OSM",
    "text": "Loading data from OSM\nFor this example, we’ll use a custom OSM query that excludes footways because the continuity analysis needs OSM ways that have street name or route number information.\nFor this form of analysis, only basic cleaning is recommended:\n\nnot consolidating nodes because this risks accidentally dropping highway / ref / name attributes\nnot like closeness or betweenness methods, where topological distortions are arguably a bigger issue\n\n\nquery = \"\"\"\n[out:json];\n(\n    way[\"highway\"]\n    [\"area\"!=\"yes\"]\n    [\"highway\"!~\"footway|pedestrian|steps|bus_guideway|escape|raceway|proposed|planned|abandoned|platform|construction\"]\n    [\"service\"!~\"parking_aisle\"]\n    [\"amenity\"!~\"charging_station|parking|fuel|motorcycle_parking|parking_entrance|parking_space\"]\n    [\"access\"!~\"private|customers\"]\n    [\"indoor\"!=\"yes\"]\n    (poly:\"{geom_osm}\");\n);\nout body;\n&gt;;\nout qt;\n\"\"\"\nG_osm = io.osm_graph_from_poly(\n    poly_wgs, custom_request=query, simplify=True, iron_edges=False\n)\n\nINFO:cityseer.tools.io:Converting networkX graph from EPSG code 4326 to EPSG code 32630.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\n100%|██████████| 141799/141799 [00:00&lt;00:00, 307109.58it/s]\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\n100%|██████████| 152077/152077 [00:00&lt;00:00, 672708.16it/s]\nINFO:cityseer.tools.graphs:Generating interpolated edge geometries.\n100%|██████████| 152077/152077 [00:03&lt;00:00, 47701.10it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 141799/141799 [00:23&lt;00:00, 6088.50it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\n100%|██████████| 36411/36411 [00:00&lt;00:00, 226888.05it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 34012/34012 [00:00&lt;00:00, 56288.52it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 32172/32172 [00:00&lt;00:00, 87738.65it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 32172/32172 [00:08&lt;00:00, 3622.80it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 26632/26632 [00:00&lt;00:00, 184209.95it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\n100%|██████████| 36520/36520 [00:03&lt;00:00, 10934.54it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 34380/34380 [00:00&lt;00:00, 529406.13it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 26335/26335 [00:09&lt;00:00, 2859.41it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\n100%|██████████| 35324/35324 [00:00&lt;00:00, 149166.62it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 27279/27279 [00:00&lt;00:00, 97660.35it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 27279/27279 [00:04&lt;00:00, 6087.78it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 24920/24920 [00:00&lt;00:00, 58761.52it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\n100%|██████████| 32513/32513 [00:01&lt;00:00, 20982.18it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 23585/23585 [00:00&lt;00:00, 141766.68it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 30677/30677 [00:00&lt;00:00, 700146.18it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 23133/23133 [00:05&lt;00:00, 4191.83it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\n100%|██████████| 30750/30750 [00:00&lt;00:00, 43371.19it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 23206/23206 [00:00&lt;00:00, 119011.86it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 23206/23206 [00:01&lt;00:00, 12658.30it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 23083/23083 [00:00&lt;00:00, 621311.58it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\n100%|██████████| 30654/30654 [00:00&lt;00:00, 131804.30it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 23066/23066 [00:00&lt;00:00, 503339.17it/s]"
  },
  {
    "objectID": "recipes/continuity/continuity_osm.html#observe-continuity-metrics",
    "href": "recipes/continuity/continuity_osm.html#observe-continuity-metrics",
    "title": "OSM",
    "section": "Observe continuity metrics",
    "text": "Observe continuity metrics\nWe can now run the contunity metrics\n\nimport matplotlib.pyplot as plt\n\nfrom cityseer.tools import io, plot\nfrom cityseer.metrics import observe\n\n# methods can be \"names\", \"routes\", \"highways\"\n\nprint(\"Continuity by street names\")\nG_cont, NamesContReport = observe.street_continuity(G_osm, method=\"names\")\nNamesContReport.report_by_count(n_items=5)\nNamesContReport.report_by_length(n_items=5)\n\nprint(\"Continuity by route numbers\")\nG_cont, RoutesContReport = observe.street_continuity(G_cont, method=\"routes\")\nRoutesContReport.report_by_count(n_items=5)\nRoutesContReport.report_by_length(n_items=5)\n\nprint(\"Continuity by highway types\")\nG_cont, HwyContReport = observe.street_continuity(G_cont, method=\"highways\")\nHwyContReport.report_by_count(n_items=5)\nHwyContReport.report_by_length(n_items=5)\n\nprint(\"Continuity by overlapping routes and names types\")\nG_cont, HybridContReport = observe.hybrid_street_continuity(G_cont)\nHybridContReport.report_by_count(n_items=5)\nHybridContReport.report_by_length(n_items=5)\n\nINFO:cityseer.metrics.observe:Calculating metrics for names.\n\n\nContinuity by street names\n\n\n100%|██████████| 30519/30519 [00:00&lt;00:00, 44680.14it/s]\nINFO:cityseer.metrics.observe:Reporting top 5 continuity observations by street counts.\nINFO:cityseer.metrics.observe:Count: 52 - harrow road\nINFO:cityseer.metrics.observe:Count: 50 - holloway road\nINFO:cityseer.metrics.observe:Count: 48 - king's road\nINFO:cityseer.metrics.observe:Count: 46 - wandsworth road\nINFO:cityseer.metrics.observe:Count: 44 - battersea park road\nINFO:cityseer.metrics.observe:Reporting top 5 continuity observations by street lengths.\nINFO:cityseer.metrics.observe:Length: 6.0km - westway\nINFO:cityseer.metrics.observe:Length: 5.02km - regent's canal towpath\nINFO:cityseer.metrics.observe:Length: 4.43km - outer circle\nINFO:cityseer.metrics.observe:Length: 3.95km - harrow road\nINFO:cityseer.metrics.observe:Length: 3.35km - finchley road\nINFO:cityseer.metrics.observe:Calculating metrics for routes.\n\n\nContinuity by route numbers\n\n\n100%|██████████| 30519/30519 [00:00&lt;00:00, 172552.22it/s]\nINFO:cityseer.metrics.observe:Reporting top 5 continuity observations by street counts.\nINFO:cityseer.metrics.observe:Count: 174 - a4\nINFO:cityseer.metrics.observe:Count: 151 - a3220\nINFO:cityseer.metrics.observe:Count: 144 - a501\nINFO:cityseer.metrics.observe:Count: 107 - a400\nINFO:cityseer.metrics.observe:Count: 99 - a202\nINFO:cityseer.metrics.observe:Reporting top 5 continuity observations by street lengths.\nINFO:cityseer.metrics.observe:Length: 12.6km - a4\nINFO:cityseer.metrics.observe:Length: 10.95km - a3220\nINFO:cityseer.metrics.observe:Length: 9.0km - a501\nINFO:cityseer.metrics.observe:Length: 7.94km - a400\nINFO:cityseer.metrics.observe:Length: 7.71km - a202\n\n\nContinuity by highway types\n\n\nINFO:cityseer.metrics.observe:Calculating metrics for highways.\n100%|██████████| 30519/30519 [00:00&lt;00:00, 87953.52it/s]\nINFO:cityseer.metrics.observe:Reporting top 5 continuity observations by street counts.\nINFO:cityseer.metrics.observe:Count: 13294 - residential\nINFO:cityseer.metrics.observe:Count: 6573 - service\nINFO:cityseer.metrics.observe:Count: 3200 - unclassified\nINFO:cityseer.metrics.observe:Count: 2650 - primary\nINFO:cityseer.metrics.observe:Count: 1963 - cycleway\nINFO:cityseer.metrics.observe:Reporting top 5 continuity observations by street lengths.\nINFO:cityseer.metrics.observe:Length: 1045.4km - residential\nINFO:cityseer.metrics.observe:Length: 428.53km - service\nINFO:cityseer.metrics.observe:Length: 243.57km - unclassified\nINFO:cityseer.metrics.observe:Length: 181.72km - primary\nINFO:cityseer.metrics.observe:Length: 167.71km - cycleway\n\n\nContinuity by overlapping routes and names types\n\n\nINFO:cityseer.metrics.observe:Calculating metrics for routes.\n100%|██████████| 30519/30519 [00:00&lt;00:00, 140316.03it/s]\nINFO:cityseer.metrics.observe:Reporting top 5 continuity observations by street counts.\nINFO:cityseer.metrics.observe:Count: 304 - a501\nINFO:cityseer.metrics.observe:Count: 281 - a202\nINFO:cityseer.metrics.observe:Count: 280 - a3220\nINFO:cityseer.metrics.observe:Count: 255 - a4\nINFO:cityseer.metrics.observe:Count: 170 - a400\nINFO:cityseer.metrics.observe:Reporting top 5 continuity observations by street lengths.\nINFO:cityseer.metrics.observe:Length: 22.66km - a501\nINFO:cityseer.metrics.observe:Length: 21.08km - a3220\nINFO:cityseer.metrics.observe:Length: 19.9km - a202\nINFO:cityseer.metrics.observe:Length: 19.06km - a4\nINFO:cityseer.metrics.observe:Length: 13.35km - a40\n\n\n\nfor method, shape_exp, descriptor, cmap, inverse, col_by_categ in zip(\n    [\"names\", \"routes\", \"highways\", \"hybrid\"],  #\n    [1, 0.75, 0.5, 1],  #\n    [\"Street names\", \"Routes\", \"Road types\", \"Hybrid routes & names\"],  #\n    [\"plasma\", \"viridis\", \"tab10\", \"tab10\"],  #\n    [False, False, True, False],  #\n    [False, False, True, True],\n):\n    print(f\"Plotting results for method: {method}\")\n    # plot\n    bg_colour = \"#1d1d1d\"\n    fig, axes = plt.subplots(\n        2, 1, dpi=150, figsize=(8, 12), facecolor=bg_colour, constrained_layout=True\n    )\n    fig.suptitle(\n        f\"OS Open Roads plotted by {descriptor} continuity\",\n        fontsize=\"small\",\n        ha=\"center\",\n    )\n    # by count\n    plot.plot_nx_edges(\n        axes[0],  # type: ignore\n        nx_multigraph=G_cont,\n        edge_metrics_key=f\"{method}_cont_by_count\",\n        bbox_extents=plot_bbox,\n        cmap_key=cmap,\n        lw_min=0.5,\n        lw_max=2,\n        edge_label_key=f\"{method}_cont_by_label\",\n        colour_by_categorical=col_by_categ,\n        shape_exp=shape_exp,\n        face_colour=bg_colour,\n        invert_plot_order=inverse,\n    )\n    axes[0].set_xlabel(f\"{descriptor} by count\", fontsize=\"x-small\")  # type: ignore\n    # by length\n    plot.plot_nx_edges(\n        axes[1],  # type: ignore\n        nx_multigraph=G_cont,\n        edge_metrics_key=f\"{method}_cont_by_length\",\n        bbox_extents=plot_bbox,\n        cmap_key=cmap,\n        lw_min=0.5,\n        lw_max=2,\n        edge_label_key=f\"{method}_cont_by_label\",\n        colour_by_categorical=col_by_categ,\n        shape_exp=shape_exp,\n        face_colour=bg_colour,\n        invert_plot_order=inverse,\n    )\n    axes[1].set_xlabel(f\"{descriptor} by length (metres)\", fontsize=\"x-small\")  # type: ignore\n    plt.show()\n\nINFO:cityseer.tools.plot:Extracting edge geometries\n\n\nPlotting results for method: names\n\n\n30519it [00:00, 436173.32it/s]\nINFO:cityseer.tools.plot:Generating plot\n100%|██████████| 30519/30519 [00:03&lt;00:00, 9848.79it/s] \nINFO:cityseer.tools.plot:Extracting edge geometries\n30519it [00:00, 515888.89it/s]\nINFO:cityseer.tools.plot:Generating plot\n100%|██████████| 30519/30519 [00:02&lt;00:00, 11225.09it/s]\n\n\n\n\n\n\n\n\n\nINFO:cityseer.tools.plot:Extracting edge geometries\n\n\nPlotting results for method: routes\n\n\n30519it [00:00, 639530.98it/s]\nINFO:cityseer.tools.plot:Generating plot\n100%|██████████| 30519/30519 [00:02&lt;00:00, 10577.33it/s]\nINFO:cityseer.tools.plot:Extracting edge geometries\n30519it [00:00, 623780.34it/s]\nINFO:cityseer.tools.plot:Generating plot\n100%|██████████| 30519/30519 [00:02&lt;00:00, 10582.54it/s]\n\n\n\n\n\n\n\n\n\nINFO:cityseer.tools.plot:Extracting edge geometries\n\n\nPlotting results for method: highways\n\n\n30519it [00:00, 583939.51it/s]\nINFO:cityseer.tools.plot:Generating plot\n100%|██████████| 11/11 [00:02&lt;00:00,  5.28it/s]\nINFO:cityseer.tools.plot:Extracting edge geometries\n30519it [00:00, 538861.30it/s]\nINFO:cityseer.tools.plot:Generating plot\n100%|██████████| 11/11 [00:01&lt;00:00,  5.67it/s]\n\n\n\n\n\n\n\n\n\nINFO:cityseer.tools.plot:Extracting edge geometries\n\n\nPlotting results for method: hybrid\n\n\n30519it [00:00, 632900.20it/s]\nINFO:cityseer.tools.plot:Generating plot\n100%|██████████| 11/11 [00:01&lt;00:00,  6.20it/s]\nINFO:cityseer.tools.plot:Extracting edge geometries\n30519it [00:00, 686204.52it/s]\nINFO:cityseer.tools.plot:Generating plot\n100%|██████████| 11/11 [00:01&lt;00:00,  7.26it/s]"
  },
  {
    "objectID": "recipes/networks/network_from_bounds.html",
    "href": "recipes/networks/network_from_bounds.html",
    "title": "OSM network from a boundary file",
    "section": "",
    "text": "Use a custom boundary file to create a networkx graph from OSM.\nIf you have a boundary file in a GeoPackage, shapefile, or similar format, then you can load this file and use it as the boundary for creating a network from OSM.\n\nimport geopandas as gpd\nfrom cityseer.tools import io, plot\n\nUse geopandas to load the boundary file. Check that your file path is correct!\n\nbounds_gpd = gpd.read_file(\"data/madrid_bounds/madrid_bounds.gpkg\")\nbounds_gpd\n\n\n\n\n\n\n\n\nCODDIS\nNOMDIS\nCOD_BAR\nNOMBRE\nShape_Leng\nCOD_DIS_TX\nBARRIO_MAY\nCOD_DISBAR\nNUM_BAR\nBARRIO_MT\nCOD_DISB\ngeometry\n\n\n\n\n0\n1\nCentro\n011\nPalacio\n0.0\n01\nPALACIO\n11\n1\nPALACIO\n1-1\nPOLYGON ((441182.611 4463570.002, 441178.708 4...\n\n\n\n\n\n\n\nExtract the EPSG code from the boundary file.\n\nepsg_code = bounds_gpd.crs.to_epsg()\nprint(epsg_code)\nprint(bounds_gpd.crs.is_projected)\n\n25830\nTrue\n\n\nIf the geometry is not in a projected coordinate system, reproject it to a locally projected coordinate system before doing buffering or simplification. This can be done with the built-in to_crs method in geopandas. The EPSG code for the UTM zone can be found at epsg.io. For example, if your boundary is in the UTM zone 30N, you can use code 32630.\nFor the currently opened file, the boundary is already in a projected coordinate system, so we can skip this step. When working with a file that does need to reprojected, then you can use the following code to project your CRS to a given EPSG code.\n\n# shown as example - unnecessary step for current dataset\nbounds_gpd = bounds_gpd.to_crs(epsg=25830)\nprint(epsg_code)\nprint(bounds_gpd.crs.is_projected)\n\n25830\nTrue\n\n\nConvert the GeoDataFrame into a Polygon using the geopandas union_all method. This will create a single unified shapely geometry.\n\nbounds_geom = bounds_gpd.union_all()\nbounds_geom\n\n\n\n\n\n\n\n\nIf the geometries are complex, then the OSM data request may fail due to URL length limitations (because each coordinate has to be passed in the URL). To avoid this, you can use the convex_hull or else the simplify method to reduce the number of points in the geometry.\n\nbounds_geom_simpl = bounds_geom.convex_hull\nbounds_geom_simpl\n\n\n\n\n\n\n\n\nIt is best practise to buffer the geometry by an amount matching the farthest distance used for centrality or accessibility calculations, which prevents edge roll-off effects.\n\nbounds_geom_buff = bounds_geom_simpl.buffer(100)\nbounds_geom_buff\n\n\n\n\n\n\n\n\nThe shapely Polygon can now be used as before to download and prepare an OSM graph.\n\n# simplification turned off for this example\nG = io.osm_graph_from_poly(\n    bounds_geom_buff,\n    poly_crs_code=epsg_code,\n    simplify=False,\n)\nprint(G)\n\nWARNING:cityseer.tools.io:Merging node 12288331228 into 256149889 due to identical x, y coords.\nWARNING:cityseer.tools.io:Merging node 12119257161 into 12119257160 due to identical x, y coords.\nWARNING:cityseer.tools.io:Merging node 12290337809 into 2334349237 due to identical x, y coords.\nWARNING:cityseer.tools.io:Unable to parse level info: t\nWARNING:cityseer.tools.io:Unable to parse level info: t\nWARNING:cityseer.tools.io:Unable to parse level info: t\nWARNING:cityseer.tools.io:Unable to parse level info: t\nWARNING:cityseer.tools.io:Unable to parse level info: t\nWARNING:cityseer.tools.io:Unable to parse level info: 1-2\nINFO:cityseer.tools.graphs:Generating interpolated edge geometries.\n100%|██████████| 771636/771636 [00:15&lt;00:00, 49490.12it/s]\nINFO:cityseer.tools.io:Converting networkX graph to CRS code 32630.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\n100%|██████████| 692056/692056 [00:00&lt;00:00, 1122310.89it/s]\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\n100%|██████████| 771636/771636 [00:40&lt;00:00, 18932.66it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 692056/692056 [00:32&lt;00:00, 21315.84it/s]\n\n\nMultiGraph with 217449 nodes and 297029 edges\n\n\nSetting the x_lim and y_lim extents will effectively zoom-in so that the results of the query can be seen more clearly.\n\nplot.plot_nx(\n    G,\n    plot_geoms=True,\n    x_lim=(439500, 439500 + 2000),\n    y_lim=(4473500, 4473500 + 2000),\n)\n\nINFO:cityseer.tools.plot:Preparing graph nodes\nINFO:cityseer.tools.plot:Preparing graph edges\n100%|██████████| 297029/297029 [00:05&lt;00:00, 53590.98it/s]"
  },
  {
    "objectID": "recipes/networks/index.html",
    "href": "recipes/networks/index.html",
    "title": "Network Preparation",
    "section": "",
    "text": "The below examples illustrate how to create cityseer compatible networkx graphs from various data sources, including OpenStreetMap (OSM) data and geopandas GeoDataFrames. These workflows will automatically prepare the network for you, and this should be sufficient for the great majority of cases.\nIf you specifically wish to prepare the network manually:\nThe network nodes require x and y attributes storing the coordinates of the node in a projected coordinate system. You can also optionally add the following two attributes:\nFor edges, cityseer network representations contain a geom attribute which stores a shapely LineString geometry of the edge. cityseer will use the geom attribute to calculate properties of the network such as the lengths of streets and their angular deviations. For the best to results the topology of the graph should reflect the real world topology of the street network and should not be conflated with the geometric representation of the streets. Curvatures and turns within a street segment should be represented within the same LineString geometry rather than adding additional nodes and segments, which would otherwise distort the outcomes of centrality measures.\nThe first several examples use the osm_graph_from_poly function available from the cityseer package’s io module. This is a versatile function for generating networks from OSM data.",
    "crumbs": [
      "Cityseer Recipes",
      "Network Preparation"
    ]
  },
  {
    "objectID": "recipes/networks/index.html#osm-network-from-a-bounding-box",
    "href": "recipes/networks/index.html#osm-network-from-a-bounding-box",
    "title": "Network Preparation",
    "section": "OSM network from a bounding box",
    "text": "OSM network from a bounding box\nUse a bounding box to create a networkx graph from OpenStreetMap data. See this example for some use cases including how to use specific Coordinate Reference Systems.\nNotebook",
    "crumbs": [
      "Cityseer Recipes",
      "Network Preparation"
    ]
  },
  {
    "objectID": "recipes/networks/index.html#osm-network-from-a-buffered-coordinate",
    "href": "recipes/networks/index.html#osm-network-from-a-buffered-coordinate",
    "title": "Network Preparation",
    "section": "OSM network from a buffered coordinate",
    "text": "OSM network from a buffered coordinate\nUse a buffered point to create a networkx graph from OSM.\nNotebook",
    "crumbs": [
      "Cityseer Recipes",
      "Network Preparation"
    ]
  },
  {
    "objectID": "recipes/networks/index.html#osm-network-from-a-boundary-file",
    "href": "recipes/networks/index.html#osm-network-from-a-boundary-file",
    "title": "Network Preparation",
    "section": "OSM network from a boundary file",
    "text": "OSM network from a boundary file\nUse a custom boundary file to create a networkx graph from OSM.\nNotebook",
    "crumbs": [
      "Cityseer Recipes",
      "Network Preparation"
    ]
  },
  {
    "objectID": "recipes/networks/index.html#osm-network-from-a-relation-id",
    "href": "recipes/networks/index.html#osm-network-from-a-relation-id",
    "title": "Network Preparation",
    "section": "OSM network from a relation id",
    "text": "OSM network from a relation id\nUse an OSM relation id to create a networkx graph from OSM.\nNotebook",
    "crumbs": [
      "Cityseer Recipes",
      "Network Preparation"
    ]
  },
  {
    "objectID": "recipes/networks/index.html#custom-network-from-a-streets-dataset",
    "href": "recipes/networks/index.html#custom-network-from-a-streets-dataset",
    "title": "Network Preparation",
    "section": "Custom network from a streets dataset",
    "text": "Custom network from a streets dataset\nUse geopandas to open a street network file and convert it to a networkx graph.\nNotebook",
    "crumbs": [
      "Cityseer Recipes",
      "Network Preparation"
    ]
  },
  {
    "objectID": "recipes/networks/index.html#convert-a-network-from-osmnx",
    "href": "recipes/networks/index.html#convert-a-network-from-osmnx",
    "title": "Network Preparation",
    "section": "Convert a network from osmnx",
    "text": "Convert a network from osmnx\nConvert a network from osmnx to a cityseer compatible networkx graph.\nNotebook",
    "crumbs": [
      "Cityseer Recipes",
      "Network Preparation"
    ]
  },
  {
    "objectID": "recipes/networks/index.html#convert-a-network-from-momepy",
    "href": "recipes/networks/index.html#convert-a-network-from-momepy",
    "title": "Network Preparation",
    "section": "Convert a network from momepy",
    "text": "Convert a network from momepy\nConvert a network from momepy to a cityseer compatible networkx graph.\nNotebook",
    "crumbs": [
      "Cityseer Recipes",
      "Network Preparation"
    ]
  },
  {
    "objectID": "recipes/networks/index.html#saving-a-network-to-a-file",
    "href": "recipes/networks/index.html#saving-a-network-to-a-file",
    "title": "Network Preparation",
    "section": "Saving a network to a file",
    "text": "Saving a network to a file\nSave a networkx graph to a file.\nNotebook",
    "crumbs": [
      "Cityseer Recipes",
      "Network Preparation"
    ]
  },
  {
    "objectID": "recipes/networks/index.html#dual-graph-from-a-primal-graph",
    "href": "recipes/networks/index.html#dual-graph-from-a-primal-graph",
    "title": "Network Preparation",
    "section": "Dual graph from a primal graph",
    "text": "Dual graph from a primal graph\nCreate a dual graph representation from a primal graph.\nNotebook",
    "crumbs": [
      "Cityseer Recipes",
      "Network Preparation"
    ]
  },
  {
    "objectID": "recipes/networks/index.html#custom-network-simplification",
    "href": "recipes/networks/index.html#custom-network-simplification",
    "title": "Network Preparation",
    "section": "Custom network simplification",
    "text": "Custom network simplification\nFor purposes of network analysis, good sources of street network data, such as the Ordnance Survey’s OS Open Roads, typically have two distinguishing characteristics:\n\nThe network has been simplified to its essential structure: i.e. unnecessarily complex representations of intersections, on-ramps, divided roadways, etc., have been reduced to a simpler representation concurring more readily with the core topological structure of street networks.\nThe topology of the network is kept distinct from the geometry of the streets. Often-times, as can be seen with Open Street Map, additional nodes are added to streets to represent geometric twists and turns along a roadway. These additional nodes cause topological distortions that impact network centrality measures.\n\nWhen a high-quality source is available, it may be best not to attempt additional clean-up unless there is a particular rationale for doing so. On the other hand, cleaning and simplification is recommended when working with Open Street Map data. cityseer has an automated cleaning routine for OSM data, but it is also possible to manually configure network simplification steps and parameters as shown in the following notebook.\nNotebook",
    "crumbs": [
      "Cityseer Recipes",
      "Network Preparation"
    ]
  },
  {
    "objectID": "recipes/networks/network_simplification.html",
    "href": "recipes/networks/network_simplification.html",
    "title": "Custom network simplification",
    "section": "",
    "text": "Manually configure network simplification steps and parameters.\nNetwork simplification helps to prevent distortions in centrality measures and can also be preferable for visualisation.\nWhile cleaning and simplifying the network, cityseer keeps track of intersection coordinates and street geometries and updates these in place, checking that the street alignments remain as accurate as possible. This is a complex undertaking that involves finding an approach intended to work for most situations. Manual inspection and cleaning is recommended as a final step for best results.\n\nfrom cityseer.tools import graphs, plot, io\n\nThe test area is taken from London Soho.\n\nlng, lat = -0.13396079424572427, 51.51371088849723\nbuffer = 1200\npoly_wgs, epsg_code = io.buffered_point_poly(lng, lat, buffer)\n\n\nOption 1 - Automatic simplification\nSimplification is automatic when using the osm_graph_from_poly function.\n\nG_auto = io.osm_graph_from_poly(poly_wgs, simplify=True)\nprint(G_auto)\nplot.plot_nx(\n    G_auto,\n    plot_geoms=True,\n    figsize=(10, 10),\n    x_lim=(698173, 699570),\n    y_lim=(5710085, 5711440),\n)\n\nWARNING:cityseer.tools.io:Merging node 12450391665 into 25544116 due to identical x, y coords.\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nINFO:cityseer.tools.graphs:Generating interpolated edge geometries.\n100%|██████████| 16721/16721 [00:00&lt;00:00, 52954.11it/s]\nINFO:cityseer.tools.io:Converting networkX graph to CRS code 32630.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\n100%|██████████| 15582/15582 [00:00&lt;00:00, 1151235.60it/s]\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\n100%|██████████| 16721/16721 [00:00&lt;00:00, 18774.94it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 15582/15582 [00:00&lt;00:00, 23807.70it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 8611/8611 [00:00&lt;00:00, 1417748.84it/s]\n100%|██████████| 8611/8611 [00:00&lt;00:00, 10483.71it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 7472/7472 [00:00&lt;00:00, 64412.90it/s]\n100%|██████████| 5224/5224 [00:00&lt;00:00, 262883.11it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 6457/6457 [00:00&lt;00:00, 999727.61it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4729/4729 [00:00&lt;00:00, 1206793.84it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3753/3753 [00:00&lt;00:00, 298592.95it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4729/4729 [00:00&lt;00:00, 177436.03it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4700/4700 [00:00&lt;00:00, 1833618.16it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3753/3753 [00:00&lt;00:00, 33844.30it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4748/4748 [00:00&lt;00:00, 301562.06it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4740/4740 [00:00&lt;00:00, 1748395.12it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3753/3753 [00:00&lt;00:00, 145297.34it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4741/4741 [00:00&lt;00:00, 468946.21it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4741/4741 [00:00&lt;00:00, 1195742.35it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3753/3753 [00:00&lt;00:00, 90900.40it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4742/4742 [00:00&lt;00:00, 429140.82it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3753/3753 [00:00&lt;00:00, 55272.51it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 3753/3753 [00:00&lt;00:00, 311942.11it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4742/4742 [00:00&lt;00:00, 55589.41it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3753/3753 [00:00&lt;00:00, 605129.09it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3715/3715 [00:00&lt;00:00, 55362.53it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 3715/3715 [00:03&lt;00:00, 985.21it/s] \nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4326/4326 [00:00&lt;00:00, 71722.44it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3418/3418 [00:00&lt;00:00, 532407.29it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3391/3391 [00:00&lt;00:00, 55468.44it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 3391/3391 [00:00&lt;00:00, 5271.49it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4167/4167 [00:00&lt;00:00, 230655.17it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3357/3357 [00:00&lt;00:00, 947720.17it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3349/3349 [00:00&lt;00:00, 59628.66it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 3349/3349 [00:01&lt;00:00, 3085.00it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4077/4077 [00:00&lt;00:00, 277235.74it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3291/3291 [00:00&lt;00:00, 1072029.70it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3285/3285 [00:00&lt;00:00, 55230.46it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4064/4064 [00:00&lt;00:00, 1517597.17it/s]\nINFO:cityseer.tools.graphs:Snapping gapped endings.\n100%|██████████| 3285/3285 [00:00&lt;00:00, 16483.71it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4225/4225 [00:00&lt;00:00, 1510993.72it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3285/3285 [00:00&lt;00:00, 15411.61it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4886/4886 [00:00&lt;00:00, 469170.54it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\n100%|██████████| 3658/3658 [00:00&lt;00:00, 643437.37it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3092/3092 [00:00&lt;00:00, 32576.30it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 3464/3464 [00:00&lt;00:00, 1682384.10it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 2237/2237 [00:00&lt;00:00, 11791.13it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 3496/3496 [00:00&lt;00:00, 143108.11it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 2237/2237 [00:00&lt;00:00, 58454.56it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 2237/2237 [00:05&lt;00:00, 401.02it/s] \nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 2721/2721 [00:00&lt;00:00, 40823.94it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 2567/2567 [00:00&lt;00:00, 1930222.01it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 1718/1718 [00:00&lt;00:00, 12688.79it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 2572/2572 [00:00&lt;00:00, 351942.77it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 1718/1718 [00:00&lt;00:00, 53980.99it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 1718/1718 [00:03&lt;00:00, 560.17it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 2210/2210 [00:00&lt;00:00, 62422.38it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 1411/1411 [00:00&lt;00:00, 110839.48it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\n100%|██████████| 2057/2057 [00:00&lt;00:00, 124765.85it/s]\nINFO:cityseer.tools.graphs:Ironing edges.\n100%|██████████| 2042/2042 [00:00&lt;00:00, 22811.04it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\n100%|██████████| 2033/2033 [00:00&lt;00:00, 380857.57it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\n100%|██████████| 1319/1319 [00:00&lt;00:00, 997707.30it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 1306/1306 [00:00&lt;00:00, 274946.60it/s]\nINFO:cityseer.tools.plot:Preparing graph nodes\nINFO:cityseer.tools.plot:Preparing graph edges\n\n\nMultiGraph with 1276 nodes and 1990 edges\n\n\n100%|██████████| 1990/1990 [00:00&lt;00:00, 72305.56it/s]\n\n\n\n\n\n\n\n\n\n\n\nOption 2 - Automatic simplification with custom parameters\nosm_graph_from_poly accepts parameters which offer a certain amount of control over the simplification process. Altering the distances used for final_clean_distances will affect how aggressive the final round of network simplification is. The default is (5, 10). So, for example, adding 25 will make the simplification more aggressive.\nFootways and service roads intersecting green spaces are removed by default. This can be changed by setting green_footways and green_service_roads to True.\ncycleways is set to True by default because they sometimes provide important links within networks.\nThe below example uses more aggressive cleaning while not discarding green footways.\n\nG_params = io.osm_graph_from_poly(\n    poly_wgs,\n    simplify=True,\n    final_clean_distances=(5, 10, 25),  # adds 20\n    remove_disconnected=100,\n    cycleways=True,\n    busways=False,\n    green_footways=True,  # keeps\n    green_service_roads=False,\n)\nprint(G_params)\nplot.plot_nx(\n    G_params,\n    plot_geoms=True,\n    figsize=(10, 10),\n    x_lim=(698173, 699570),\n    y_lim=(5710085, 5711440),\n)\n\nWARNING:cityseer.tools.io:Merging node 12450391665 into 25544116 due to identical x, y coords.\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nINFO:cityseer.tools.graphs:Generating interpolated edge geometries.\n100%|██████████| 16721/16721 [00:00&lt;00:00, 52195.89it/s]\nINFO:cityseer.tools.io:Converting networkX graph to CRS code 32630.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\n100%|██████████| 15582/15582 [00:00&lt;00:00, 1139354.36it/s]\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\n100%|██████████| 16721/16721 [00:00&lt;00:00, 18822.05it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 15582/15582 [00:00&lt;00:00, 23681.68it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 8611/8611 [00:00&lt;00:00, 1582627.92it/s]\n100%|██████████| 8611/8611 [00:00&lt;00:00, 10645.73it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 7472/7472 [00:00&lt;00:00, 63628.38it/s]\n100%|██████████| 5224/5224 [00:00&lt;00:00, 323988.88it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 6457/6457 [00:00&lt;00:00, 1179762.19it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4999/4999 [00:00&lt;00:00, 1521355.80it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3924/3924 [00:00&lt;00:00, 274421.82it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4999/4999 [00:00&lt;00:00, 40789.92it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4965/4965 [00:00&lt;00:00, 1664778.91it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3924/3924 [00:00&lt;00:00, 35331.22it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 5013/5013 [00:00&lt;00:00, 272831.68it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 5005/5005 [00:00&lt;00:00, 1552928.80it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3924/3924 [00:00&lt;00:00, 146232.33it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 5006/5006 [00:00&lt;00:00, 486586.31it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 5006/5006 [00:00&lt;00:00, 1334308.96it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3924/3924 [00:00&lt;00:00, 90707.15it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 5007/5007 [00:00&lt;00:00, 444943.33it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3924/3924 [00:00&lt;00:00, 57815.69it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 3924/3924 [00:00&lt;00:00, 299179.25it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 5007/5007 [00:00&lt;00:00, 372712.88it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3924/3924 [00:00&lt;00:00, 269691.27it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3878/3878 [00:00&lt;00:00, 55101.65it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 3878/3878 [00:04&lt;00:00, 928.90it/s] \nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4583/4583 [00:00&lt;00:00, 72578.53it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3581/3581 [00:00&lt;00:00, 580587.65it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3554/3554 [00:00&lt;00:00, 57969.46it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 3554/3554 [00:00&lt;00:00, 5075.46it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4424/4424 [00:00&lt;00:00, 224684.88it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3520/3520 [00:00&lt;00:00, 985972.36it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3512/3512 [00:00&lt;00:00, 56913.23it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 3512/3512 [00:01&lt;00:00, 2860.79it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4334/4334 [00:00&lt;00:00, 287401.00it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3454/3454 [00:00&lt;00:00, 1035016.50it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3448/3448 [00:00&lt;00:00, 58432.87it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4321/4321 [00:00&lt;00:00, 1488957.24it/s]\nINFO:cityseer.tools.graphs:Snapping gapped endings.\n100%|██████████| 3448/3448 [00:00&lt;00:00, 17414.59it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4481/4481 [00:00&lt;00:00, 1837211.75it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3448/3448 [00:00&lt;00:00, 15792.22it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 5177/5177 [00:00&lt;00:00, 418500.76it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\n100%|██████████| 3841/3841 [00:00&lt;00:00, 678643.65it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3284/3284 [00:00&lt;00:00, 32642.90it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 3750/3750 [00:00&lt;00:00, 1502975.63it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 2415/2415 [00:00&lt;00:00, 11691.81it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 3784/3784 [00:00&lt;00:00, 147317.46it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 2415/2415 [00:00&lt;00:00, 57181.17it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 2415/2415 [00:06&lt;00:00, 362.26it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 2993/2993 [00:00&lt;00:00, 44035.96it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 2838/2838 [00:00&lt;00:00, 31884.74it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 1882/1882 [00:00&lt;00:00, 13374.45it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 2844/2844 [00:00&lt;00:00, 370453.43it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 1882/1882 [00:00&lt;00:00, 57295.66it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 1882/1882 [00:03&lt;00:00, 492.58it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 2466/2466 [00:00&lt;00:00, 61899.10it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 2399/2399 [00:00&lt;00:00, 1718554.28it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 1560/1560 [00:00&lt;00:00, 11690.48it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 2421/2421 [00:00&lt;00:00, 335450.10it/s]\nWARNING:cityseer.tools.graphs:Be cautious with large buffer distances when using crawl!\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 1560/1560 [00:00&lt;00:00, 52985.40it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 1560/1560 [00:03&lt;00:00, 486.45it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 1976/1976 [00:00&lt;00:00, 43839.96it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 1158/1158 [00:00&lt;00:00, 136505.55it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\n100%|██████████| 1846/1846 [00:00&lt;00:00, 73277.17it/s]\nINFO:cityseer.tools.graphs:Ironing edges.\n100%|██████████| 1818/1818 [00:00&lt;00:00, 22250.24it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\n100%|██████████| 1803/1803 [00:00&lt;00:00, 308477.67it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\n100%|██████████| 1102/1102 [00:00&lt;00:00, 729271.54it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 1097/1097 [00:00&lt;00:00, 306886.65it/s]\nINFO:cityseer.tools.plot:Preparing graph nodes\nINFO:cityseer.tools.plot:Preparing graph edges\n\n\nMultiGraph with 1076 nodes and 1778 edges\n\n\n100%|██████████| 1778/1778 [00:00&lt;00:00, 89553.43it/s]\n\n\n\n\n\n\n\n\n\n\n\nOption 3 - Custom OSM requests\nYou may want more control over the data request that is sent internally to the OSM Overpass API. This is possible by providing the custom_request argument. The Overpass API is useful for figuring out which tags you may want to include or exclude in your request.\nNote that the custom request must include a {geom_osm} placeholder, which will be replaced internally with the geometry of the area you are requesting data for.\n\nreq = \"\"\"\n    [out:json];\n    (way[\"highway\"]\n        [\"highway\"!~\"bus_guideway|busway|escape|raceway|proposed|planned|abandoned|platform|\n            emergency_bay|rest_area|disused|corridor|ladder|bus_stop|elevator|services\"]\n        [\"area\"!=\"yes\"]\n        [\"footway\"!=\"sidewalk\"]\n        [\"amenity\"!~\"charging_station|parking|fuel|motorcycle_parking|parking_entrance|parking_space\"]\n        [\"indoor\"!=\"yes\"]\n        [\"level\"!=\"-2\"]\n        [\"level\"!=\"-3\"]\n        [\"level\"!=\"-4\"]\n        [\"level\"!=\"-5\"](poly:\"{geom_osm}\");\n    );\n    out body;\n    &gt;;\n    out qt;\n\"\"\"\nG_req = io.osm_graph_from_poly(poly_wgs, simplify=True, custom_request=req)\nprint(G_req)\nplot.plot_nx(\n    G_req,\n    plot_geoms=True,\n    figsize=(10, 10),\n    x_lim=(698173, 699570),\n    y_lim=(5710085, 5711440),\n)\n\nWARNING:cityseer.tools.io:Merging node 12450391665 into 25544116 due to identical x, y coords.\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nINFO:cityseer.tools.graphs:Generating interpolated edge geometries.\n100%|██████████| 16721/16721 [00:00&lt;00:00, 41785.16it/s]\nINFO:cityseer.tools.io:Converting networkX graph to CRS code 32630.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\n100%|██████████| 15582/15582 [00:00&lt;00:00, 1165337.89it/s]\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\n100%|██████████| 16721/16721 [00:00&lt;00:00, 17050.36it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 15582/15582 [00:00&lt;00:00, 23632.83it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 8611/8611 [00:00&lt;00:00, 1371658.95it/s]\n100%|██████████| 8611/8611 [00:00&lt;00:00, 10914.57it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 7472/7472 [00:00&lt;00:00, 61267.10it/s]\n100%|██████████| 5224/5224 [00:00&lt;00:00, 304518.84it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 6457/6457 [00:00&lt;00:00, 897310.35it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4729/4729 [00:00&lt;00:00, 1257440.32it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3753/3753 [00:00&lt;00:00, 299975.66it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4729/4729 [00:00&lt;00:00, 173337.73it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4700/4700 [00:00&lt;00:00, 1644002.07it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3753/3753 [00:00&lt;00:00, 34201.83it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4748/4748 [00:00&lt;00:00, 293141.32it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4740/4740 [00:00&lt;00:00, 1563832.37it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3753/3753 [00:00&lt;00:00, 143692.47it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4741/4741 [00:00&lt;00:00, 46165.73it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4741/4741 [00:00&lt;00:00, 1085377.18it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3753/3753 [00:00&lt;00:00, 89775.94it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4742/4742 [00:00&lt;00:00, 493962.24it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3753/3753 [00:00&lt;00:00, 59320.93it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 3753/3753 [00:00&lt;00:00, 302343.71it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4742/4742 [00:00&lt;00:00, 436094.32it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3753/3753 [00:00&lt;00:00, 588061.23it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3715/3715 [00:00&lt;00:00, 55094.94it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 3715/3715 [00:04&lt;00:00, 875.38it/s] \nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4326/4326 [00:00&lt;00:00, 71453.56it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3418/3418 [00:00&lt;00:00, 533914.23it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3391/3391 [00:00&lt;00:00, 54557.99it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 3391/3391 [00:00&lt;00:00, 4624.76it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4167/4167 [00:00&lt;00:00, 223728.43it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3357/3357 [00:00&lt;00:00, 941635.69it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3349/3349 [00:00&lt;00:00, 54150.62it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 3349/3349 [00:01&lt;00:00, 2923.54it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4077/4077 [00:00&lt;00:00, 259881.12it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3291/3291 [00:00&lt;00:00, 981544.08it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3285/3285 [00:00&lt;00:00, 54005.61it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4064/4064 [00:00&lt;00:00, 1474154.76it/s]\nINFO:cityseer.tools.graphs:Snapping gapped endings.\n100%|██████████| 3285/3285 [00:00&lt;00:00, 16668.71it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4225/4225 [00:00&lt;00:00, 1216929.98it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3285/3285 [00:00&lt;00:00, 14650.91it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4886/4886 [00:00&lt;00:00, 418967.36it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\n100%|██████████| 3658/3658 [00:00&lt;00:00, 745771.84it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3092/3092 [00:00&lt;00:00, 32972.53it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 3464/3464 [00:00&lt;00:00, 1414985.30it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 2237/2237 [00:00&lt;00:00, 11441.75it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 3496/3496 [00:00&lt;00:00, 137708.01it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 2237/2237 [00:00&lt;00:00, 55918.05it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 2237/2237 [00:06&lt;00:00, 357.55it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 2721/2721 [00:00&lt;00:00, 39963.10it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 2567/2567 [00:00&lt;00:00, 1487946.15it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 1718/1718 [00:00&lt;00:00, 12582.95it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 2572/2572 [00:00&lt;00:00, 358814.23it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 1718/1718 [00:00&lt;00:00, 53992.72it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 1718/1718 [00:03&lt;00:00, 506.75it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 2210/2210 [00:00&lt;00:00, 61529.04it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 1411/1411 [00:00&lt;00:00, 112538.28it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\n100%|██████████| 2057/2057 [00:00&lt;00:00, 125340.43it/s]\nINFO:cityseer.tools.graphs:Ironing edges.\n100%|██████████| 2042/2042 [00:00&lt;00:00, 22462.32it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\n100%|██████████| 2033/2033 [00:00&lt;00:00, 382720.83it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\n100%|██████████| 1319/1319 [00:00&lt;00:00, 643064.86it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 1306/1306 [00:00&lt;00:00, 182027.75it/s]\nINFO:cityseer.tools.plot:Preparing graph nodes\nINFO:cityseer.tools.plot:Preparing graph edges\n\n\nMultiGraph with 1276 nodes and 1990 edges\n\n\n100%|██████████| 1990/1990 [00:00&lt;00:00, 72579.70it/s]\n\n\n\n\n\n\n\n\n\n\n\nOption 4 - Manual simplification\nIf you need full control over the simplification process, you can use the following as a template for further configuring your cleaning recipe. This offers a large degree of control, but he precise combination of tags and distances involves a degree of experimentation and some inevitable trade-offs for a given area of interest.\nFor this approach, start with an unsimplified network, which will perform only rudimentary preparation.\n\nG_raw = io.osm_graph_from_poly(poly_wgs, simplify=False)\nprint(G_raw)\nplot.plot_nx(\n    G_raw,\n    plot_geoms=True,\n    figsize=(10, 10),\n    x_lim=(698173, 699570),\n    y_lim=(5710085, 5711440),\n)\n\nWARNING:cityseer.tools.io:Merging node 12450391665 into 25544116 due to identical x, y coords.\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nINFO:cityseer.tools.graphs:Generating interpolated edge geometries.\n100%|██████████| 16721/16721 [00:00&lt;00:00, 52433.82it/s]\nINFO:cityseer.tools.io:Converting networkX graph to CRS code 32630.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\n100%|██████████| 15582/15582 [00:00&lt;00:00, 1059506.28it/s]\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\n100%|██████████| 16721/16721 [00:00&lt;00:00, 17653.83it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 15582/15582 [00:00&lt;00:00, 23599.05it/s]\nINFO:cityseer.tools.plot:Preparing graph nodes\nINFO:cityseer.tools.plot:Preparing graph edges\n\n\nMultiGraph with 7472 nodes and 8611 edges\n\n\n100%|██████████| 8611/8611 [00:00&lt;00:00, 27621.77it/s]\n\n\n\n\n\n\n\n\n\nThen manipulate the network depending on your needs. See the graphs module for further information what the various functions do.\n\nfrom cityseer import config\n\n# It is recommended to override validation during cleaning\n# This spares unnecessary repetition of validation checks\nconfig.SKIP_VALIDATION = True\n\n# deduplicate by hierarchy\nG = graphs.nx_deduplicate_edges(G_raw, dissolve_distance=20, max_ang_diff=20)\n# remove disconnected components\nG = graphs.nx_remove_dangling_nodes(G, despine=0, remove_disconnected=100)\n# clean by highway types - leave motorways alone\n# split only for a given type at a time\nfor dist, tags, max_angle in (\n    (28, [\"trunk\"], 45),\n    (24, [\"primary\"], 45),\n    (20, [\"secondary\"], 45),\n    (16, [\"tertiary\"], 45),\n):\n    G = graphs.nx_split_opposing_geoms(\n        G,\n        buffer_dist=dist,\n        squash_nodes=True,\n        centroid_by_itx=True,\n        osm_hwy_target_tags=tags,\n        osm_matched_tags_only=True,\n        prioritise_by_hwy_tag=True,\n        simplify_by_max_angle=max_angle,\n    )\n# consolidate\nfor dist, tags, max_angle in (\n    (28, [\"trunk\"], 95),\n    (24, [\"trunk\", \"primary\"], 95),\n    (20, [\"trunk\", \"primary\", \"secondary\"], 95),\n    (16, [\"trunk\", \"primary\", \"secondary\", \"tertiary\"], 95),\n):\n    G = graphs.nx_consolidate_nodes(\n        G,\n        buffer_dist=dist,\n        crawl=False,\n        centroid_by_itx=True,\n        osm_hwy_target_tags=tags,\n        osm_matched_tags_only=True,\n        prioritise_by_hwy_tag=True,\n        simplify_by_max_angle=max_angle,\n    )\n    G = graphs.nx_remove_filler_nodes(G)\n# snap gapped endings - don't clean danglers before this\nG = graphs.nx_snap_gapped_endings(\n    G,\n    osm_hwy_target_tags=[\n        \"residential\",\n        \"living_street\",\n        # \"service\", # intentionally omitted - e.g. parking lots\n        \"cycleway\",\n        \"bridleway\",\n        \"pedestrian\",\n        \"steps\",\n        \"footway\",\n        \"footway_green\",\n        \"footway_pedestrian\",  # plazas\n        \"path\",\n    ],\n    buffer_dist=20,\n)\n# snap gapped endings to roads - don't clean danglers before this\n# look for degree 1 dead-ends and link to nearby edges\nG = graphs.nx_split_opposing_geoms(\n    G,\n    buffer_dist=20,\n    osm_hwy_target_tags=[\n        # \"trunk\",  # intentionally omitted\n        \"primary\",\n        \"primary_link\",\n        \"secondary\",\n        \"secondary_link\",\n        \"tertiary\",\n        \"tertiary_link\",\n        \"residential\",\n        \"living_street\",\n        # \"service\", # intentionally omitted - e.g. parking lots\n        \"cycleway\",\n        \"bridleway\",\n        \"pedestrian\",\n        \"steps\",\n        \"footway\",\n        \"footway_green\",\n        \"footway_pedestrian\",  # plazas\n        \"path\",\n    ],\n    min_node_degree=1,\n    max_node_degree=1,\n    squash_nodes=False,\n)\n# remove danglers\nG = graphs.nx_remove_dangling_nodes(G, despine=40)\n# do smaller scale cleaning\nmax_angle = 120  # rue de nevers in Paris\nfor dist in (5, 10):\n    G = graphs.nx_split_opposing_geoms(\n        G,\n        buffer_dist=dist,\n        squash_nodes=True,\n        centroid_by_itx=True,\n        osm_hwy_target_tags=[\n            # \"trunk\",  # intentionally omitted\n            \"primary\",\n            \"primary_link\",\n            \"secondary\",\n            \"secondary_link\",\n            \"tertiary\",\n            \"tertiary_link\",\n            \"residential\",\n            \"living_street\",\n            \"service\",\n            \"cycleway\",\n            \"bridleway\",\n            \"pedestrian\",\n            # \"steps\",\n            \"footway\",\n            \"footway_pedestrian\",  # plazas\n            \"path\",\n            \"unclassified\",\n        ],\n        prioritise_by_hwy_tag=True,\n        simplify_by_max_angle=max_angle,\n    )\n    G = graphs.nx_consolidate_nodes(\n        G,\n        buffer_dist=dist,\n        crawl=True,\n        centroid_by_itx=True,\n        osm_hwy_target_tags=[\n            \"trunk\",\n            \"trunk_link\",\n            \"primary\",\n            \"primary_link\",\n            \"secondary\",\n            \"secondary_link\",\n            \"tertiary\",\n            \"tertiary_link\",\n            \"residential\",\n            \"living_street\",\n            \"service\",\n            \"cycleway\",\n            \"bridleway\",\n            \"pedestrian\",\n            \"steps\",\n            \"footway\",\n            \"footway_pedestrian\",  # plazas\n            \"path\",\n            \"unclassified\",\n        ],\n        prioritise_by_hwy_tag=True,\n        simplify_by_max_angle=max_angle,\n    )\nG = graphs.nx_remove_filler_nodes(G)\nG = graphs.nx_merge_parallel_edges(\n    G, merge_edges_by_midline=True, contains_buffer_dist=50\n)\nG = graphs.nx_iron_edges(G, min_self_loop_length=100, max_foot_tunnel_length=100)\n# do this last to clean up any orphaned sub components\nG = graphs.nx_remove_dangling_nodes(G, despine=25)\n\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 8611/8611 [00:00&lt;00:00, 38266.71it/s]\n100%|██████████| 8611/8611 [00:01&lt;00:00, 8508.57it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 7472/7472 [00:00&lt;00:00, 39386.01it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 6457/6457 [00:00&lt;00:00, 1331823.01it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 5020/5020 [00:00&lt;00:00, 1260727.27it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3940/3940 [00:00&lt;00:00, 274219.40it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 5020/5020 [00:00&lt;00:00, 160240.23it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4987/4987 [00:00&lt;00:00, 670287.57it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3940/3940 [00:00&lt;00:00, 14755.90it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 5035/5035 [00:00&lt;00:00, 274581.28it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 5027/5027 [00:00&lt;00:00, 1270013.63it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3940/3940 [00:00&lt;00:00, 135687.84it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 5028/5028 [00:00&lt;00:00, 380591.59it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 5028/5028 [00:00&lt;00:00, 1287560.93it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3940/3940 [00:00&lt;00:00, 90137.60it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 5029/5029 [00:00&lt;00:00, 429385.94it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3940/3940 [00:00&lt;00:00, 59391.90it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 3940/3940 [00:00&lt;00:00, 266056.35it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 5029/5029 [00:00&lt;00:00, 384602.78it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3940/3940 [00:00&lt;00:00, 473851.12it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3895/3895 [00:00&lt;00:00, 48015.84it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 3895/3895 [00:04&lt;00:00, 850.98it/s] \nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4606/4606 [00:00&lt;00:00, 75415.51it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3598/3598 [00:00&lt;00:00, 567249.50it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3571/3571 [00:00&lt;00:00, 60083.52it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 3571/3571 [00:00&lt;00:00, 5132.07it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4447/4447 [00:00&lt;00:00, 233793.81it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3537/3537 [00:00&lt;00:00, 945703.66it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3529/3529 [00:00&lt;00:00, 57151.62it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 3529/3529 [00:01&lt;00:00, 2769.40it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4357/4357 [00:00&lt;00:00, 276422.72it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3471/3471 [00:00&lt;00:00, 732131.21it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3465/3465 [00:00&lt;00:00, 57530.37it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4344/4344 [00:00&lt;00:00, 1353242.47it/s]\nINFO:cityseer.tools.graphs:Snapping gapped endings.\n100%|██████████| 3465/3465 [00:00&lt;00:00, 15664.98it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4504/4504 [00:00&lt;00:00, 1295067.20it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3465/3465 [00:00&lt;00:00, 14907.21it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 5199/5199 [00:00&lt;00:00, 402068.53it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\n100%|██████████| 3858/3858 [00:00&lt;00:00, 799092.58it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3296/3296 [00:00&lt;00:00, 33692.06it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 3765/3765 [00:00&lt;00:00, 1319812.33it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 2425/2425 [00:00&lt;00:00, 11565.25it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 3799/3799 [00:00&lt;00:00, 38760.19it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 2425/2425 [00:00&lt;00:00, 57226.05it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 2425/2425 [00:06&lt;00:00, 357.15it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 3001/3001 [00:00&lt;00:00, 46156.32it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 2847/2847 [00:00&lt;00:00, 1607590.67it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 1885/1885 [00:00&lt;00:00, 12694.73it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 2855/2855 [00:00&lt;00:00, 353028.83it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 1885/1885 [00:00&lt;00:00, 58585.74it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 1885/1885 [00:03&lt;00:00, 477.44it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 2444/2444 [00:00&lt;00:00, 64255.14it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 1540/1540 [00:00&lt;00:00, 125849.55it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\n100%|██████████| 2289/2289 [00:00&lt;00:00, 130276.98it/s]\nINFO:cityseer.tools.graphs:Ironing edges.\n100%|██████████| 2273/2273 [00:00&lt;00:00, 23793.33it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\n100%|██████████| 2265/2265 [00:00&lt;00:00, 361646.75it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\n100%|██████████| 1450/1450 [00:00&lt;00:00, 965969.00it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 1437/1437 [00:00&lt;00:00, 299251.02it/s]\n\n\n\nplot.plot_nx(\n    G,\n    plot_geoms=True,\n    figsize=(10, 10),\n    x_lim=(698173, 699570),\n    y_lim=(5710085, 5711440),\n)\n\nINFO:cityseer.tools.plot:Preparing graph nodes\nINFO:cityseer.tools.plot:Preparing graph edges\n100%|██████████| 2223/2223 [00:00&lt;00:00, 75885.81it/s]"
  },
  {
    "objectID": "recipes/networks/create_from_buffered_point.html",
    "href": "recipes/networks/create_from_buffered_point.html",
    "title": "OSM network from a buffered coordinate",
    "section": "",
    "text": "Use a buffered point to create a networkx graph from OSM.\nUse this approach when you have a centre-point, such as a longitude and latitude, and you wish to create a network within a certain radius distance.\n\nfrom cityseer.tools import io, plot\n\nDefine a longitude and latitude, and a buffer distance in meters.\n\nlng, lat = -0.13396079424572427, 51.51371088849723\nbuffer = 500\n\nA geometry can now be created using the buffered_point_poly function available from the cityseer package’s io module.\n\npoly_wgs, epsg_code = io.buffered_point_poly(lng, lat, buffer)\nprint(epsg_code)\npoly_wgs\n\n4326\n\n\n\n\n\n\n\n\n\nYou can then use this geometry to specify the boundaries to be used for creating a network using the osm_graph_from_poly function.\n\nG = io.osm_graph_from_poly(poly_wgs)\nprint(G)\nplot.plot_nx(G, plot_geoms=True)\n\nINFO:cityseer.tools.graphs:Generating interpolated edge geometries.\nINFO:cityseer.tools.io:Converting networkX graph to CRS code 32630.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Snapping gapped endings.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\nINFO:cityseer.tools.graphs:Ironing edges.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.plot:Preparing graph nodes\nINFO:cityseer.tools.plot:Preparing graph edges\n\n\nMultiGraph with 320 nodes and 487 edges\n\n\n\n\n\n\n\n\n\nSet the projected parameter to True if you would rather use the local UTM projection for the boundary.\n\npoly_utm, epsg_code = io.buffered_point_poly(lng, lat, buffer, projected=True)\nprint(epsg_code)\npoly_utm\n\n32630\n\n\n\n\n\n\n\n\n\nIn this case, remember to set the poly_crs parameter to the appropriate UTM CRS if using the resultant geometry as a parameter for the osm_graph_from_poly function.\n\nG_utm = io.osm_graph_from_poly(poly_utm, poly_crs_code=epsg_code)\nprint(G_utm)\nplot.plot_nx(G_utm, plot_geoms=True)\n\nINFO:cityseer.tools.graphs:Generating interpolated edge geometries.\nINFO:cityseer.tools.io:Converting networkX graph to CRS code 32630.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Snapping gapped endings.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\nINFO:cityseer.tools.graphs:Ironing edges.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.plot:Preparing graph nodes\nINFO:cityseer.tools.plot:Preparing graph edges\n\n\nMultiGraph with 320 nodes and 487 edges"
  },
  {
    "objectID": "recipes/networks/osmnx_to_cityseer.html",
    "href": "recipes/networks/osmnx_to_cityseer.html",
    "title": "Convert a network from osmnx",
    "section": "",
    "text": "Convert a network from osmnx to a cityseer compatible networkx graph.\n\nimport osmnx as ox\nfrom cityseer.tools import plot, io\n\nUse one of the available osmnx methods to create a networkx graph.\n\nlng, lat = -0.14115725966109327, 51.509220662095714\nbuff = 500\n\nmulti_di_graph = ox.graph_from_point((lat, lng), dist=buff, simplify=True)\nprint(multi_di_graph)\n\nMultiDiGraph with 1529 nodes and 4145 edges\n\n\nUse the nx_from_osm_nx function from the cityseer io module to convert the osmnx dataset to a cityseer compatible networkx graph.\n\nG = io.nx_from_osm_nx(multi_di_graph)\nprint(G)\nplot.plot_nx(G, plot_geoms=True)\n\nINFO:cityseer.tools.io:Converting OSMnx MultiDiGraph to cityseer MultiGraph.\nWARNING:cityseer.tools.util:The to_crs_code parameter 4326 is not a projected CRS\nINFO:cityseer.tools.plot:Preparing graph nodes\nINFO:cityseer.tools.plot:Preparing graph edges\n\n\nMultiGraph with 1529 nodes and 2332 edges"
  },
  {
    "objectID": "recipes/networks/save_to_file.html",
    "href": "recipes/networks/save_to_file.html",
    "title": "Saving a network to a file",
    "section": "",
    "text": "Save a cityseer prepared networkx graph to a file.\nTo save a graph or to visualise it from QGIS, convert it to a GeoDataFrame and save it using geopandas.\nFirst, let’s create a simple OSM graph from a bounding box, using the same approach as before.\n\nfrom shapely import geometry\n\nfrom cityseer.tools import io\n\npoly_wgs = geometry.box(\n    -0.14115725966109327,\n    51.509220662095714,\n    -0.12676440185383622,\n    51.51820111033659,\n)\nG = io.osm_graph_from_poly(poly_wgs)\nprint(G)\n\nWARNING:cityseer.tools.io:Merging node 12450391665 into 25544116 due to identical x, y coords.\nINFO:cityseer.tools.graphs:Generating interpolated edge geometries.\n100%|██████████| 4040/4040 [00:00&lt;00:00, 51675.10it/s]\nINFO:cityseer.tools.io:Converting networkX graph to CRS code 32630.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\n100%|██████████| 3735/3735 [00:00&lt;00:00, 1023836.71it/s]\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\n100%|██████████| 4040/4040 [00:00&lt;00:00, 18823.10it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3735/3735 [00:00&lt;00:00, 24011.87it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 2222/2222 [00:00&lt;00:00, 1494267.03it/s]\n100%|██████████| 2222/2222 [00:00&lt;00:00, 10737.09it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 1917/1917 [00:00&lt;00:00, 67329.43it/s]\n100%|██████████| 1427/1427 [00:00&lt;00:00, 328049.98it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 1687/1687 [00:00&lt;00:00, 1271480.84it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 1364/1364 [00:00&lt;00:00, 1726321.86it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 1090/1090 [00:00&lt;00:00, 302787.69it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 1364/1364 [00:00&lt;00:00, 301154.43it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 1362/1362 [00:00&lt;00:00, 1786875.84it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 1090/1090 [00:00&lt;00:00, 33829.79it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 1372/1372 [00:00&lt;00:00, 337354.03it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 1371/1371 [00:00&lt;00:00, 1830168.93it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 1090/1090 [00:00&lt;00:00, 115563.09it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 1372/1372 [00:00&lt;00:00, 507369.52it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 1372/1372 [00:00&lt;00:00, 1230664.05it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 1090/1090 [00:00&lt;00:00, 88210.84it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 1372/1372 [00:00&lt;00:00, 460698.51it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 1090/1090 [00:00&lt;00:00, 54305.19it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 1090/1090 [00:00&lt;00:00, 324401.57it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 1372/1372 [00:00&lt;00:00, 531355.96it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 1090/1090 [00:00&lt;00:00, 931687.66it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 1087/1087 [00:00&lt;00:00, 57506.95it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 1087/1087 [00:00&lt;00:00, 4431.35it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 1269/1269 [00:00&lt;00:00, 80188.20it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 1008/1008 [00:00&lt;00:00, 747367.59it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 1003/1003 [00:00&lt;00:00, 57710.01it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 1003/1003 [00:00&lt;00:00, 25783.97it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 1229/1229 [00:00&lt;00:00, 244083.51it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 992/992 [00:00&lt;00:00, 1064130.32it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 990/990 [00:00&lt;00:00, 55910.50it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 990/990 [00:00&lt;00:00, 8382.09it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 1201/1201 [00:00&lt;00:00, 281463.88it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 973/973 [00:00&lt;00:00, 1138052.93it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 972/972 [00:00&lt;00:00, 55574.90it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 1198/1198 [00:00&lt;00:00, 1657248.08it/s]\nINFO:cityseer.tools.graphs:Snapping gapped endings.\n100%|██████████| 972/972 [00:00&lt;00:00, 16148.17it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 1237/1237 [00:00&lt;00:00, 1212798.98it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 972/972 [00:00&lt;00:00, 15660.01it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 1416/1416 [00:00&lt;00:00, 462441.37it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\n100%|██████████| 1074/1074 [00:00&lt;00:00, 671739.11it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 889/889 [00:00&lt;00:00, 32969.95it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 984/984 [00:00&lt;00:00, 1828619.91it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 642/642 [00:00&lt;00:00, 11644.40it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 991/991 [00:00&lt;00:00, 157977.85it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 642/642 [00:00&lt;00:00, 57604.95it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 642/642 [00:00&lt;00:00, 1640.42it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 758/758 [00:00&lt;00:00, 42529.36it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 715/715 [00:00&lt;00:00, 1589256.68it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 487/487 [00:00&lt;00:00, 12877.48it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 715/715 [00:00&lt;00:00, 354357.48it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 487/487 [00:00&lt;00:00, 53568.65it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 487/487 [00:00&lt;00:00, 2046.42it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 638/638 [00:00&lt;00:00, 103187.67it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 413/413 [00:00&lt;00:00, 155735.64it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\n100%|██████████| 611/611 [00:00&lt;00:00, 92858.89it/s]\nINFO:cityseer.tools.graphs:Ironing edges.\n100%|██████████| 605/605 [00:00&lt;00:00, 21146.28it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\n100%|██████████| 605/605 [00:00&lt;00:00, 599044.83it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\n100%|██████████| 395/395 [00:00&lt;00:00, 908305.96it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 392/392 [00:00&lt;00:00, 256060.92it/s]\n\n\nMultiGraph with 384 nodes and 594 edges\n\n\nUse the geopandas_from_nx function to convert the networkx dataset into a geopandas LineString GeoDataFrame.\n\nstreets_gpd = io.geopandas_from_nx(G)\nstreets_gpd.head()\n\nINFO:cityseer.tools.io:Preparing node and edge arrays from networkX graph.\n\n\n\n\n\n\n\n\n\nnames\nroutes\nhighways\nlevels\nis_tunnel\nis_bridge\ngeom\nstart_nd_key\nend_nd_key\nedge_idx\n\n\n\n\n0\n[beak street]\n[]\n[unclassified]\n[0]\nFalse\nFalse\nLINESTRING (698573.946 5710658.889, 698597.952...\n108070\n25473512\n0\n\n\n1\n[beak street]\n[]\n[unclassified]\n[0]\nFalse\nFalse\nLINESTRING (698573.946 5710658.889, 698556.667...\n108070\n25473371\n0\n\n\n2\n[kingly court]\n[]\n[pedestrian, footway]\n[0]\nTrue\nFalse\nLINESTRING (698573.946 5710658.889, 698573.05 ...\n108070\n5568839679\n0\n\n\n3\n[upper john street]\n[]\n[unclassified]\n[0]\nFalse\nFalse\nLINESTRING (698573.946 5710658.889, 698575.964...\n108070\n25473286\n0\n\n\n4\n[great marlborough street]\n[]\n[tertiary]\n[0]\nFalse\nFalse\nLINESTRING (698482.48 5710892.514, 698538.717 ...\n9791491\n21665965\n0\n\n\n\n\n\n\n\nSince this is now a geopandas GeoDataFrame, you can use it accordingly.\n\nstreets_gpd.plot()\n\n\n\n\n\n\n\n\ngeopandas can now be used to save the file to disk, it can then be accessed and edited from an application such as QGIS.\n\nstreets_gpd.to_file(\n    \"temp/save_streets_demo.gpkg\",\n    driver=\"GPKG\",\n)\n\nINFO:pyogrio._io:Created 594 records"
  },
  {
    "objectID": "recipes/stats/osm_stats.html",
    "href": "recipes/stats/osm_stats.html",
    "title": "Statistics from OSM data",
    "section": "",
    "text": "Calculate building statistics from osmnx data.\n\nimport matplotlib.pyplot as plt\nimport momepy\nimport pandas as pd\nimport seaborn as sns\nfrom cityseer.metrics import layers\nfrom cityseer.tools import graphs, io\nfrom matplotlib import colors\nfrom osmnx import features\n\n/Users/gareth/dev/benchmark-urbanism/cityseer-examples/.venv/lib/python3.12/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html\n  from .autonotebook import tqdm as notebook_tqdm\n\n\nTo start, follow the same approach as shown in the network examples to create the network.\n\nlng, lat = -0.13396079424572427, 51.51371088849723\nbuffer = 1500\npoly_wgs, epsg_code = io.buffered_point_poly(lng, lat, buffer)\nG = io.osm_graph_from_poly(poly_wgs)\nG = graphs.nx_decompose(G, 50)\nG_dual = graphs.nx_to_dual(G)\nnodes_gdf, _edges_gdf, network_structure = io.network_structure_from_nx(G_dual)\n\nWARNING:cityseer.tools.io:Merging node 12450391665 into 25544116 due to identical x, y coords.\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nINFO:cityseer.tools.graphs:Generating interpolated edge geometries.\n100%|██████████| 24145/24145 [00:00&lt;00:00, 46421.16it/s]\nINFO:cityseer.tools.io:Converting networkX graph to CRS code 32630.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\n100%|██████████| 22421/22421 [00:00&lt;00:00, 1110224.90it/s]\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\n100%|██████████| 24145/24145 [00:01&lt;00:00, 16175.74it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 22421/22421 [00:00&lt;00:00, 22510.93it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 12164/12164 [00:00&lt;00:00, 1121603.80it/s]\n100%|██████████| 12164/12164 [00:01&lt;00:00, 9687.27it/s] \nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 10440/10440 [00:00&lt;00:00, 59741.81it/s]\n100%|██████████| 7388/7388 [00:00&lt;00:00, 316092.72it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 9003/9003 [00:00&lt;00:00, 739591.42it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 6656/6656 [00:00&lt;00:00, 1232823.47it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 5274/5274 [00:00&lt;00:00, 143576.96it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6665/6665 [00:00&lt;00:00, 143090.59it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 6616/6616 [00:00&lt;00:00, 1356546.50it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 5274/5274 [00:00&lt;00:00, 34780.63it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6672/6672 [00:00&lt;00:00, 60350.74it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 6662/6662 [00:00&lt;00:00, 1500185.40it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 5274/5274 [00:00&lt;00:00, 114766.37it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6663/6663 [00:00&lt;00:00, 401584.22it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 6663/6663 [00:00&lt;00:00, 1109346.12it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 5274/5274 [00:00&lt;00:00, 82581.44it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6664/6664 [00:00&lt;00:00, 436554.55it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 5274/5274 [00:00&lt;00:00, 50825.33it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 5274/5274 [00:00&lt;00:00, 7370.89it/s] \nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6612/6612 [00:00&lt;00:00, 229613.66it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 5234/5234 [00:00&lt;00:00, 396313.38it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 5162/5162 [00:00&lt;00:00, 52166.18it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 5162/5162 [00:07&lt;00:00, 732.22it/s] \nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6067/6067 [00:00&lt;00:00, 73367.03it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 4805/4805 [00:00&lt;00:00, 488572.87it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 4769/4769 [00:00&lt;00:00, 48548.79it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 4769/4769 [00:01&lt;00:00, 3130.02it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 5862/5862 [00:00&lt;00:00, 186883.93it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 4717/4717 [00:00&lt;00:00, 653321.40it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 4702/4702 [00:00&lt;00:00, 51671.50it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 4702/4702 [00:02&lt;00:00, 1965.22it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 5720/5720 [00:00&lt;00:00, 271669.65it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 4621/4621 [00:00&lt;00:00, 714987.41it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 4606/4606 [00:00&lt;00:00, 50758.30it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 5697/5697 [00:00&lt;00:00, 1619447.64it/s]\nINFO:cityseer.tools.graphs:Snapping gapped endings.\n100%|██████████| 4606/4606 [00:00&lt;00:00, 17154.05it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 5895/5895 [00:00&lt;00:00, 50307.17it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 4606/4606 [00:00&lt;00:00, 14788.51it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6783/6783 [00:00&lt;00:00, 350667.00it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\n100%|██████████| 5101/5101 [00:00&lt;00:00, 710448.11it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 4301/4301 [00:00&lt;00:00, 30221.51it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4821/4821 [00:00&lt;00:00, 1399359.14it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3140/3140 [00:00&lt;00:00, 10304.31it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4862/4862 [00:00&lt;00:00, 108884.21it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3140/3140 [00:00&lt;00:00, 45960.64it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 3140/3140 [00:11&lt;00:00, 271.78it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 3880/3880 [00:00&lt;00:00, 39217.24it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 3681/3681 [00:00&lt;00:00, 1665505.18it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 2475/2475 [00:00&lt;00:00, 11360.25it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 3691/3691 [00:00&lt;00:00, 361574.55it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 2475/2475 [00:00&lt;00:00, 18504.25it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 2475/2475 [00:07&lt;00:00, 348.21it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 3166/3166 [00:00&lt;00:00, 47492.42it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 2028/2028 [00:00&lt;00:00, 80215.47it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\n100%|██████████| 2929/2929 [00:00&lt;00:00, 125610.83it/s]\nINFO:cityseer.tools.graphs:Ironing edges.\n100%|██████████| 2911/2911 [00:00&lt;00:00, 19943.68it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\n100%|██████████| 2900/2900 [00:00&lt;00:00, 422621.92it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\n100%|██████████| 1887/1887 [00:00&lt;00:00, 630297.97it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 1869/1869 [00:00&lt;00:00, 274682.16it/s]\nINFO:cityseer.tools.graphs:Decomposing graph to maximum edge lengths of 50.\n100%|██████████| 2849/2849 [00:00&lt;00:00, 3419.86it/s]\nINFO:cityseer.tools.graphs:Converting graph to dual.\nINFO:cityseer.tools.graphs:Preparing dual nodes\n100%|██████████| 5001/5001 [00:00&lt;00:00, 38701.72it/s]\nINFO:cityseer.tools.graphs:Preparing dual edges (splitting and welding geoms)\n100%|██████████| 5001/5001 [00:06&lt;00:00, 795.13it/s] \nINFO:cityseer.tools.io:Preparing node and edge arrays from networkX graph.\n100%|██████████| 5001/5001 [00:00&lt;00:00, 53375.90it/s]\n100%|██████████| 5001/5001 [00:00&lt;00:00, 5193.63it/s]\nINFO:cityseer.graph:Edge R-tree built successfully with 8883 items.\n\n\nPrepare the buildings GeoDataFrame by downloading the data from OpenStreetMap. The osmnx features_from_polygon works well for this purpose. In this instance, we are specifically targeting features that are labelled as an building.\nIt is important to convert the derivative GeoDataFrame to the same CRS as the network.\n\ndata_gdf = features.features_from_polygon(poly_wgs, tags={\"building\": True})\ndata_gdf = data_gdf.to_crs(G.graph[\"crs\"])\ndata_gdf.tail()\n\n\n\n\n\n\n\n\n\ngeometry\naddr:city\naddr:postcode\naddr:street\nbrand\nbrand:wikidata\nbrand:wikipedia\nbuilding\nemail\nname\n...\nname:th\nname:tt\nname:ur\nname:vec\nname:vi\nname:war\nname:wuu\nname:yi\nname:yue\nbuilding:flats\n\n\nelement\nid\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nway\n1374498886\nPOLYGON ((699072.276 5711987.717, 699073.651 5...\nLondon\nWC1H 0PD\nGordon Square\nNaN\nNaN\nNaN\nkiosk\nNaN\nGarden Kiosk\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n1374681344\nPOLYGON ((700334.357 5710842.473, 700337.684 5...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\ncommercial\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n1374681345\nPOLYGON ((700347.126 5710850.783, 700337.684 5...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nyes\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n1374681346\nPOLYGON ((700335.868 5710827.778, 700339.655 5...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\ncommercial\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n1374820282\nPOLYGON ((699547.129 5710318.314, 699559.064 5...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nyes\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n\n\n5 rows × 554 columns\n\n\n\nSome preparatory data cleaning is typically necessary. This example extracts the particular rows and columns of interest for the subsequent steps of analysis.\n\nbldg_way = data_gdf.loc[\"way\"]\nbldg_way = bldg_way.reset_index(level=0, drop=True)\nbldg_way = bldg_way[[\"geometry\"]]\nbldg_way.head()\n\n\n\n\n\n\n\n\ngeometry\n\n\n\n\n0\nPOLYGON ((699578.37 5711981.881, 699573.237 57...\n\n\n1\nPOLYGON ((699509.329 5711958.943, 699502.917 5...\n\n\n2\nPOLYGON ((699771.225 5711711.453, 699763.808 5...\n\n\n3\nPOLYGON ((699408.814 5712013.541, 699453.773 5...\n\n\n4\nPOLYGON ((698517.969 5709739.367, 698517.359 5...\n\n\n\n\n\n\n\n\nbldg_rel = data_gdf.loc[\"relation\"]\nbldg_rel = bldg_rel.reset_index(level=0, drop=True)\nbldg_rel = bldg_rel[[\"geometry\"]]\nbldg_rel.head()\n\n\n\n\n\n\n\n\ngeometry\n\n\n\n\n0\nPOLYGON ((698284.165 5711770.625, 698310.212 5...\n\n\n1\nPOLYGON ((699365.964 5709570.204, 699366.296 5...\n\n\n2\nPOLYGON ((699421.233 5709690.565, 699431.714 5...\n\n\n3\nPOLYGON ((699578.614 5709619.103, 699586.076 5...\n\n\n4\nPOLYGON ((699708.798 5710453.42, 699717.241 57...\n\n\n\n\n\n\n\n\nbldgs_gpd = pd.concat([bldg_way, bldg_rel], axis=0)\nbldgs_gpd = bldgs_gpd.explode(ignore_index=True)\nbldgs_gpd = bldgs_gpd.reset_index(drop=True)\nbldgs_gpd.head()\n\n\n\n\n\n\n\n\ngeometry\n\n\n\n\n0\nPOLYGON ((699578.37 5711981.881, 699573.237 57...\n\n\n1\nPOLYGON ((699509.329 5711958.943, 699502.917 5...\n\n\n2\nPOLYGON ((699771.225 5711711.453, 699763.808 5...\n\n\n3\nPOLYGON ((699408.814 5712013.541, 699453.773 5...\n\n\n4\nPOLYGON ((698517.969 5709739.367, 698517.359 5...\n\n\n\n\n\n\n\n\nbldgs_gpd[\"area\"] = bldgs_gpd.geometry.area\nbldgs_gpd[\"perimeter\"] = bldgs_gpd.geometry.length\nbldgs_gpd[\"compactness\"] = momepy.circular_compactness(bldgs_gpd.geometry)\nbldgs_gpd[\"orientation\"] = momepy.orientation(bldgs_gpd.geometry)\nbldgs_gpd[\"shape_index\"] = momepy.shape_index(bldgs_gpd.geometry)\n\n\nbldgs_gpd.geometry.type.unique()\n\narray(['Polygon'], dtype=object)\n\n\nUse the layers.compute_stats method to compute statistics for numeric columns in the GeoDataFrame. These are specified with the stats_column_labels argument. These statistics are computed over the network using network distances. In the case of weighted variances, the contribution of any particular point is weighted by the distance from the point of measure.\n\ndistances = [100, 200]\nnodes_gdf, bldgs_gpd = layers.compute_stats(\n    bldgs_gpd,\n    stats_column_labels=[\n        \"area\",\n        \"perimeter\",\n        \"compactness\",\n        \"orientation\",\n        \"shape_index\",\n    ],\n    nodes_gdf=nodes_gdf,\n    network_structure=network_structure,\n    distances=distances,\n)\n\nINFO:cityseer.metrics.layers:Computing statistics.\nINFO:cityseer.metrics.layers:Assigning data to network.\nINFO:cityseer.data:Assigning 9768 data entries to network nodes (max_dist: 100).\nINFO:cityseer.data:Collected 89659 potential node assignments from data entries.\nINFO:cityseer.data:Finished assigning data. 89659 assignments added to 4853 nodes.\nINFO:cityseer.graph:Barriers unset and R-tree cleared.\n100%|██████████| 5001/5001 [00:01&lt;00:00, 4818.67it/s]\nINFO:cityseer.config:Metrics computed for:\nINFO:cityseer.config:Distance: 100m, Beta: 0.04, Walking Time: 1.25 minutes.\nINFO:cityseer.config:Distance: 200m, Beta: 0.02, Walking Time: 2.5 minutes.\n\n\nThis will generate a set of columns containing count, sum, min, max, mean, and var, in unweighted nw and weighted wt versions (where applicable) for each of the input distance thresholds.\n\nnodes_gdf.columns\n\nIndex(['ns_node_idx', 'x', 'y', 'live', 'weight', 'primal_edge',\n       'primal_edge_node_a', 'primal_edge_node_b', 'primal_edge_idx',\n       'dual_node',\n       ...\n       'cc_shape_index_sum_200_nw', 'cc_shape_index_sum_200_wt',\n       'cc_shape_index_mean_200_nw', 'cc_shape_index_mean_200_wt',\n       'cc_shape_index_count_200_nw', 'cc_shape_index_count_200_wt',\n       'cc_shape_index_var_200_nw', 'cc_shape_index_var_200_wt',\n       'cc_shape_index_max_200', 'cc_shape_index_min_200'],\n      dtype='object', length=110)\n\n\nThe result in columns can be explored with conventional Python ecosystem tools such as seaborn and matplotlib.\n\nsns.histplot(\n    data=nodes_gdf,\n    x=\"cc_area_mean_100_wt\",\n    bins=50,\n)\n\n\n\n\n\n\n\n\n\nfig, ax = plt.subplots(1, 1, figsize=(8, 8), facecolor=\"#1d1d1d\")\nnodes_gdf.plot(\n    column=\"cc_area_mean_100_wt\",\n    cmap=\"hot\",\n    legend=False,\n    vmin=0,\n    vmax=1000,\n    norm=colors.LogNorm(),  # Apply log normalization\n    ax=ax,\n)\nbldgs_gpd.plot(\n    column=\"area\",\n    cmap=\"hot\",\n    legend=False,\n    vmin=0,\n    vmax=1000,\n    alpha=0.5,\n    norm=colors.LogNorm(),  # Apply log normalization\n    ax=ax,\n)\nax.axis(False)\n\n(np.float64(697102.5282020274),\n np.float64(700585.1041845226),\n np.float64(5709114.861675241),\n np.float64(5712536.396237949))"
  },
  {
    "objectID": "recipes/live_nodes.html",
    "href": "recipes/live_nodes.html",
    "title": "Setting live or non-live nodes",
    "section": "",
    "text": "Set a note status to live=True or live=False based on whether it intersect the original boundary.\nThis is used for demarcating nodes that fall within the original unbuffered boundary when calculating measures. This allows for the original boundary to be delineated from the buffered surrounding extents, which is normally included for purposes of avoiding edge roll-off. The algorithms will continue to consider parts of the network where nodes are not live (therefore preventing edge roll-off), but will not compute metrics for these nodes (reducing unnecessary computation).\n\nimport matplotlib.pyplot as plt\nfrom cityseer.metrics import networks\nfrom cityseer.tools import graphs, io\nfrom shapely import geometry\n\nWhen using this approach it is best to work in a projector coordinate reference system. In this example we will cast the buffered point polygon to projected CRS by using the projected=True parameter.\n\nlng, lat = -0.13396079424572427, 51.51371088849723\nbuffer = 500\npoly_utm, epsg_code = io.buffered_point_poly(lng, lat, buffer, projected=True)\npoly_utm\n\n\n\n\n\n\n\n\nSince the Polygon is in a projected CRS, the buffering step can proceed with a distance defined in metres. Here the Polygon is buffered by 400m since this is the maximum distance considered for the centrality analysis in the next step.\n\npol_buff = poly_utm.buffer(400)\npol_buff\n\n\n\n\n\n\n\n\nThe buffer polygon can then be used as an argument for retrieving the OSM network. The poly_crs_code and to_crs_code parameters need to be set so that the function knows which CRS the input geometry is in, and which CRS to convert the network to.\n\nG = io.osm_graph_from_poly(pol_buff, poly_crs_code=epsg_code, to_crs_code=epsg_code)\n\nWARNING:cityseer.tools.io:Merging node 12450391665 into 25544116 due to identical x, y coords.\nINFO:cityseer.tools.graphs:Generating interpolated edge geometries.\n100%|██████████| 9574/9574 [00:00&lt;00:00, 53513.86it/s]\nINFO:cityseer.tools.io:Converting networkX graph to CRS code 32630.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\n100%|██████████| 8905/8905 [00:00&lt;00:00, 1094674.01it/s]\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\n100%|██████████| 9574/9574 [00:00&lt;00:00, 19250.07it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 8905/8905 [00:00&lt;00:00, 24650.31it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 5145/5145 [00:00&lt;00:00, 1659721.13it/s]\n100%|██████████| 5145/5145 [00:00&lt;00:00, 10442.56it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 4476/4476 [00:00&lt;00:00, 63468.42it/s]\n100%|██████████| 3094/3094 [00:00&lt;00:00, 334782.57it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 3871/3871 [00:00&lt;00:00, 1087703.54it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 2952/2952 [00:00&lt;00:00, 1751037.39it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 2348/2348 [00:00&lt;00:00, 308750.85it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 2952/2952 [00:00&lt;00:00, 177692.10it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 2937/2937 [00:00&lt;00:00, 1278666.27it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 2348/2348 [00:00&lt;00:00, 34263.76it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 2966/2966 [00:00&lt;00:00, 293375.76it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 2961/2961 [00:00&lt;00:00, 1754143.24it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 2348/2348 [00:00&lt;00:00, 135246.24it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 2962/2962 [00:00&lt;00:00, 475523.56it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 2962/2962 [00:00&lt;00:00, 1277220.98it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 2348/2348 [00:00&lt;00:00, 88577.52it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 2963/2963 [00:00&lt;00:00, 516208.63it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 2348/2348 [00:00&lt;00:00, 57349.15it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 2348/2348 [00:00&lt;00:00, 313857.66it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 2963/2963 [00:00&lt;00:00, 476998.65it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 2348/2348 [00:00&lt;00:00, 579171.12it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 2326/2326 [00:00&lt;00:00, 55185.40it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 2326/2326 [00:01&lt;00:00, 1468.02it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 2698/2698 [00:00&lt;00:00, 69898.16it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 2133/2133 [00:00&lt;00:00, 603429.81it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 2117/2117 [00:00&lt;00:00, 54698.65it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 2117/2117 [00:00&lt;00:00, 6290.36it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 2592/2592 [00:00&lt;00:00, 213156.79it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 2088/2088 [00:00&lt;00:00, 862828.25it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 2083/2083 [00:00&lt;00:00, 56612.21it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 2083/2083 [00:00&lt;00:00, 4523.22it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 2536/2536 [00:00&lt;00:00, 305434.46it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 2050/2050 [00:00&lt;00:00, 1089774.80it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 2048/2048 [00:00&lt;00:00, 56403.26it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 2530/2530 [00:00&lt;00:00, 1688667.91it/s]\nINFO:cityseer.tools.graphs:Snapping gapped endings.\n100%|██████████| 2048/2048 [00:00&lt;00:00, 18030.25it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 2626/2626 [00:00&lt;00:00, 1712679.57it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 2048/2048 [00:00&lt;00:00, 14949.47it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 3074/3074 [00:00&lt;00:00, 458525.93it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\n100%|██████████| 2301/2301 [00:00&lt;00:00, 655377.80it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 1956/1956 [00:00&lt;00:00, 34370.76it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 2197/2197 [00:00&lt;00:00, 1675738.48it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 1424/1424 [00:00&lt;00:00, 11760.50it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 2213/2213 [00:00&lt;00:00, 190349.13it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 1424/1424 [00:00&lt;00:00, 56733.08it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 1424/1424 [00:02&lt;00:00, 633.45it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 1725/1725 [00:00&lt;00:00, 43771.55it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 1629/1629 [00:00&lt;00:00, 1666875.14it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 1089/1089 [00:00&lt;00:00, 13079.31it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 1634/1634 [00:00&lt;00:00, 392975.50it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 1089/1089 [00:00&lt;00:00, 57539.46it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 1089/1089 [00:01&lt;00:00, 970.97it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 1418/1418 [00:00&lt;00:00, 75465.65it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 901/901 [00:00&lt;00:00, 160893.56it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\n100%|██████████| 1346/1346 [00:00&lt;00:00, 112845.21it/s]\nINFO:cityseer.tools.graphs:Ironing edges.\n100%|██████████| 1336/1336 [00:00&lt;00:00, 21940.19it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\n100%|██████████| 1332/1332 [00:00&lt;00:00, 399543.23it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\n100%|██████████| 861/861 [00:00&lt;00:00, 847324.20it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 856/856 [00:00&lt;00:00, 322667.77it/s]\n\n\nSince the network and the source geometry are in the same CRS, it is possible to demarcate each node as either live=True or live=False based on whether it intersects the original geometry.\nThis can be done by iterating through the nodes and checking if they intersect the original geometry. If they do, the node is set to live=True, otherwise it is set to live=False.\n\nfor node_idx, node_data in G.nodes(data=True):\n    node_pnt = geometry.Point(node_data[\"x\"], node_data[\"y\"])\n    if node_pnt.intersects(poly_utm):\n        G.nodes[node_idx][\"live\"] = True\n    else:\n        G.nodes[node_idx][\"live\"] = False\n\nMetrics can then be computed based on the target distance without encountering edge roll-off.\n\nG_dual = graphs.nx_to_dual(G)\nnodes_gdf, _edges_gdf, network_structure = io.network_structure_from_nx(\n    G_dual,\n)\ndistances = [400]\nnodes_gdf = networks.node_centrality_shortest(\n    network_structure=network_structure,\n    nodes_gdf=nodes_gdf,\n    distances=distances,\n)\nnodes_gdf.head()\n\nINFO:cityseer.tools.graphs:Converting graph to dual.\nINFO:cityseer.tools.graphs:Preparing dual nodes\n100%|██████████| 1314/1314 [00:00&lt;00:00, 36674.13it/s]\nINFO:cityseer.tools.graphs:Preparing dual edges (splitting and welding geoms)\n100%|██████████| 1314/1314 [00:01&lt;00:00, 751.64it/s]\nINFO:cityseer.tools.io:Preparing node and edge arrays from networkX graph.\n100%|██████████| 1314/1314 [00:00&lt;00:00, 12201.22it/s]\n100%|██████████| 1314/1314 [00:00&lt;00:00, 4381.52it/s]\nINFO:cityseer.metrics.networks:Computing shortest path node centrality.\n100%|██████████| 1314/1314 [00:01&lt;00:00, 1310.09it/s]\nINFO:cityseer.config:Metrics computed for:\nINFO:cityseer.config:Distance: 400m, Beta: 0.01, Walking Time: 5.0 minutes.\n\n\n\n\n\n\n\n\n\nns_node_idx\nx\ny\nlive\nweight\nprimal_edge\nprimal_edge_node_a\nprimal_edge_node_b\nprimal_edge_idx\ndual_node\ncc_beta_400\ncc_cycles_400\ncc_density_400\ncc_farness_400\ncc_harmonic_400\ncc_hillier_400\ncc_betweenness_400\ncc_betweenness_beta_400\n\n\n\n\n25257319_25257320_k0\n0\n698204.726812\n5.710187e+06\nFalse\n1\nLINESTRING (698235.492 5710213.589, 698232.233...\n25257320\n25257319\n0\nPOINT (698204.726812 5710187.371082)\n0.0\n0.0\n0.0\n0.0\n0.0\nNaN\n0.0\n0.0\n\n\n108252_25257054_k0\n1\n698153.709285\n5.710642e+06\nFalse\n1\nLINESTRING (698138.426 5710664.248, 698144.112...\n108252\n25257054\n0\nPOINT (698153.709285 5710641.538834)\n0.0\n0.0\n0.0\n0.0\n0.0\nNaN\n0.0\n0.0\n\n\n108252_452229727_k0\n2\n698123.239970\n5.710685e+06\nFalse\n1\nLINESTRING (698138.426 5710664.248, 698133.018...\n108252\n452229727\n0\nPOINT (698123.23997 5710685.118712)\n0.0\n0.0\n0.0\n0.0\n0.0\nNaN\n0.0\n0.0\n\n\n108252_12391|03078±57552|08253_k0\n3\n698120.890901\n5.710655e+06\nFalse\n1\nLINESTRING (698103.385 5710645.919, 698131.137...\n108252\n12391|03078±57552|08253\n0\nPOINT (698120.890901 5710655.116857)\n0.0\n0.0\n0.0\n0.0\n0.0\nNaN\n0.0\n0.0\n\n\n108252_10825|82720±25257|82720±12373|16592_k0\n4\n698183.290484\n5.710684e+06\nFalse\n1\nLINESTRING (698228.148 5710703.651, 698222.24 ...\n108252\n10825|82720±25257|82720±12373|16592\n0\nPOINT (698183.290484 5710683.927691)\n0.0\n0.0\n0.0\n0.0\n0.0\nNaN\n0.0\n0.0\n\n\n\n\n\n\n\nMeasures will only have been computed for live nodes.\n\nfig, ax = plt.subplots(1, 1, figsize=(8, 6), facecolor=\"#1d1d1d\")\nnodes_gdf.plot(\n    column=\"cc_harmonic_400\",\n    cmap=\"magma\",\n    legend=False,\n    ax=ax,\n)\nax.axis(False)\n\n(np.float64(697663.3353532758),\n np.float64(699986.2102806268),\n np.float64(5709670.722888798),\n np.float64(5711930.195587498))\n\n\n\n\n\n\n\n\n\nTo print or save only live nodes, filter the data frame accordingly.\n\nfig, ax = plt.subplots(1, 1, figsize=(8, 6), facecolor=\"#1d1d1d\")\nnodes_filtered = nodes_gdf[nodes_gdf.live]\nnodes_filtered.plot(\n    column=\"cc_harmonic_400\",\n    cmap=\"magma\",\n    legend=False,\n    ax=ax,\n)\nax.axis(False)\n\n(np.float64(698266.6364452019),\n np.float64(699469.3803111856),\n np.float64(5710222.983618274),\n np.float64(5711471.82779159))"
  },
  {
    "objectID": "recipes/centrality/index.html",
    "href": "recipes/centrality/index.html",
    "title": "Network Centrality",
    "section": "",
    "text": "Once you have created a cityseer compatible networkx graph and the derivative NetworkStructure, you can calculate a variety of centrality metrics.",
    "crumbs": [
      "Cityseer Recipes",
      "Network Centrality"
    ]
  },
  {
    "objectID": "recipes/centrality/index.html#metric-distance-network-centrality",
    "href": "recipes/centrality/index.html#metric-distance-network-centrality",
    "title": "Network Centrality",
    "section": "Metric distance network centrality",
    "text": "Metric distance network centrality\nCalculate metric distance centralities from a geopandas GeoDataFrame.\nNotebook",
    "crumbs": [
      "Cityseer Recipes",
      "Network Centrality"
    ]
  },
  {
    "objectID": "recipes/centrality/index.html#angular-distance-network-centrality",
    "href": "recipes/centrality/index.html#angular-distance-network-centrality",
    "title": "Network Centrality",
    "section": "Angular distance network centrality",
    "text": "Angular distance network centrality\nCalculate angular (geometric or “simplest”) distance centralities from a geopandas GeoDataFrame.\nNotebook",
    "crumbs": [
      "Cityseer Recipes",
      "Network Centrality"
    ]
  },
  {
    "objectID": "recipes/centrality/index.html#network-centrality-from-osm-data",
    "href": "recipes/centrality/index.html#network-centrality-from-osm-data",
    "title": "Network Centrality",
    "section": "Network centrality from OSM data",
    "text": "Network centrality from OSM data\nCalculate metric distance centralities for OSM data.\nNotebook",
    "crumbs": [
      "Cityseer Recipes",
      "Network Centrality"
    ]
  },
  {
    "objectID": "recipes/centrality/index.html#adding-gtfs-transport-data",
    "href": "recipes/centrality/index.html#adding-gtfs-transport-data",
    "title": "Network Centrality",
    "section": "Adding GTFS transport data",
    "text": "Adding GTFS transport data\n\nGTFS transport data support is still experimental.\n\nAdd GTFS transportation data to the network.\nNotebook",
    "crumbs": [
      "Cityseer Recipes",
      "Network Centrality"
    ]
  },
  {
    "objectID": "recipes/centrality/gpd_metric_centrality.html",
    "href": "recipes/centrality/gpd_metric_centrality.html",
    "title": "Metric distance network centrality",
    "section": "",
    "text": "Calculate metric distance centralities from a geopandas GeoDataFrame.\n\nimport geopandas as gpd\nimport matplotlib.pyplot as plt\nfrom cityseer.metrics import networks\nfrom cityseer.tools import graphs, io\n\nPrepare the network as shown in other examples. Working with the dual graph is recommended.\n\nstreets_gpd = gpd.read_file(\"data/madrid_streets/street_network.gpkg\")\nstreets_gpd = streets_gpd.explode(reset_index=True)\nG = io.nx_from_generic_geopandas(streets_gpd)\nG_dual = graphs.nx_to_dual(G)\n\n100%|██████████| 47155/47155 [00:08&lt;00:00, 5764.16it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\n100%|██████████| 47129/47129 [00:00&lt;00:00, 162081.41it/s]\nINFO:cityseer.tools.graphs:Converting graph to dual.\nINFO:cityseer.tools.graphs:Preparing dual nodes\n100%|██████████| 47129/47129 [00:01&lt;00:00, 39057.30it/s]\nINFO:cityseer.tools.graphs:Preparing dual edges (splitting and welding geoms)\n100%|██████████| 47129/47129 [02:17&lt;00:00, 343.36it/s]\n\n\nUse network_structure_from_nx from the cityseer package’s io module to prepare the GeoDataFrames and NetworkStructure.\n\n# prepare the data structures\nnodes_gdf, _edges_gdf, network_structure = io.network_structure_from_nx(\n    G_dual,\n)\n\nINFO:cityseer.tools.io:Preparing node and edge arrays from networkX graph.\n100%|██████████| 47129/47129 [00:01&lt;00:00, 30901.97it/s]\n100%|██████████| 47129/47129 [00:28&lt;00:00, 1630.40it/s]\nINFO:cityseer.graph:Edge R-tree built successfully with 104026 items.\n\n\nUse the node_centrality_shortest function from the cityseer package’s networks module to calculate shortest metric distance centralities. The function requires a NetworkStructure and nodes GeoDataFrame prepared with the network_structure_from_nx function in the previous step.\nThe function can calculate centralities for numerous distances at once via the distances parameter, which accepts a list of distances.\nThe function returns the nodes GeoDataFrame with the outputs of the centralities added as columns. The columns are named cc_{centrality}_{distance}. Standard geopandas functionality can be used to explore, visualise, or save the results. See the documentation for more information on the available centrality formulations.\n\ndistances = [500, 2000]\nnodes_gdf = networks.node_centrality_shortest(\n    network_structure=network_structure,\n    nodes_gdf=nodes_gdf,\n    distances=distances,\n)\nnodes_gdf.head()\n\nINFO:cityseer.metrics.networks:Computing shortest path node centrality.\n100%|██████████| 47129/47129 [00:10&lt;00:00, 4689.31it/s]\nINFO:cityseer.config:Metrics computed for:\nINFO:cityseer.config:Distance: 500m, Beta: 0.008, Walking Time: 6.25 minutes.\nINFO:cityseer.config:Distance: 2000m, Beta: 0.002, Walking Time: 25.0 minutes.\n\n\n\n\n\n\n\n\n\nns_node_idx\nx\ny\nlive\nweight\nprimal_edge\nprimal_edge_node_a\nprimal_edge_node_b\nprimal_edge_idx\ndual_node\n...\ncc_farness_500\ncc_farness_2000\ncc_harmonic_500\ncc_harmonic_2000\ncc_hillier_500\ncc_hillier_2000\ncc_betweenness_500\ncc_betweenness_2000\ncc_betweenness_beta_500\ncc_betweenness_beta_2000\n\n\n\n\nx454839.5-y4476885.3_x454855.9-y4476818.6_k0\n0\n454848.067543\n4.476852e+06\nTrue\n1\nLINESTRING (454855.9 4476818.6, 454849.1 44768...\nx454855.9-y4476818.6\nx454839.5-y4476885.3\n0\nPOINT (454848.067543 4476852.042507)\n...\n7418.207031\n163780.625000\n0.199088\n0.315512\n0.121323\n0.148589\n0.0\n0.0\n0.000000\n0.000000\n\n\nx454833.6-y4476910.5_x454839.5-y4476885.3_k0\n1\n454836.577015\n4.476898e+06\nTrue\n1\nLINESTRING (454839.5 4476885.3, 454838 4476891...\nx454839.5-y4476885.3\nx454833.6-y4476910.5\n0\nPOINT (454836.577015 4476897.9067)\n...\n10061.338867\n162550.625000\n0.294068\n0.401464\n0.143520\n0.155527\n127.0\n1032.0\n18.257139\n174.897049\n\n\nx454839.5-y4476885.3_x454877.1-y4476893.6_k0\n2\n454858.300000\n4.476889e+06\nTrue\n1\nLINESTRING (454839.5 4476885.3, 454877.1 44768...\nx454839.5-y4476885.3\nx454877.1-y4476893.6\n0\nPOINT (454858.3 4476889.45)\n...\n8638.165039\n167096.218750\n0.313121\n0.424865\n0.133825\n0.151296\n99.0\n753.0\n18.619455\n135.658371\n\n\nx454823.1-y4476952.1_x454833.6-y4476910.5_k0\n3\n454828.362585\n4.476931e+06\nTrue\n1\nLINESTRING (454833.6 4476910.5, 454830.4 44769...\nx454833.6-y4476910.5\nx454823.1-y4476952.1\n0\nPOINT (454828.362585 4476931.303206)\n...\n10452.838867\n161802.000000\n0.281164\n0.389349\n0.153068\n0.160202\n158.0\n1308.0\n17.099850\n212.337875\n\n\nx454758.1-y4476894.6_x454833.6-y4476910.5_k0\n4\n454795.845199\n4.476903e+06\nTrue\n1\nLINESTRING (454758.1 4476894.6, 454769.8 44768...\nx454833.6-y4476910.5\nx454758.1-y4476894.6\n0\nPOINT (454795.845199 4476902.571916)\n...\n9720.206055\n166860.140625\n0.197214\n0.307718\n0.126026\n0.151510\n0.0\n0.0\n0.000000\n0.000000\n\n\n\n\n5 rows × 26 columns\n\n\n\n\nnodes_gdf.columns\n\nIndex(['ns_node_idx', 'x', 'y', 'live', 'weight', 'primal_edge',\n       'primal_edge_node_a', 'primal_edge_node_b', 'primal_edge_idx',\n       'dual_node', 'cc_beta_500', 'cc_beta_2000', 'cc_cycles_500',\n       'cc_cycles_2000', 'cc_density_500', 'cc_density_2000', 'cc_farness_500',\n       'cc_farness_2000', 'cc_harmonic_500', 'cc_harmonic_2000',\n       'cc_hillier_500', 'cc_hillier_2000', 'cc_betweenness_500',\n       'cc_betweenness_2000', 'cc_betweenness_beta_500',\n       'cc_betweenness_beta_2000'],\n      dtype='object')\n\n\n\nnodes_gdf[\"cc_betweenness_2000\"].describe()\n\ncount     47129.000000\nmean       9697.500000\nstd       14681.911133\nmin           0.000000\n25%         701.000000\n50%        3823.000000\n75%       12501.000000\nmax      237420.000000\nName: cc_betweenness_2000, dtype: float64\n\n\n\nfig, ax = plt.subplots(1, 1, figsize=(8, 6), facecolor=\"#1d1d1d\")\nnodes_gdf.plot(\n    column=\"cc_harmonic_500\",\n    cmap=\"magma\",\n    legend=False,\n    ax=ax,\n)\nax.set_xlim(438500, 438500 + 3500)\nax.set_ylim(4472500, 4472500 + 3500)\nax.axis(False)\n\n(np.float64(438500.0),\n np.float64(442000.0),\n np.float64(4472500.0),\n np.float64(4476000.0))\n\n\n\n\n\n\n\n\n\n\nfig, ax = plt.subplots(1, 1, figsize=(8, 6), facecolor=\"#1d1d1d\")\nnodes_gdf.plot(\n    column=\"cc_betweenness_2000\",\n    cmap=\"magma\",\n    legend=False,\n    ax=ax,\n)\nax.set_xlim(438500, 438500 + 3500)\nax.set_ylim(4472500, 4472500 + 3500)\nax.axis(False)\n\n(np.float64(438500.0),\n np.float64(442000.0),\n np.float64(4472500.0),\n np.float64(4476000.0))\n\n\n\n\n\n\n\n\n\nAlternatively, you can define the distance thresholds using a list of minutes instead.\n\nnodes_gdf = networks.node_centrality_shortest(\n    network_structure=network_structure,\n    nodes_gdf=nodes_gdf,\n    minutes=[15],\n)\n\nINFO:cityseer.metrics.networks:Computing shortest path node centrality.\n100%|██████████| 47129/47129 [00:05&lt;00:00, 9381.59it/s] \nINFO:cityseer.config:Metrics computed for:\nINFO:cityseer.config:Distance: 1200m, Beta: 0.00333, Walking Time: 15.0 minutes.\n\n\nThe function will map the minutes values into the equivalent distances, which are reported in the logged output.\n\nnodes_gdf.columns\n\nIndex(['ns_node_idx', 'x', 'y', 'live', 'weight', 'primal_edge',\n       'primal_edge_node_a', 'primal_edge_node_b', 'primal_edge_idx',\n       'dual_node', 'cc_beta_500', 'cc_beta_2000', 'cc_cycles_500',\n       'cc_cycles_2000', 'cc_density_500', 'cc_density_2000', 'cc_farness_500',\n       'cc_farness_2000', 'cc_harmonic_500', 'cc_harmonic_2000',\n       'cc_hillier_500', 'cc_hillier_2000', 'cc_betweenness_500',\n       'cc_betweenness_2000', 'cc_betweenness_beta_500',\n       'cc_betweenness_beta_2000', 'cc_beta_1200', 'cc_cycles_1200',\n       'cc_density_1200', 'cc_farness_1200', 'cc_harmonic_1200',\n       'cc_hillier_1200', 'cc_betweenness_1200', 'cc_betweenness_beta_1200'],\n      dtype='object')\n\n\nAs per the function logging outputs, 15 minutes has been mapped to 1200m at default speed_m_s, so the corresponding outputs can be visualised using the 1200m columns. Use the configurable speed_m_s parameter to set a custom metres per second walking speed.\n\nfig, ax = plt.subplots(1, 1, figsize=(8, 6), facecolor=\"#1d1d1d\")\nnodes_gdf.plot(\n    column=\"cc_harmonic_1200\",\n    cmap=\"magma\",\n    legend=False,\n    ax=ax,\n)\nax.set_xlim(438500, 438500 + 3500)\nax.set_ylim(4472500, 4472500 + 3500)\nax.axis(False)\n\n(np.float64(438500.0),\n np.float64(442000.0),\n np.float64(4472500.0),\n np.float64(4476000.0))\n\n\n\n\n\n\n\n\n\nFor spatial-impedance weighted forms of centralities (beta variants), you can specify the beta parameter explicitly. These will otherwise be extrapolated automatically from the distances or minutes parameters. See the documentation for more information on how spatial impedances are converted to distance thresholds.\n\nnodes_gdf = networks.node_centrality_shortest(\n    network_structure=network_structure,\n    nodes_gdf=nodes_gdf,\n    betas=[0.01],\n)\n\nINFO:cityseer.metrics.networks:Computing shortest path node centrality.\n100%|██████████| 47129/47129 [00:03&lt;00:00, 15627.02it/s]\nINFO:cityseer.config:Metrics computed for:\nINFO:cityseer.config:Distance: 400m, Beta: 0.01, Walking Time: 5.0 minutes.\n\n\n\nnodes_gdf.columns\n\nIndex(['ns_node_idx', 'x', 'y', 'live', 'weight', 'primal_edge',\n       'primal_edge_node_a', 'primal_edge_node_b', 'primal_edge_idx',\n       'dual_node', 'cc_beta_500', 'cc_beta_2000', 'cc_cycles_500',\n       'cc_cycles_2000', 'cc_density_500', 'cc_density_2000', 'cc_farness_500',\n       'cc_farness_2000', 'cc_harmonic_500', 'cc_harmonic_2000',\n       'cc_hillier_500', 'cc_hillier_2000', 'cc_betweenness_500',\n       'cc_betweenness_2000', 'cc_betweenness_beta_500',\n       'cc_betweenness_beta_2000', 'cc_beta_1200', 'cc_cycles_1200',\n       'cc_density_1200', 'cc_farness_1200', 'cc_harmonic_1200',\n       'cc_hillier_1200', 'cc_betweenness_1200', 'cc_betweenness_beta_1200',\n       'cc_beta_400', 'cc_cycles_400', 'cc_density_400', 'cc_farness_400',\n       'cc_harmonic_400', 'cc_hillier_400', 'cc_betweenness_400',\n       'cc_betweenness_beta_400'],\n      dtype='object')\n\n\n\nfig, ax = plt.subplots(1, 1, figsize=(8, 6), facecolor=\"#1d1d1d\")\nnodes_gdf.plot(\n    column=\"cc_beta_400\",\n    cmap=\"magma\",\n    legend=False,\n    ax=ax,\n)\nax.set_xlim(438500, 438500 + 3500)\nax.set_ylim(4472500, 4472500 + 3500)\nax.axis(False)\n\n(np.float64(438500.0),\n np.float64(442000.0),\n np.float64(4472500.0),\n np.float64(4476000.0))"
  },
  {
    "objectID": "data/datasets.html",
    "href": "data/datasets.html",
    "title": "Datasets",
    "section": "",
    "text": "The datasets used from the recipes are provided for reproducibility per the following links. Please refer to the respective sources for the most up-to-date versions, and use the datasets in accordance with the source licenses (these should be open, but always check), and be sure to cite the original authors of the data.\nDataset preprocessing is done per the ua-dataset-madrid repository, which is intended to be a source for openly reproducible urban analytics data for reproducible papers, workflows, and tutorials.",
    "crumbs": [
      "Datasets"
    ]
  },
  {
    "objectID": "data/datasets.html#neighbourhoods",
    "href": "data/datasets.html#neighbourhoods",
    "title": "Datasets",
    "section": "Neighbourhoods",
    "text": "Neighbourhoods\nShapefile\nGeoPackage\nSource\nLicense\nOrigin of the data: Madrid City Council (or, where appropriate, administrative body, body or entity in question)\nDescription: Delimitation of the 131 neighborhoods of the municipality of Madrid. The names and codes of each neighborhood and the districts to which they belong are indicated. The initial delimitation corresponds to the territorial restructuring of 1987.",
    "crumbs": [
      "Datasets"
    ]
  },
  {
    "objectID": "data/datasets.html#blocks",
    "href": "data/datasets.html#blocks",
    "title": "Datasets",
    "section": "Blocks",
    "text": "Blocks\nGeoPackage\nSource\nLicense\nThe Copernicus land monitoring products and services are made available on a principle of full, open and free access, as established by the Commission Delegated Regulation (EU) No 1159/2013 of 12 July 2013. Free, full and open access to the products and services of the Copernicus Land Monitoring Service is made on the conditions that:\n\nWhen distributing or communicating Copernicus Land Monitoring Service products and services (data, software scripts, web services, user and methodological documentation and similar) to the public, users shall inform the public of the source of these products and services.\nWhere the Copernicus Land Monitoring Service products and services have been adapted or modified by the user, the user shall clearly state this.\nUsers shall make sure not to convey the impression to the public that the user’s activities are officially endorsed by the European Union.\n\nUrban Atlas Land Cover/Land Use 2018 (vector), Europe, 6-yearly. European Union’s Copernicus Land Monitoring Service information, https://land.copernicus.eu/en/products/urban-atlas/urban-atlas-2018. https://doi.org/10.2909/fb4dffa1-6ceb-4cc0-8372-1ed354c285e6 (Accessed on DD.MM.YYYY)",
    "crumbs": [
      "Datasets"
    ]
  },
  {
    "objectID": "data/datasets.html#premises",
    "href": "data/datasets.html#premises",
    "title": "Datasets",
    "section": "Premises",
    "text": "Premises\nGeoPackage\nCSV\nSource\nLicense\nOrigin of the data: Madrid City Council (or, where appropriate, administrative body, body or entity in question)\nDescription: Microdata file of the census of premises and activities of the Madrid City Council, classified according to their type of access (street door or grouped), situation (open, closed…) and indication of the economic activity exercised and the hospitality and restaurant terraces that appear registered in said census.\nPreprocessing performed per: https://github.com/songololo/ua-dataset-madrid.",
    "crumbs": [
      "Datasets"
    ]
  },
  {
    "objectID": "data/datasets.html#overture-maps-buildings",
    "href": "data/datasets.html#overture-maps-buildings",
    "title": "Datasets",
    "section": "Overture Maps Buildings",
    "text": "Overture Maps Buildings\nGeoPackage\nSource\nLicense\nLicense for theme: ODbL\n\n© OpenStreetMap contributors. Available under the Open Database License.\nEsri Community Maps contributors. Available under CC BY 4.0.\nGlobal ML Building Footprints. Licensed by Microsoft under the Open Database License.\nGoogle Open Buildings. Available under CC BY 4.0.\nUSGS 3D Elevation Program Digital Elevation Program.\nQian Shi, et al. A First High-quality Vector Data of Buildings in East Asian Countries Based on a Comprehensive Large-scale Mapping Framework. Zenodo, 22 July 2023, doi:10.5281/zenodo.8174931. Available under CC BY 4.0.",
    "crumbs": [
      "Datasets"
    ]
  },
  {
    "objectID": "data/datasets.html#overture-maps-infrastructure",
    "href": "data/datasets.html#overture-maps-infrastructure",
    "title": "Datasets",
    "section": "Overture Maps Infrastructure",
    "text": "Overture Maps Infrastructure\nGeoPackage\nSource\nLicense\nLicense for theme: ODbL\n\n© OpenStreetMap contributors. Available under the Open Database License.\nData from the Daylight Map Distribution\nESA WorldCover. Available under CC BY 4.0 DEED.\nData products from ETOPO1. Available under Open Data Commons Public Domain Dedication and License.\nData from GLOBathy. Available under CC0 1.0 (assumed).",
    "crumbs": [
      "Datasets"
    ]
  },
  {
    "objectID": "data/datasets.html#streets",
    "href": "data/datasets.html#streets",
    "title": "Datasets",
    "section": "Streets",
    "text": "Streets\nGeoPackage\nSource\nLicense\nOrigin of the data: Madrid City Council (or, where appropriate, administrative body, body or entity in question)\nDescription: Set of roads officially approved by the municipalities of the Community of Madrid, ordered by different characteristics.\nPreprocessing and manual cleaning performed per: https://github.com/songololo/ua-dataset-madrid.",
    "crumbs": [
      "Datasets"
    ]
  },
  {
    "objectID": "data/datasets.html#census",
    "href": "data/datasets.html#census",
    "title": "Datasets",
    "section": "Census",
    "text": "Census\nGeoPackage\nSource\nLicense\nCopyright European Union 2025 - The source needs to be indicated and when re-use involves modifications to the data or text, this must be stated clearly to the end user of the information. For further information refer to https://ec.europa.eu/eurostat/web/main/help/copyright-notice.\n\n\n\nCode\nDescription\n\n\n\n\nT\nTotal population\n\n\nM\nMale population\n\n\nF\nFemale population\n\n\nY_LT15\nAge under 15 years\n\n\nY_1564\nAge 15 to 64 years\n\n\nY_GE65\nAge 65+ years\n\n\nEMP\nEmployed persons\n\n\nNAT\nBorn in reporting country\n\n\nEU_OTH\nBorn in other EU Member State\n\n\nOTH\nBorn elsewhere\n\n\nSAME\nResidence unchanged in past year\n\n\nCHG_IN\nMoved within reporting country\n\n\nCHG_OUT\nMoved from outside reporting country",
    "crumbs": [
      "Datasets"
    ]
  },
  {
    "objectID": "data/datasets.html#gtfs---metro",
    "href": "data/datasets.html#gtfs---metro",
    "title": "Datasets",
    "section": "GTFS - Metro",
    "text": "GTFS - Metro\nStops\nStop Times\nSource\nLicense",
    "crumbs": [
      "Datasets"
    ]
  },
  {
    "objectID": "recipes/centrality/osm_centrality.html",
    "href": "recipes/centrality/osm_centrality.html",
    "title": "Network centrality from OSM data",
    "section": "",
    "text": "Calculate metric distance centralities for OSM data.\n\nimport matplotlib.pyplot as plt\nfrom cityseer.metrics import networks\nfrom cityseer.tools import graphs, io\n\nPrepare the network as shown in OSM examples. For example, from a relation id, bounding box, buffered point, or for extents defined from a loaded file. This example uses a buffered point.\nUsing a simplified representation is recommended, otherwise centrality measures will be distorted for “messier” portions of the network.\n\nlng, lat = -0.13396079424572427, 51.51371088849723\nbuffer = 1500\npoly_wgs, epsg_code = io.buffered_point_poly(lng, lat, buffer)\nG = io.osm_graph_from_poly(poly_wgs)\nG_dual = graphs.nx_to_dual(G)\n\nWARNING:cityseer.tools.io:Merging node 12450391665 into 25544116 due to identical x, y coords.\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nINFO:cityseer.tools.graphs:Generating interpolated edge geometries.\n100%|██████████| 24137/24137 [00:00&lt;00:00, 42248.21it/s]\nINFO:cityseer.tools.io:Converting networkX graph to CRS code 32630.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\n100%|██████████| 22415/22415 [00:00&lt;00:00, 1116677.64it/s]\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\n100%|██████████| 24137/24137 [00:01&lt;00:00, 15058.30it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 22415/22415 [00:01&lt;00:00, 20304.49it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 12164/12164 [00:00&lt;00:00, 1076451.89it/s]\n100%|██████████| 12164/12164 [00:02&lt;00:00, 4205.64it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 10442/10442 [00:00&lt;00:00, 44013.38it/s]\n100%|██████████| 7384/7384 [00:00&lt;00:00, 297189.77it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 9004/9004 [00:00&lt;00:00, 779844.16it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 6651/6651 [00:00&lt;00:00, 1258007.48it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 5270/5270 [00:00&lt;00:00, 137896.50it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6660/6660 [00:00&lt;00:00, 91379.17it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 6611/6611 [00:00&lt;00:00, 1235454.63it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 5270/5270 [00:00&lt;00:00, 29393.40it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6667/6667 [00:00&lt;00:00, 53217.65it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 6657/6657 [00:00&lt;00:00, 522355.75it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 5270/5270 [00:00&lt;00:00, 89632.06it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6658/6658 [00:00&lt;00:00, 279631.47it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 6658/6658 [00:00&lt;00:00, 1163375.94it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 5270/5270 [00:00&lt;00:00, 67735.27it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6659/6659 [00:00&lt;00:00, 334790.17it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 5270/5270 [00:00&lt;00:00, 43555.16it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 5270/5270 [00:01&lt;00:00, 2780.46it/s] \nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6607/6607 [00:00&lt;00:00, 92244.34it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 5230/5230 [00:00&lt;00:00, 166710.06it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 5158/5158 [00:00&lt;00:00, 34717.24it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 5158/5158 [00:11&lt;00:00, 461.95it/s] \nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6063/6063 [00:00&lt;00:00, 23147.66it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 4801/4801 [00:00&lt;00:00, 239487.81it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 4765/4765 [00:00&lt;00:00, 28290.67it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 4765/4765 [00:02&lt;00:00, 2074.42it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 5857/5857 [00:00&lt;00:00, 35478.93it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 4713/4713 [00:00&lt;00:00, 387451.09it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 4698/4698 [00:00&lt;00:00, 29599.87it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 4698/4698 [00:03&lt;00:00, 1253.05it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 5715/5715 [00:00&lt;00:00, 138535.08it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 4617/4617 [00:00&lt;00:00, 511816.83it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 4602/4602 [00:00&lt;00:00, 24681.27it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 5692/5692 [00:00&lt;00:00, 792444.60it/s]\nINFO:cityseer.tools.graphs:Snapping gapped endings.\n100%|██████████| 4602/4602 [00:00&lt;00:00, 10605.69it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 5889/5889 [00:00&lt;00:00, 869084.70it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 4602/4602 [00:01&lt;00:00, 3154.23it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6778/6778 [00:00&lt;00:00, 194063.83it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\n100%|██████████| 5098/5098 [00:00&lt;00:00, 652245.43it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 4297/4297 [00:00&lt;00:00, 15609.97it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4815/4815 [00:00&lt;00:00, 335118.38it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3136/3136 [00:00&lt;00:00, 5971.30it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4854/4854 [00:00&lt;00:00, 60084.68it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3136/3136 [00:00&lt;00:00, 26897.23it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 3136/3136 [00:25&lt;00:00, 124.37it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 3880/3880 [00:00&lt;00:00, 18582.73it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 3681/3681 [00:00&lt;00:00, 521120.36it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 2475/2475 [00:00&lt;00:00, 6081.84it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 3691/3691 [00:00&lt;00:00, 146179.84it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 2475/2475 [00:00&lt;00:00, 25622.18it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 2475/2475 [00:13&lt;00:00, 187.15it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 3169/3169 [00:00&lt;00:00, 18056.15it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 2030/2030 [00:00&lt;00:00, 51496.54it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\n100%|██████████| 2934/2934 [00:00&lt;00:00, 63295.43it/s]\nINFO:cityseer.tools.graphs:Ironing edges.\n100%|██████████| 2916/2916 [00:00&lt;00:00, 11141.51it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\n100%|██████████| 2905/2905 [00:00&lt;00:00, 170863.59it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\n100%|██████████| 1890/1890 [00:00&lt;00:00, 260507.22it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 1872/1872 [00:00&lt;00:00, 220047.56it/s]\nINFO:cityseer.tools.graphs:Converting graph to dual.\nINFO:cityseer.tools.graphs:Preparing dual nodes\n100%|██████████| 2854/2854 [00:00&lt;00:00, 17711.10it/s]\nINFO:cityseer.tools.graphs:Preparing dual edges (splitting and welding geoms)\n100%|██████████| 2854/2854 [00:09&lt;00:00, 314.31it/s]\n\n\nUse network_structure_from_nx from the cityseer package’s io module to prepare the GeoDataFrames and NetworkStructure.\n\n# prepare the data structures\nnodes_gdf, _edges_gdf, network_structure = io.network_structure_from_nx(\n    G_dual,\n)\n\nINFO:cityseer.tools.io:Preparing node and edge arrays from networkX graph.\n100%|██████████| 2854/2854 [00:00&lt;00:00, 26005.23it/s]\n100%|██████████| 2854/2854 [00:01&lt;00:00, 1848.27it/s]\nINFO:cityseer.graph:Edge R-tree built successfully with 6722 items.\n\n\nUse the node_centrality_shortest function from the cityseer package’s networks module to calculate shortest metric distance centralities.\n\nUse angular centralities with caution on automatically cleaned OSM networks, preferably only after visual inspection and manual cleaning.\n\n\ndistances = [500, 1000]\nnodes_gdf = networks.node_centrality_shortest(\n    network_structure=network_structure,\n    nodes_gdf=nodes_gdf,\n    distances=distances,\n)\nnodes_gdf.head()\n\nINFO:cityseer.metrics.networks:Computing shortest path node centrality.\n100%|██████████| 2854/2854 [00:01&lt;00:00, 2811.90it/s]\nINFO:cityseer.config:Metrics computed for:\nINFO:cityseer.config:Distance: 500m, Beta: 0.008, Walking Time: 6.25 minutes.\nINFO:cityseer.config:Distance: 1000m, Beta: 0.004, Walking Time: 12.5 minutes.\n\n\n\n\n\n\n\n\n\nns_node_idx\nx\ny\nlive\nweight\nprimal_edge\nprimal_edge_node_a\nprimal_edge_node_b\nprimal_edge_idx\ndual_node\n...\ncc_farness_500\ncc_farness_1000\ncc_harmonic_500\ncc_harmonic_1000\ncc_hillier_500\ncc_hillier_1000\ncc_betweenness_500\ncc_betweenness_1000\ncc_betweenness_beta_500\ncc_betweenness_beta_1000\n\n\n\n\n108285_108286_k0\n0\n698450.790070\n5.709384e+06\nTrue\n1\nLINESTRING (698442.587 5709352.756, 698457.019...\n108285\n108286\n0\nPOINT (698450.79007 5709383.911839)\n...\n5902.179688\n58297.644531\n0.205285\n0.283637\n0.142490\n0.145186\n0.0\n0.0\n0.000000\n0.000000\n\n\n108286_6226833739_k0\n1\n698445.179340\n5.709425e+06\nTrue\n1\nLINESTRING (698434.184 5709439.895, 698435.241...\n108286\n6226833739\n0\nPOINT (698445.17934 5709425.495934)\n...\n5099.849121\n59582.296875\n0.272599\n0.355433\n0.164907\n0.151471\n10.0\n10.0\n2.265440\n4.563673\n\n\n108286_1784656260±1270370717_k0\n2\n698462.371609\n5.709425e+06\nTrue\n1\nLINESTRING (698465.562 5709434.93, 698459.182 ...\n108286\n1784656260±1270370717\n0\nPOINT (698462.371609 5709424.972768)\n...\n5873.369141\n66387.937500\n0.310040\n0.401042\n0.163620\n0.162921\n32.0\n161.0\n8.085369\n20.560766\n\n\n1936005006_61089|05006±610896454_k0\n3\n698508.474675\n5.709425e+06\nTrue\n1\nLINESTRING (698494.235 5709445.995, 698518.821...\n1936005006\n61089|05006±610896454\n0\nPOINT (698508.474675 5709425.429823)\n...\n6557.249023\n66452.132812\n0.213808\n0.303199\n0.146555\n0.159649\n0.0\n0.0\n0.000000\n0.000000\n\n\n1784656176_6226833739_k0\n4\n698421.101261\n5.709460e+06\nTrue\n1\nLINESTRING (698434.184 5709439.895, 698432.763...\n6226833739\n1784656176\n0\nPOINT (698421.101261 5709459.670573)\n...\n5744.818359\n61325.531250\n0.265900\n0.349195\n0.167281\n0.156607\n63.0\n63.0\n14.625960\n29.263128\n\n\n\n\n5 rows × 26 columns\n\n\n\n\nnodes_gdf.columns\n\nIndex(['ns_node_idx', 'x', 'y', 'live', 'weight', 'primal_edge',\n       'primal_edge_node_a', 'primal_edge_node_b', 'primal_edge_idx',\n       'dual_node', 'cc_beta_500', 'cc_beta_1000', 'cc_cycles_500',\n       'cc_cycles_1000', 'cc_density_500', 'cc_density_1000', 'cc_farness_500',\n       'cc_farness_1000', 'cc_harmonic_500', 'cc_harmonic_1000',\n       'cc_hillier_500', 'cc_hillier_1000', 'cc_betweenness_500',\n       'cc_betweenness_1000', 'cc_betweenness_beta_500',\n       'cc_betweenness_beta_1000'],\n      dtype='object')\n\n\n\nnodes_gdf[\"cc_hillier_500\"].describe()\n\ncount    2854.000000\nmean        0.569778\nstd         0.214440\nmin         0.029012\n25%         0.424301\n50%         0.554167\n75%         0.716958\nmax         1.076013\nName: cc_hillier_500, dtype: float64\n\n\n\nfig, ax = plt.subplots(1, 1, figsize=(8, 6), facecolor=\"#1d1d1d\")\nnodes_gdf.plot(\n    column=\"cc_hillier_500\",\n    cmap=\"magma\",\n    legend=False,\n    ax=ax,\n)\nax.axis(False)\n\n(np.float64(697035.8123208123),\n np.float64(700647.6928482385),\n np.float64(5709134.052621752),\n np.float64(5712638.694212982))\n\n\n\n\n\n\n\n\n\n\nfig, ax = plt.subplots(1, 1, figsize=(8, 6), facecolor=\"#1d1d1d\")\nnodes_gdf.plot(\n    column=\"cc_betweenness_1000\",\n    cmap=\"magma\",\n    legend=False,\n    ax=ax,\n)\nax.axis(False)\n\n(np.float64(697035.8123208123),\n np.float64(700647.6928482385),\n np.float64(5709134.052621752),\n np.float64(5712638.694212982))"
  },
  {
    "objectID": "recipes/centrality/centrality_metro.html",
    "href": "recipes/centrality/centrality_metro.html",
    "title": "Calculate centralities",
    "section": "",
    "text": "import geopandas as gpd\nimport matplotlib.pyplot as plt\nfrom cityseer.metrics import networks\nfrom cityseer.tools import graphs, io\n\nstreets_gpd = gpd.read_file(\"data/madrid_streets/street_network.gpkg\")\nstreets_gpd = streets_gpd.explode(reset_index=True)\nG = io.nx_from_generic_geopandas(streets_gpd)\nG_dual = graphs.nx_to_dual(G)\n\n100%|██████████| 47155/47155 [00:07&lt;00:00, 6023.09it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\n100%|██████████| 47129/47129 [00:00&lt;00:00, 118331.57it/s]\nINFO:cityseer.tools.graphs:Converting graph to dual.\nINFO:cityseer.tools.graphs:Preparing dual nodes\n100%|██████████| 47129/47129 [00:01&lt;00:00, 36421.77it/s]\nINFO:cityseer.tools.graphs:Preparing dual edges (splitting and welding geoms)\n100%|██████████| 47129/47129 [01:31&lt;00:00, 512.39it/s]\n# prepare the data structures\nnodes_gdf, edges_gdf, network_structure = io.network_structure_from_nx(G_dual)\n\nINFO:cityseer.tools.io:Preparing node and edge arrays from networkX graph.\n100%|██████████| 47129/47129 [00:01&lt;00:00, 35443.57it/s]\n100%|██████████| 47129/47129 [00:15&lt;00:00, 3138.60it/s]\nINFO:cityseer.graph:Edge R-tree built successfully with 104026 items.\ndistances = [500, 2000, 5000]\nnodes_gdf = networks.node_centrality_shortest(\n    network_structure=network_structure,\n    nodes_gdf=nodes_gdf,\n    distances=distances,\n)\nfor col in nodes_gdf.columns:\n    if col.startswith(\"cc_\"):\n        nodes_gdf[f\"{col}_not\"] = nodes_gdf[col]\n\nINFO:cityseer.metrics.networks:Computing shortest path node centrality.\n100%|██████████| 47129/47129 [03:38&lt;00:00, 215.64it/s]\nINFO:cityseer.config:Metrics computed for:\nINFO:cityseer.config:Distance: 500m, Beta: 0.008, Walking Time: 6.25 minutes.\nINFO:cityseer.config:Distance: 2000m, Beta: 0.002, Walking Time: 25.0 minutes.\nINFO:cityseer.config:Distance: 5000m, Beta: 0.0008, Walking Time: 62.5 minutes.\nnetwork_structure, stops, avg_stop_pairs = io.add_transport_gtfs(\n    \"data/madrid_gtfs/madrid_metro\",\n    network_structure,\n    nodes_gdf.crs,\n)\n\nINFO:cityseer.tools.io:Loading GTFS data from data/madrid_gtfs/madrid_metro\nINFO:cityseer.tools.io:Loaded 1272 stops and 2360 stop times\nINFO:cityseer.tools.io:Adding GTFS stops to network nodes (with street linking logic).\n  0%|          | 0/1272 [00:00&lt;?, ?it/s]INFO:cityseer.graph:Linking transport node 47129 to street node 29983 with distance 43.50581422044226.\nINFO:cityseer.graph:Linking transport node 47129 to street node 29984 with distance 58.006310179264204.\nINFO:cityseer.graph:Added transport node 47129 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47130 to street node 29983 with distance 52.29819803214955.\nINFO:cityseer.graph:Linking transport node 47130 to street node 29984 with distance 51.24352361566982.\nINFO:cityseer.graph:Added transport node 47130 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47131 to street node 29982 with distance 12.063667674251363.\nINFO:cityseer.graph:Added transport node 47131 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47132 to street node 29983 with distance 10.398152604716593.\nINFO:cityseer.graph:Linking transport node 47132 to street node 29984 with distance 94.07024826615005.\nINFO:cityseer.graph:Added transport node 47132 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47133 to street node 29983 with distance 31.272876966321345.\nINFO:cityseer.graph:Linking transport node 47133 to street node 29984 with distance 67.83955732623913.\nINFO:cityseer.graph:Added transport node 47133 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47134 to street node 29983 with distance 42.227374450082095.\nINFO:cityseer.graph:Linking transport node 47134 to street node 29984 with distance 78.45488628611734.\nINFO:cityseer.graph:Added transport node 47134 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47135 to street node 27243 with distance 33.049001546134285.\nINFO:cityseer.graph:Linking transport node 47135 to street node 30146 with distance 44.26750961481578.\nINFO:cityseer.graph:Added transport node 47135 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47136 to street node 29982 with distance 23.108216056120142.\nINFO:cityseer.graph:Added transport node 47136 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47137 to street node 27243 with distance 22.000480434564405.\nINFO:cityseer.graph:Linking transport node 47137 to street node 30146 with distance 55.197995491883546.\nINFO:cityseer.graph:Added transport node 47137 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47138 to street node 3752 with distance 24.187015784898588.\nINFO:cityseer.graph:Added transport node 47138 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47139 to street node 3749 with distance 36.36258096273867.\nINFO:cityseer.graph:Linking transport node 47139 to street node 3752 with distance 22.954919369578125.\nINFO:cityseer.graph:Added transport node 47139 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47140 to street node 3752 with distance 20.12418282375338.\nINFO:cityseer.graph:Added transport node 47140 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47141 to street node 25769 with distance 12.13019778080751.\nINFO:cityseer.graph:Linking transport node 47141 to street node 25770 with distance 32.13034348627443.\nINFO:cityseer.graph:Added transport node 47141 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47142 to street node 38025 with distance 15.985267865761232.\nINFO:cityseer.graph:Linking transport node 47142 to street node 38026 with distance 15.21801207531466.\nINFO:cityseer.graph:Added transport node 47142 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47143 to street node 37335 with distance 24.297767603758242.\nINFO:cityseer.graph:Added transport node 47143 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47144 to street node 31896 with distance 76.27300912458877.\nINFO:cityseer.graph:Linking transport node 47144 to street node 37335 with distance 12.822221179096077.\nINFO:cityseer.graph:Added transport node 47144 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47145 to street node 38025 with distance 21.233605609655783.\nINFO:cityseer.graph:Linking transport node 47145 to street node 38026 with distance 18.01381269668359.\nINFO:cityseer.graph:Added transport node 47145 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47146 to street node 38026 with distance 17.355593164205697.\nINFO:cityseer.graph:Linking transport node 47146 to street node 38027 with distance 59.340815516263504.\nINFO:cityseer.graph:Added transport node 47146 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47147 to street node 23677 with distance 37.32392612492573.\nINFO:cityseer.graph:Added transport node 47147 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47148 to street node 23677 with distance 17.964885396422588.\nINFO:cityseer.graph:Linking transport node 47148 to street node 27746 with distance 42.097196519179064.\nINFO:cityseer.graph:Added transport node 47148 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47149 to street node 23677 with distance 15.267178921949867.\nINFO:cityseer.graph:Added transport node 47149 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47150 to street node 29561 with distance 28.982618567824787.\nINFO:cityseer.graph:Linking transport node 47150 to street node 29564 with distance 18.79475781478459.\nINFO:cityseer.graph:Added transport node 47150 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47151 to street node 27746 with distance 46.07339937844732.\nINFO:cityseer.graph:Added transport node 47151 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47152 to street node 29319 with distance 60.29410532171374.\nINFO:cityseer.graph:Linking transport node 47152 to street node 29320 with distance 3.6831819767506686.\nINFO:cityseer.graph:Added transport node 47152 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47153 to street node 31791 with distance 7.598875316679322.\nINFO:cityseer.graph:Linking transport node 47153 to street node 31792 with distance 27.26689647348525.\nINFO:cityseer.graph:Added transport node 47153 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47154 to street node 41822 with distance 18.708852139689757.\nINFO:cityseer.graph:Added transport node 47154 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47155 to street node 32304 with distance 24.347433587358385.\nINFO:cityseer.graph:Linking transport node 47155 to street node 37686 with distance 33.76162638626166.\nINFO:cityseer.graph:Added transport node 47155 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47156 to street node 31193 with distance 20.742159468009653.\nINFO:cityseer.graph:Added transport node 47156 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47157 to street node 30065 with distance 94.60589719768484.\nINFO:cityseer.graph:Linking transport node 47157 to street node 37687 with distance 0.6202998974589182.\nINFO:cityseer.graph:Added transport node 47157 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47158 to street node 29749 with distance 3.2457091016516886.\nINFO:cityseer.graph:Linking transport node 47158 to street node 29750 with distance 14.470161325696058.\nINFO:cityseer.graph:Added transport node 47158 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47159 to street node 22581 with distance 41.43393638614837.\nINFO:cityseer.graph:Linking transport node 47159 to street node 22582 with distance 27.015607516154166.\nINFO:cityseer.graph:Added transport node 47159 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47160 to street node 29750 with distance 4.635791122437556.\nINFO:cityseer.graph:Linking transport node 47160 to street node 29751 with distance 29.361868239244696.\nINFO:cityseer.graph:Added transport node 47160 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47161 to street node 30074 with distance 35.77640631591063.\nINFO:cityseer.graph:Added transport node 47161 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47162 to street node 30074 with distance 35.44532479339583.\nINFO:cityseer.graph:Linking transport node 47162 to street node 30077 with distance 18.986243159643962.\nINFO:cityseer.graph:Added transport node 47162 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47163 to street node 36089 with distance 50.57846741770585.\nINFO:cityseer.graph:Linking transport node 47163 to street node 36090 with distance 10.198493982495377.\nINFO:cityseer.graph:Added transport node 47163 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47164 to street node 30089 with distance 17.44268777685824.\nINFO:cityseer.graph:Linking transport node 47164 to street node 36090 with distance 22.27221079605657.\nINFO:cityseer.graph:Added transport node 47164 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47165 to street node 31767 with distance 32.20953132094391.\nINFO:cityseer.graph:Added transport node 47165 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47166 to street node 24206 with distance 285.04631557634355.\nINFO:cityseer.graph:Linking transport node 47166 to street node 24207 with distance 135.46305946179933.\nINFO:cityseer.graph:Added transport node 47166 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47167 to street node 15134 with distance 98.78192387982412.\nINFO:cityseer.graph:Linking transport node 47167 to street node 24209 with distance 21.45465184272884.\nINFO:cityseer.graph:Added transport node 47167 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47168 to street node 24208 with distance 13.5620139580303.\nINFO:cityseer.graph:Linking transport node 47168 to street node 42616 with distance 39.97504524877097.\nINFO:cityseer.graph:Added transport node 47168 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47169 to street node 15134 with distance 102.07001170246653.\nINFO:cityseer.graph:Linking transport node 47169 to street node 24209 with distance 37.77982093214554.\nINFO:cityseer.graph:Added transport node 47169 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47170 to street node 31537 with distance 32.652185793285796.\nINFO:cityseer.graph:Linking transport node 47170 to street node 31538 with distance 45.84345888892275.\nINFO:cityseer.graph:Added transport node 47170 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47171 to street node 31538 with distance 36.20955950464758.\nINFO:cityseer.graph:Added transport node 47171 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47172 to street node 31537 with distance 39.338223258970224.\nINFO:cityseer.graph:Linking transport node 47172 to street node 31538 with distance 36.1168908225056.\nINFO:cityseer.graph:Added transport node 47172 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47173 to street node 28651 with distance 6.091119276545711.\nINFO:cityseer.graph:Added transport node 47173 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47174 to street node 7926 with distance 27.676856200817813.\nINFO:cityseer.graph:Added transport node 47174 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47175 to street node 30024 with distance 21.198551565517242.\nINFO:cityseer.graph:Added transport node 47175 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47176 to street node 30024 with distance 43.675656892631174.\nINFO:cityseer.graph:Added transport node 47176 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47177 to street node 30024 with distance 31.56927987435387.\nINFO:cityseer.graph:Added transport node 47177 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47178 to street node 28566 with distance 46.045101128881484.\nINFO:cityseer.graph:Linking transport node 47178 to street node 28567 with distance 34.27844139853283.\nINFO:cityseer.graph:Added transport node 47178 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47179 to street node 23609 with distance 31.122410761823666.\nINFO:cityseer.graph:Added transport node 47179 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47180 to street node 23611 with distance 8.49570774901099.\nINFO:cityseer.graph:Linking transport node 47180 to street node 23613 with distance 50.84702269401273.\nINFO:cityseer.graph:Added transport node 47180 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47181 to street node 23611 with distance 8.143968533491941.\nINFO:cityseer.graph:Added transport node 47181 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47182 to street node 23610 with distance 22.456489721915606.\nINFO:cityseer.graph:Linking transport node 47182 to street node 36117 with distance 63.79487532994934.\nINFO:cityseer.graph:Added transport node 47182 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47183 to street node 27228 with distance 25.017758251999837.\nINFO:cityseer.graph:Added transport node 47183 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47184 to street node 27223 with distance 39.43805897926115.\nINFO:cityseer.graph:Linking transport node 47184 to street node 27225 with distance 11.007324940791548.\nINFO:cityseer.graph:Added transport node 47184 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47185 to street node 27235 with distance 32.99697938383849.\nINFO:cityseer.graph:Added transport node 47185 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47186 to street node 23634 with distance 49.366493605049044.\nINFO:cityseer.graph:Added transport node 47186 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47187 to street node 23620 with distance 11.524036215635798.\nINFO:cityseer.graph:Linking transport node 47187 to street node 23622 with distance 11.970916149938747.\nINFO:cityseer.graph:Added transport node 47187 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47188 to street node 23623 with distance 43.907744222505684.\nINFO:cityseer.graph:Added transport node 47188 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47189 to street node 23635 with distance 26.424518085662733.\nINFO:cityseer.graph:Added transport node 47189 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47190 to street node 23633 with distance 35.78587169136741.\nINFO:cityseer.graph:Linking transport node 47190 to street node 23635 with distance 25.402959460371264.\nINFO:cityseer.graph:Added transport node 47190 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47191 to street node 23655 with distance 48.23933863562338.\nINFO:cityseer.graph:Added transport node 47191 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47192 to street node 23652 with distance 53.879498164050766.\nINFO:cityseer.graph:Linking transport node 47192 to street node 23656 with distance 22.61883290386504.\nINFO:cityseer.graph:Added transport node 47192 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47193 to street node 23657 with distance 27.36227777499999.\nINFO:cityseer.graph:Added transport node 47193 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47194 to street node 23652 with distance 39.34057897502929.\nINFO:cityseer.graph:Linking transport node 47194 to street node 23653 with distance 37.544850449640435.\nINFO:cityseer.graph:Added transport node 47194 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47195 to street node 23652 with distance 40.02907693887695.\nINFO:cityseer.graph:Added transport node 47195 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47196 to street node 23655 with distance 38.236501197832744.\nINFO:cityseer.graph:Linking transport node 47196 to street node 23658 with distance 47.29234582637727.\nINFO:cityseer.graph:Added transport node 47196 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47197 to street node 23655 with distance 37.78189390111141.\nINFO:cityseer.graph:Added transport node 47197 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47198 to street node 23601 with distance 10.225637317708655.\nINFO:cityseer.graph:Linking transport node 47198 to street node 23602 with distance 14.67372828612696.\nINFO:cityseer.graph:Added transport node 47198 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47199 to street node 23602 with distance 15.120190469021397.\nINFO:cityseer.graph:Linking transport node 47199 to street node 23603 with distance 15.187482641341868.\nINFO:cityseer.graph:Added transport node 47199 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47200 to street node 22851 with distance 15.647547808490723.\nINFO:cityseer.graph:Linking transport node 47200 to street node 23599 with distance 21.823380224680925.\nINFO:cityseer.graph:Added transport node 47200 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47201 to street node 39880 with distance 55.20757376665466.\nINFO:cityseer.graph:Added transport node 47201 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47202 to street node 39883 with distance 46.526494896807485.\nINFO:cityseer.graph:Added transport node 47202 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47203 to street node 23591 with distance 24.91219809024804.\nINFO:cityseer.graph:Linking transport node 47203 to street node 23594 with distance 54.505888800961564.\nINFO:cityseer.graph:Added transport node 47203 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47204 to street node 39880 with distance 77.61189056505607.\nINFO:cityseer.graph:Added transport node 47204 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47205 to street node 45628 with distance 32.29544489924381.\nINFO:cityseer.graph:Added transport node 47205 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47206 to street node 10171 with distance 81.69189991783047.\nINFO:cityseer.graph:Linking transport node 47206 to street node 10175 with distance 21.795802292653466.\nINFO:cityseer.graph:Added transport node 47206 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47207 to street node 15321 with distance 13.07230481623885.\nINFO:cityseer.graph:Added transport node 47207 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47208 to street node 15321 with distance 20.736520446911694.\nINFO:cityseer.graph:Linking transport node 47208 to street node 23563 with distance 22.464725879940424.\nINFO:cityseer.graph:Added transport node 47208 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47209 to street node 23563 with distance 21.921283471041523.\nINFO:cityseer.graph:Added transport node 47209 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47210 to street node 25249 with distance 32.44478394836978.\nINFO:cityseer.graph:Linking transport node 47210 to street node 44308 with distance 23.67522066441594.\nINFO:cityseer.graph:Added transport node 47210 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47211 to street node 25250 with distance 58.03619435796413.\nINFO:cityseer.graph:Linking transport node 47211 to street node 32636 with distance 14.281026946291622.\nINFO:cityseer.graph:Added transport node 47211 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47212 to street node 25249 with distance 17.193142406942464.\nINFO:cityseer.graph:Linking transport node 47212 to street node 44308 with distance 40.45843154497836.\nINFO:cityseer.graph:Added transport node 47212 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47213 to street node 25249 with distance 42.13458844783383.\nINFO:cityseer.graph:Linking transport node 47213 to street node 44308 with distance 14.863299164916604.\nINFO:cityseer.graph:Added transport node 47213 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47214 to street node 25249 with distance 39.48197573576287.\nINFO:cityseer.graph:Linking transport node 47214 to street node 44308 with distance 14.991815091964197.\nINFO:cityseer.graph:Added transport node 47214 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47215 to street node 21287 with distance 32.534996368445.\nINFO:cityseer.graph:Linking transport node 47215 to street node 25251 with distance 16.141683411401573.\nINFO:cityseer.graph:Added transport node 47215 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47216 to street node 28360 with distance 14.273927168345955.\nINFO:cityseer.graph:Added transport node 47216 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47217 to street node 28357 with distance 24.17306623648469.\nINFO:cityseer.graph:Linking transport node 47217 to street node 28360 with distance 44.76215538407104.\nINFO:cityseer.graph:Added transport node 47217 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47218 to street node 20187 with distance 14.590129397939515.\nINFO:cityseer.graph:Linking transport node 47218 to street node 20190 with distance 72.93062627771167.\nINFO:cityseer.graph:Added transport node 47218 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47219 to street node 28360 with distance 29.380678737538474.\nINFO:cityseer.graph:Linking transport node 47219 to street node 40956 with distance 29.56956064980166.\nINFO:cityseer.graph:Added transport node 47219 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47220 to street node 24002 with distance 122.70495870194092.\nINFO:cityseer.graph:Linking transport node 47220 to street node 24004 with distance 516.77667354565.\nINFO:cityseer.graph:Added transport node 47220 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47221 to street node 24004 with distance 405.54781644296736.\nINFO:cityseer.graph:Added transport node 47221 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47222 to street node 24004 with distance 397.29899273824554.\nINFO:cityseer.graph:Added transport node 47222 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47223 to street node 22925 with distance 89.68846363968349.\nINFO:cityseer.graph:Linking transport node 47223 to street node 28072 with distance 122.27296931122048.\nINFO:cityseer.graph:Added transport node 47223 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47224 to street node 22925 with distance 90.43244488226334.\nINFO:cityseer.graph:Linking transport node 47224 to street node 28072 with distance 122.4537673483399.\nINFO:cityseer.graph:Added transport node 47224 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47225 to street node 22925 with distance 94.18601549795363.\nINFO:cityseer.graph:Linking transport node 47225 to street node 28072 with distance 144.974071700397.\nINFO:cityseer.graph:Added transport node 47225 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47226 to street node 8889 with distance 25.610918562401974.\nINFO:cityseer.graph:Linking transport node 47226 to street node 8892 with distance 34.9349732170127.\nINFO:cityseer.graph:Added transport node 47226 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47227 to street node 8889 with distance 29.09425074788895.\nINFO:cityseer.graph:Linking transport node 47227 to street node 8892 with distance 31.732968861501384.\nINFO:cityseer.graph:Added transport node 47227 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47228 to street node 8889 with distance 36.66700389655362.\nINFO:cityseer.graph:Linking transport node 47228 to street node 8892 with distance 24.26281244951765.\nINFO:cityseer.graph:Added transport node 47228 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47229 to street node 3103 with distance 28.27682113555419.\nINFO:cityseer.graph:Linking transport node 47229 to street node 39767 with distance 9.851955059073902.\nINFO:cityseer.graph:Added transport node 47229 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47230 to street node 3102 with distance 28.017053383512618.\nINFO:cityseer.graph:Linking transport node 47230 to street node 3104 with distance 6.505174013270045.\nINFO:cityseer.graph:Added transport node 47230 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47231 to street node 3103 with distance 25.90426977045189.\nINFO:cityseer.graph:Linking transport node 47231 to street node 39767 with distance 24.05604196155678.\nINFO:cityseer.graph:Added transport node 47231 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47232 to street node 3103 with distance 7.843671695582396.\nINFO:cityseer.graph:Added transport node 47232 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47233 to street node 18904 with distance 31.467509761656938.\nINFO:cityseer.graph:Linking transport node 47233 to street node 19173 with distance 44.35412638012034.\nINFO:cityseer.graph:Added transport node 47233 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47234 to street node 18904 with distance 21.919167770643707.\nINFO:cityseer.graph:Linking transport node 47234 to street node 19173 with distance 40.92806069729541.\nINFO:cityseer.graph:Added transport node 47234 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47235 to street node 19173 with distance 34.73099897902931.\nINFO:cityseer.graph:Added transport node 47235 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47236 to street node 18678 with distance 36.3876277743892.\nINFO:cityseer.graph:Linking transport node 47236 to street node 18680 with distance 30.59439220243595.\nINFO:cityseer.graph:Added transport node 47236 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47237 to street node 18678 with distance 30.37494103862198.\nINFO:cityseer.graph:Linking transport node 47237 to street node 18680 with distance 38.33599188631966.\nINFO:cityseer.graph:Added transport node 47237 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47238 to street node 18678 with distance 41.15267381912374.\nINFO:cityseer.graph:Linking transport node 47238 to street node 18680 with distance 27.266878412625086.\nINFO:cityseer.graph:Added transport node 47238 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47239 to street node 1720 with distance 57.993664061268746.\nINFO:cityseer.graph:Linking transport node 47239 to street node 20635 with distance 79.61606961173382.\nINFO:cityseer.graph:Added transport node 47239 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47240 to street node 1720 with distance 61.21982351836565.\nINFO:cityseer.graph:Linking transport node 47240 to street node 20635 with distance 81.00187998837934.\nINFO:cityseer.graph:Added transport node 47240 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47241 to street node 1720 with distance 56.10129094229095.\nINFO:cityseer.graph:Linking transport node 47241 to street node 20635 with distance 77.22471431570708.\nINFO:cityseer.graph:Added transport node 47241 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47242 to street node 27212 with distance 70.0364357133698.\nINFO:cityseer.graph:Added transport node 47242 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47243 to street node 24500 with distance 32.195607990237384.\nINFO:cityseer.graph:Added transport node 47243 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47244 to street node 27213 with distance 22.552549481396483.\nINFO:cityseer.graph:Linking transport node 47244 to street node 27216 with distance 12.269915583597369.\nINFO:cityseer.graph:Added transport node 47244 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47245 to street node 27184 with distance 16.24341812180536.\nINFO:cityseer.graph:Linking transport node 47245 to street node 27185 with distance 46.535610515608354.\nINFO:cityseer.graph:Added transport node 47245 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47246 to street node 27182 with distance 22.542730665328715.\nINFO:cityseer.graph:Linking transport node 47246 to street node 27183 with distance 78.63807963075837.\nINFO:cityseer.graph:Added transport node 47246 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47247 to street node 27188 with distance 18.967885896779485.\nINFO:cityseer.graph:Linking transport node 47247 to street node 27189 with distance 50.85387916103883.\nINFO:cityseer.graph:Added transport node 47247 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47248 to street node 27188 with distance 15.768924331494501.\nINFO:cityseer.graph:Added transport node 47248 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47249 to street node 19682 with distance 29.43361924398009.\nINFO:cityseer.graph:Linking transport node 47249 to street node 27182 with distance 27.65878224822953.\nINFO:cityseer.graph:Added transport node 47249 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47250 to street node 27166 with distance 18.7136058220749.\nINFO:cityseer.graph:Linking transport node 47250 to street node 27169 with distance 56.56268019470217.\nINFO:cityseer.graph:Added transport node 47250 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47251 to street node 27094 with distance 32.51943181866349.\nINFO:cityseer.graph:Linking transport node 47251 to street node 27166 with distance 10.892894918902387.\nINFO:cityseer.graph:Added transport node 47251 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47252 to street node 27166 with distance 11.999597333450016.\nINFO:cityseer.graph:Linking transport node 47252 to street node 27168 with distance 52.10582804542296.\nINFO:cityseer.graph:Added transport node 47252 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47253 to street node 27154 with distance 1.441328790627078.\nINFO:cityseer.graph:Linking transport node 47253 to street node 27158 with distance 39.0716976030679.\nINFO:cityseer.graph:Added transport node 47253 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47254 to street node 27155 with distance 4.263638118461866.\nINFO:cityseer.graph:Added transport node 47254 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47255 to street node 31727 with distance 57.67831973994621.\nINFO:cityseer.graph:Added transport node 47255 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47256 to street node 31724 with distance 14.40500174618192.\nINFO:cityseer.graph:Added transport node 47256 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47257 to street node 27157 with distance 20.800475965194032.\nINFO:cityseer.graph:Added transport node 47257 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47258 to street node 27018 with distance 116.61109498216695.\nINFO:cityseer.graph:Linking transport node 47258 to street node 37376 with distance 4.0484348039282425.\nINFO:cityseer.graph:Added transport node 47258 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47259 to street node 27156 with distance 39.83392300396458.\nINFO:cityseer.graph:Linking transport node 47259 to street node 31727 with distance 33.10006337652941.\nINFO:cityseer.graph:Added transport node 47259 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47260 to street node 27007 with distance 5.184066484186048.\nINFO:cityseer.graph:Added transport node 47260 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47261 to street node 27007 with distance 16.034066571723958.\nINFO:cityseer.graph:Linking transport node 47261 to street node 27008 with distance 103.94881598132025.\nINFO:cityseer.graph:Added transport node 47261 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47262 to street node 27006 with distance 66.20425815479106.\nINFO:cityseer.graph:Linking transport node 47262 to street node 27007 with distance 15.145448634383381.\nINFO:cityseer.graph:Added transport node 47262 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47263 to street node 11835 with distance 9.307516670409687.\nINFO:cityseer.graph:Linking transport node 47263 to street node 11837 with distance 93.006283532863.\nINFO:cityseer.graph:Added transport node 47263 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47264 to street node 37368 with distance 8.545643768310933.\nINFO:cityseer.graph:Linking transport node 47264 to street node 37371 with distance 14.214180853646178.\nINFO:cityseer.graph:Added transport node 47264 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47265 to street node 25629 with distance 35.77130129932523.\nINFO:cityseer.graph:Linking transport node 47265 to street node 25630 with distance 10.478413962290562.\nINFO:cityseer.graph:Added transport node 47265 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47266 to street node 37363 with distance 38.638071108397625.\nINFO:cityseer.graph:Linking transport node 47266 to street node 37366 with distance 9.873479615693661.\nINFO:cityseer.graph:Added transport node 47266 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47267 to street node 37361 with distance 19.179336458158403.\nINFO:cityseer.graph:Added transport node 47267 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47268 to street node 30164 with distance 46.03764397071103.\nINFO:cityseer.graph:Linking transport node 47268 to street node 30168 with distance 11.28394286425607.\nINFO:cityseer.graph:Added transport node 47268 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47269 to street node 30167 with distance 52.59594143440141.\nINFO:cityseer.graph:Linking transport node 47269 to street node 30168 with distance 10.201441269205896.\nINFO:cityseer.graph:Added transport node 47269 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47270 to street node 25630 with distance 19.21777851582807.\nINFO:cityseer.graph:Linking transport node 47270 to street node 37372 with distance 13.384035134444435.\nINFO:cityseer.graph:Added transport node 47270 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47271 to street node 30168 with distance 25.63273974686725.\nINFO:cityseer.graph:Added transport node 47271 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47272 to street node 28099 with distance 18.050606741518816.\nINFO:cityseer.graph:Linking transport node 47272 to street node 28101 with distance 2.19666164546632.\nINFO:cityseer.graph:Added transport node 47272 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47273 to street node 28106 with distance 15.322831757416134.\nINFO:cityseer.graph:Added transport node 47273 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47274 to street node 28102 with distance 21.243324792161655.\nINFO:cityseer.graph:Linking transport node 47274 to street node 28105 with distance 24.35026936232934.\nINFO:cityseer.graph:Added transport node 47274 and created 4 link edges.\n 11%|█▏        | 146/1272 [00:00&lt;00:00, 1458.59it/s]INFO:cityseer.graph:Linking transport node 47275 to street node 28093 with distance 10.346103987621472.\nINFO:cityseer.graph:Added transport node 47275 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47276 to street node 33212 with distance 44.85722866034253.\nINFO:cityseer.graph:Linking transport node 47276 to street node 33216 with distance 14.073698618567304.\nINFO:cityseer.graph:Added transport node 47276 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47277 to street node 23672 with distance 33.587881038388645.\nINFO:cityseer.graph:Linking transport node 47277 to street node 33217 with distance 11.066563815199194.\nINFO:cityseer.graph:Added transport node 47277 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47278 to street node 23672 with distance 55.113695429519204.\nINFO:cityseer.graph:Linking transport node 47278 to street node 33216 with distance 20.808273590719924.\nINFO:cityseer.graph:Added transport node 47278 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47279 to street node 29983 with distance 44.27985279830822.\nINFO:cityseer.graph:Added transport node 47279 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47280 to street node 24004 with distance 510.45075792327054.\nINFO:cityseer.graph:Added transport node 47280 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47281 to street node 24206 with distance 289.93376262873966.\nINFO:cityseer.graph:Linking transport node 47281 to street node 24207 with distance 132.84787950436996.\nINFO:cityseer.graph:Added transport node 47281 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47282 to street node 27746 with distance 70.98670951354961.\nINFO:cityseer.graph:Linking transport node 47282 to street node 29563 with distance 38.65756470971744.\nINFO:cityseer.graph:Added transport node 47282 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47283 to street node 3752 with distance 24.187015784898588.\nINFO:cityseer.graph:Added transport node 47283 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47284 to street node 38025 with distance 15.985267865761232.\nINFO:cityseer.graph:Linking transport node 47284 to street node 38026 with distance 15.21801207531466.\nINFO:cityseer.graph:Added transport node 47284 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47285 to street node 32304 with distance 24.347433587358385.\nINFO:cityseer.graph:Linking transport node 47285 to street node 37686 with distance 33.76162638626166.\nINFO:cityseer.graph:Added transport node 47285 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47286 to street node 29749 with distance 3.2457091016516886.\nINFO:cityseer.graph:Linking transport node 47286 to street node 29750 with distance 14.470161325696058.\nINFO:cityseer.graph:Added transport node 47286 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47287 to street node 36089 with distance 50.57846741770585.\nINFO:cityseer.graph:Linking transport node 47287 to street node 36090 with distance 10.198493982495377.\nINFO:cityseer.graph:Added transport node 47287 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47288 to street node 31537 with distance 32.652185793285796.\nINFO:cityseer.graph:Linking transport node 47288 to street node 31538 with distance 45.84345888892275.\nINFO:cityseer.graph:Added transport node 47288 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47289 to street node 7926 with distance 27.676856200817813.\nINFO:cityseer.graph:Added transport node 47289 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47290 to street node 23609 with distance 31.122410761823666.\nINFO:cityseer.graph:Added transport node 47290 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47291 to street node 27228 with distance 25.017758251999837.\nINFO:cityseer.graph:Added transport node 47291 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47292 to street node 23634 with distance 49.366493605049044.\nINFO:cityseer.graph:Added transport node 47292 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47293 to street node 23655 with distance 48.23933863562338.\nINFO:cityseer.graph:Added transport node 47293 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47294 to street node 23601 with distance 10.225637317708655.\nINFO:cityseer.graph:Linking transport node 47294 to street node 23602 with distance 14.67372828612696.\nINFO:cityseer.graph:Added transport node 47294 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47295 to street node 39880 with distance 55.20757376665466.\nINFO:cityseer.graph:Added transport node 47295 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47296 to street node 45628 with distance 32.29544489924381.\nINFO:cityseer.graph:Added transport node 47296 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47297 to street node 25249 with distance 32.44478394836978.\nINFO:cityseer.graph:Linking transport node 47297 to street node 44308 with distance 23.67522066441594.\nINFO:cityseer.graph:Added transport node 47297 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47298 to street node 28360 with distance 14.273927168345955.\nINFO:cityseer.graph:Added transport node 47298 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47299 to street node 22925 with distance 89.68846363968349.\nINFO:cityseer.graph:Linking transport node 47299 to street node 28072 with distance 122.27296931122048.\nINFO:cityseer.graph:Added transport node 47299 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47300 to street node 8889 with distance 25.610918562401974.\nINFO:cityseer.graph:Linking transport node 47300 to street node 8892 with distance 34.9349732170127.\nINFO:cityseer.graph:Added transport node 47300 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47301 to street node 3103 with distance 28.27682113555419.\nINFO:cityseer.graph:Linking transport node 47301 to street node 39767 with distance 9.851955059073902.\nINFO:cityseer.graph:Added transport node 47301 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47302 to street node 18904 with distance 31.467509761656938.\nINFO:cityseer.graph:Linking transport node 47302 to street node 19173 with distance 44.35412638012034.\nINFO:cityseer.graph:Added transport node 47302 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47303 to street node 18678 with distance 36.3876277743892.\nINFO:cityseer.graph:Linking transport node 47303 to street node 18680 with distance 30.59439220243595.\nINFO:cityseer.graph:Added transport node 47303 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47304 to street node 1720 with distance 57.993664061268746.\nINFO:cityseer.graph:Linking transport node 47304 to street node 20635 with distance 79.61606961173382.\nINFO:cityseer.graph:Added transport node 47304 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47305 to street node 27212 with distance 70.0364357133698.\nINFO:cityseer.graph:Added transport node 47305 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47306 to street node 27184 with distance 16.24341812180536.\nINFO:cityseer.graph:Linking transport node 47306 to street node 27185 with distance 46.535610515608354.\nINFO:cityseer.graph:Added transport node 47306 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47307 to street node 27166 with distance 18.7136058220749.\nINFO:cityseer.graph:Linking transport node 47307 to street node 27169 with distance 56.56268019470217.\nINFO:cityseer.graph:Added transport node 47307 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47308 to street node 27154 with distance 1.441328790627078.\nINFO:cityseer.graph:Linking transport node 47308 to street node 27158 with distance 39.0716976030679.\nINFO:cityseer.graph:Added transport node 47308 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47309 to street node 27007 with distance 5.184066484186048.\nINFO:cityseer.graph:Added transport node 47309 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47310 to street node 37368 with distance 8.545643768310933.\nINFO:cityseer.graph:Linking transport node 47310 to street node 37371 with distance 14.214180853646178.\nINFO:cityseer.graph:Added transport node 47310 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47311 to street node 28099 with distance 18.050606741518816.\nINFO:cityseer.graph:Linking transport node 47311 to street node 28101 with distance 2.19666164546632.\nINFO:cityseer.graph:Added transport node 47311 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47312 to street node 38778 with distance 10.428339237683877.\nINFO:cityseer.graph:Added transport node 47312 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47313 to street node 38777 with distance 39.80979299687016.\nINFO:cityseer.graph:Linking transport node 47313 to street node 38778 with distance 28.070343267689523.\nINFO:cityseer.graph:Added transport node 47313 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47314 to street node 38777 with distance 63.87409720145661.\nINFO:cityseer.graph:Linking transport node 47314 to street node 38778 with distance 25.262914088647427.\nINFO:cityseer.graph:Added transport node 47314 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47315 to street node 22114 with distance 39.315800291065024.\nINFO:cityseer.graph:Linking transport node 47315 to street node 22115 with distance 67.83224694116544.\nINFO:cityseer.graph:Added transport node 47315 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47316 to street node 22114 with distance 65.48954727938367.\nINFO:cityseer.graph:Linking transport node 47316 to street node 22115 with distance 39.1345796857936.\nINFO:cityseer.graph:Added transport node 47316 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47317 to street node 22114 with distance 78.73538470033336.\nINFO:cityseer.graph:Linking transport node 47317 to street node 22115 with distance 54.534129956543275.\nINFO:cityseer.graph:Added transport node 47317 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47318 to street node 23748 with distance 72.1385319765695.\nINFO:cityseer.graph:Added transport node 47318 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47319 to street node 23752 with distance 24.11140569369938.\nINFO:cityseer.graph:Linking transport node 47319 to street node 32105 with distance 41.56472993860679.\nINFO:cityseer.graph:Added transport node 47319 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47320 to street node 23748 with distance 58.11008898086953.\nINFO:cityseer.graph:Linking transport node 47320 to street node 23751 with distance 31.707554898714122.\nINFO:cityseer.graph:Added transport node 47320 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47321 to street node 23735 with distance 19.449199636322767.\nINFO:cityseer.graph:Added transport node 47321 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47322 to street node 23728 with distance 41.105932816912215.\nINFO:cityseer.graph:Linking transport node 47322 to street node 23735 with distance 36.65936992796826.\nINFO:cityseer.graph:Added transport node 47322 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47323 to street node 23726 with distance 56.38236374262055.\nINFO:cityseer.graph:Linking transport node 47323 to street node 36362 with distance 9.65777305558932.\nINFO:cityseer.graph:Added transport node 47323 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47324 to street node 23733 with distance 17.073068884786167.\nINFO:cityseer.graph:Linking transport node 47324 to street node 36363 with distance 72.9776510926566.\nINFO:cityseer.graph:Added transport node 47324 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47325 to street node 23733 with distance 20.15873512882337.\nINFO:cityseer.graph:Linking transport node 47325 to street node 36363 with distance 69.88927490883077.\nINFO:cityseer.graph:Added transport node 47325 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47326 to street node 23728 with distance 35.08054681412132.\nINFO:cityseer.graph:Linking transport node 47326 to street node 23735 with distance 41.75042149793952.\nINFO:cityseer.graph:Added transport node 47326 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47327 to street node 23728 with distance 37.6188248099081.\nINFO:cityseer.graph:Linking transport node 47327 to street node 23735 with distance 39.43884880139622.\nINFO:cityseer.graph:Added transport node 47327 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47328 to street node 23725 with distance 54.00561072859171.\nINFO:cityseer.graph:Linking transport node 47328 to street node 23730 with distance 8.11548545398373.\nINFO:cityseer.graph:Added transport node 47328 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47329 to street node 23731 with distance 60.82416856957323.\nINFO:cityseer.graph:Added transport node 47329 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47330 to street node 23732 with distance 31.97056094372461.\nINFO:cityseer.graph:Linking transport node 47330 to street node 23733 with distance 64.79216334994658.\nINFO:cityseer.graph:Added transport node 47330 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47331 to street node 23728 with distance 40.27366494708123.\nINFO:cityseer.graph:Linking transport node 47331 to street node 32495 with distance 34.38881579487086.\nINFO:cityseer.graph:Added transport node 47331 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47332 to street node 23716 with distance 44.3964207362244.\nINFO:cityseer.graph:Linking transport node 47332 to street node 23717 with distance 30.79492898798658.\nINFO:cityseer.graph:Added transport node 47332 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47333 to street node 23716 with distance 12.050799404204561.\nINFO:cityseer.graph:Linking transport node 47333 to street node 23717 with distance 48.93548355863643.\nINFO:cityseer.graph:Added transport node 47333 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47334 to street node 23717 with distance 20.309412388867365.\nINFO:cityseer.graph:Linking transport node 47334 to street node 29593 with distance 57.63970540778262.\nINFO:cityseer.graph:Added transport node 47334 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47335 to street node 23717 with distance 16.235568316782068.\nINFO:cityseer.graph:Linking transport node 47335 to street node 29593 with distance 60.21051379845017.\nINFO:cityseer.graph:Added transport node 47335 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47336 to street node 23707 with distance 29.79375990698577.\nINFO:cityseer.graph:Linking transport node 47336 to street node 23709 with distance 102.46917136385332.\nINFO:cityseer.graph:Added transport node 47336 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47337 to street node 23709 with distance 56.96658239953106.\nINFO:cityseer.graph:Linking transport node 47337 to street node 23710 with distance 7.406025764479124.\nINFO:cityseer.graph:Added transport node 47337 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47338 to street node 23710 with distance 14.885218104477028.\nINFO:cityseer.graph:Linking transport node 47338 to street node 32228 with distance 49.04885236959043.\nINFO:cityseer.graph:Added transport node 47338 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47339 to street node 23707 with distance 57.21210617505524.\nINFO:cityseer.graph:Linking transport node 47339 to street node 23709 with distance 110.5609076182399.\nINFO:cityseer.graph:Added transport node 47339 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47340 to street node 23707 with distance 48.0619569469772.\nINFO:cityseer.graph:Added transport node 47340 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47341 to street node 18469 with distance 19.84350074531133.\nINFO:cityseer.graph:Linking transport node 47341 to street node 23392 with distance 49.254895893160885.\nINFO:cityseer.graph:Added transport node 47341 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47342 to street node 18469 with distance 30.900218390607336.\nINFO:cityseer.graph:Linking transport node 47342 to street node 23392 with distance 32.93870103248593.\nINFO:cityseer.graph:Added transport node 47342 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47343 to street node 18469 with distance 20.200873053298277.\nINFO:cityseer.graph:Linking transport node 47343 to street node 23392 with distance 54.634910114173195.\nINFO:cityseer.graph:Added transport node 47343 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47344 to street node 21444 with distance 11.353144397622938.\nINFO:cityseer.graph:Added transport node 47344 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47345 to street node 21445 with distance 34.258361320029564.\nINFO:cityseer.graph:Linking transport node 47345 to street node 21447 with distance 57.581128098910575.\nINFO:cityseer.graph:Added transport node 47345 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47346 to street node 21444 with distance 26.89093307100161.\nINFO:cityseer.graph:Linking transport node 47346 to street node 21445 with distance 57.17644749672954.\nINFO:cityseer.graph:Added transport node 47346 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47347 to street node 21444 with distance 57.74365242409137.\nINFO:cityseer.graph:Linking transport node 47347 to street node 21446 with distance 100.34033644656854.\nINFO:cityseer.graph:Added transport node 47347 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47348 to street node 21444 with distance 48.01893238670873.\nINFO:cityseer.graph:Linking transport node 47348 to street node 21446 with distance 118.45995820695373.\nINFO:cityseer.graph:Added transport node 47348 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47349 to street node 19354 with distance 24.117660884028652.\nINFO:cityseer.graph:Added transport node 47349 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47350 to street node 19354 with distance 26.38518009719868.\nINFO:cityseer.graph:Added transport node 47350 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47351 to street node 16392 with distance 59.23867595639172.\nINFO:cityseer.graph:Linking transport node 47351 to street node 19354 with distance 24.992278992394453.\nINFO:cityseer.graph:Added transport node 47351 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47352 to street node 16414 with distance 53.97411538611613.\nINFO:cityseer.graph:Linking transport node 47352 to street node 17652 with distance 121.39104382811261.\nINFO:cityseer.graph:Added transport node 47352 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47353 to street node 16412 with distance 36.480697978032595.\nINFO:cityseer.graph:Linking transport node 47353 to street node 16414 with distance 51.53394881118422.\nINFO:cityseer.graph:Added transport node 47353 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47354 to street node 15856 with distance 62.83450716732218.\nINFO:cityseer.graph:Linking transport node 47354 to street node 15857 with distance 99.91318882811419.\nINFO:cityseer.graph:Added transport node 47354 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47355 to street node 23690 with distance 38.80218199102706.\nINFO:cityseer.graph:Linking transport node 47355 to street node 23691 with distance 63.64436072663621.\nINFO:cityseer.graph:Added transport node 47355 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47356 to street node 23690 with distance 39.06923519905162.\nINFO:cityseer.graph:Linking transport node 47356 to street node 23693 with distance 78.33082053801087.\nINFO:cityseer.graph:Added transport node 47356 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47357 to street node 23690 with distance 20.12330373856956.\nINFO:cityseer.graph:Added transport node 47357 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47358 to street node 23688 with distance 19.432599543210106.\nINFO:cityseer.graph:Linking transport node 47358 to street node 23689 with distance 53.85972026836315.\nINFO:cityseer.graph:Added transport node 47358 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47359 to street node 23688 with distance 21.411840844528086.\nINFO:cityseer.graph:Added transport node 47359 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47360 to street node 23681 with distance 15.652106842417528.\nINFO:cityseer.graph:Linking transport node 47360 to street node 23683 with distance 19.318565308180194.\nINFO:cityseer.graph:Added transport node 47360 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47361 to street node 23681 with distance 12.365086834919667.\nINFO:cityseer.graph:Added transport node 47361 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47362 to street node 23683 with distance 29.954757770732144.\nINFO:cityseer.graph:Added transport node 47362 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47363 to street node 23677 with distance 38.09310406627967.\nINFO:cityseer.graph:Added transport node 47363 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47364 to street node 29332 with distance 27.533078923698653.\nINFO:cityseer.graph:Linking transport node 47364 to street node 29333 with distance 22.809286003354437.\nINFO:cityseer.graph:Added transport node 47364 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47365 to street node 29332 with distance 22.919681592338648.\nINFO:cityseer.graph:Linking transport node 47365 to street node 29333 with distance 19.17437997755405.\nINFO:cityseer.graph:Added transport node 47365 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47366 to street node 20912 with distance 19.31481551966338.\nINFO:cityseer.graph:Linking transport node 47366 to street node 29333 with distance 19.127200195540627.\nINFO:cityseer.graph:Added transport node 47366 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47367 to street node 29332 with distance 28.4263765640058.\nINFO:cityseer.graph:Linking transport node 47367 to street node 29333 with distance 8.366606776586465.\nINFO:cityseer.graph:Added transport node 47367 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47368 to street node 38037 with distance 36.03673225762789.\nINFO:cityseer.graph:Added transport node 47368 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47369 to street node 39890 with distance 12.749826231836026.\nINFO:cityseer.graph:Linking transport node 47369 to street node 39892 with distance 14.070519466969044.\nINFO:cityseer.graph:Added transport node 47369 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47370 to street node 38034 with distance 18.378192768874356.\nINFO:cityseer.graph:Linking transport node 47370 to street node 38037 with distance 43.930439242887225.\nINFO:cityseer.graph:Added transport node 47370 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47371 to street node 39695 with distance 13.459921247988687.\nINFO:cityseer.graph:Added transport node 47371 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47372 to street node 39837 with distance 13.626170265810678.\nINFO:cityseer.graph:Added transport node 47372 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47373 to street node 28738 with distance 38.53761781050494.\nINFO:cityseer.graph:Linking transport node 47373 to street node 28739 with distance 1.9034112311244278.\nINFO:cityseer.graph:Added transport node 47373 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47374 to street node 30427 with distance 31.10051227120141.\nINFO:cityseer.graph:Linking transport node 47374 to street node 30431 with distance 15.859267839315892.\nINFO:cityseer.graph:Added transport node 47374 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47375 to street node 34972 with distance 59.948720947562016.\nINFO:cityseer.graph:Linking transport node 47375 to street node 38420 with distance 19.627165152055415.\nINFO:cityseer.graph:Added transport node 47375 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47376 to street node 27510 with distance 24.40723813085443.\nINFO:cityseer.graph:Linking transport node 47376 to street node 27511 with distance 23.052107443288822.\nINFO:cityseer.graph:Added transport node 47376 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47377 to street node 34972 with distance 48.84342787206301.\nINFO:cityseer.graph:Linking transport node 47377 to street node 38420 with distance 31.841710271231186.\nINFO:cityseer.graph:Added transport node 47377 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47378 to street node 17557 with distance 57.12901767796335.\nINFO:cityseer.graph:Linking transport node 47378 to street node 27139 with distance 29.050750842715498.\nINFO:cityseer.graph:Added transport node 47378 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47379 to street node 27139 with distance 19.71805453349322.\nINFO:cityseer.graph:Linking transport node 47379 to street node 27141 with distance 68.47064548716416.\nINFO:cityseer.graph:Added transport node 47379 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47380 to street node 17557 with distance 67.7495043120094.\nINFO:cityseer.graph:Linking transport node 47380 to street node 27139 with distance 13.931413270748166.\nINFO:cityseer.graph:Added transport node 47380 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47381 to street node 17557 with distance 48.434354938109216.\nINFO:cityseer.graph:Linking transport node 47381 to street node 27139 with distance 36.73454388609117.\nINFO:cityseer.graph:Added transport node 47381 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47382 to street node 27154 with distance 2.9486882071371303.\nINFO:cityseer.graph:Added transport node 47382 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47383 to street node 38778 with distance 10.428339237683877.\nINFO:cityseer.graph:Added transport node 47383 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47384 to street node 22114 with distance 39.315800291065024.\nINFO:cityseer.graph:Linking transport node 47384 to street node 22115 with distance 67.83224694116544.\nINFO:cityseer.graph:Added transport node 47384 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47385 to street node 23748 with distance 72.1385319765695.\nINFO:cityseer.graph:Added transport node 47385 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47386 to street node 23735 with distance 19.449199636322767.\nINFO:cityseer.graph:Added transport node 47386 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47387 to street node 23716 with distance 44.3964207362244.\nINFO:cityseer.graph:Linking transport node 47387 to street node 23717 with distance 30.79492898798658.\nINFO:cityseer.graph:Added transport node 47387 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47388 to street node 23707 with distance 29.79375990698577.\nINFO:cityseer.graph:Linking transport node 47388 to street node 23709 with distance 102.46917136385332.\nINFO:cityseer.graph:Added transport node 47388 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47389 to street node 18469 with distance 19.84350074531133.\nINFO:cityseer.graph:Linking transport node 47389 to street node 23392 with distance 49.254895893160885.\nINFO:cityseer.graph:Added transport node 47389 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47390 to street node 21444 with distance 11.353144397622938.\nINFO:cityseer.graph:Added transport node 47390 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47391 to street node 19354 with distance 24.117660884028652.\nINFO:cityseer.graph:Added transport node 47391 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47392 to street node 16414 with distance 53.97411538611613.\nINFO:cityseer.graph:Linking transport node 47392 to street node 17652 with distance 121.39104382811261.\nINFO:cityseer.graph:Added transport node 47392 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47393 to street node 23690 with distance 38.80218199102706.\nINFO:cityseer.graph:Linking transport node 47393 to street node 23691 with distance 63.64436072663621.\nINFO:cityseer.graph:Added transport node 47393 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47394 to street node 23681 with distance 15.652106842417528.\nINFO:cityseer.graph:Linking transport node 47394 to street node 23683 with distance 19.318565308180194.\nINFO:cityseer.graph:Added transport node 47394 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47395 to street node 29332 with distance 27.533078923698653.\nINFO:cityseer.graph:Linking transport node 47395 to street node 29333 with distance 22.809286003354437.\nINFO:cityseer.graph:Added transport node 47395 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47396 to street node 38037 with distance 36.03673225762789.\nINFO:cityseer.graph:Added transport node 47396 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47397 to street node 39837 with distance 13.626170265810678.\nINFO:cityseer.graph:Added transport node 47397 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47398 to street node 34972 with distance 59.948720947562016.\nINFO:cityseer.graph:Linking transport node 47398 to street node 38420 with distance 19.627165152055415.\nINFO:cityseer.graph:Added transport node 47398 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47399 to street node 17557 with distance 57.12901767796335.\nINFO:cityseer.graph:Linking transport node 47399 to street node 27139 with distance 29.050750842715498.\nINFO:cityseer.graph:Added transport node 47399 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47400 to street node 3207 with distance 120.05649508434585.\nINFO:cityseer.graph:Linking transport node 47400 to street node 3208 with distance 24.138711972938577.\nINFO:cityseer.graph:Added transport node 47400 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47401 to street node 3207 with distance 108.80932417067568.\nINFO:cityseer.graph:Linking transport node 47401 to street node 3208 with distance 34.504814136435144.\nINFO:cityseer.graph:Added transport node 47401 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47402 to street node 3208 with distance 21.948409919496772.\nINFO:cityseer.graph:Linking transport node 47402 to street node 3213 with distance 126.34273072492753.\nINFO:cityseer.graph:Added transport node 47402 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47403 to street node 3208 with distance 26.656781605618985.\nINFO:cityseer.graph:Linking transport node 47403 to street node 3209 with distance 145.81100524537626.\nINFO:cityseer.graph:Added transport node 47403 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47404 to street node 15161 with distance 74.18212576168854.\nINFO:cityseer.graph:Linking transport node 47404 to street node 18941 with distance 51.52146506544181.\nINFO:cityseer.graph:Added transport node 47404 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47405 to street node 15160 with distance 142.4650048083104.\nINFO:cityseer.graph:Added transport node 47405 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47406 to street node 15161 with distance 52.526906123641716.\nINFO:cityseer.graph:Linking transport node 47406 to street node 18941 with distance 51.360878763066594.\nINFO:cityseer.graph:Added transport node 47406 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47407 to street node 8708 with distance 19.592675838459034.\nINFO:cityseer.graph:Linking transport node 47407 to street node 8710 with distance 43.054126649740105.\nINFO:cityseer.graph:Added transport node 47407 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47408 to street node 8708 with distance 12.249253529482507.\nINFO:cityseer.graph:Linking transport node 47408 to street node 8710 with distance 50.438565141711.\nINFO:cityseer.graph:Added transport node 47408 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47409 to street node 30039 with distance 19.494068959449503.\nINFO:cityseer.graph:Linking transport node 47409 to street node 30040 with distance 119.58290241674793.\nINFO:cityseer.graph:Added transport node 47409 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47410 to street node 8708 with distance 25.374679240692664.\nINFO:cityseer.graph:Added transport node 47410 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47411 to street node 7598 with distance 186.32209057068195.\nINFO:cityseer.graph:Linking transport node 47411 to street node 7599 with distance 58.18001130133337.\nINFO:cityseer.graph:Added transport node 47411 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47412 to street node 6376 with distance 68.23436217407301.\nINFO:cityseer.graph:Linking transport node 47412 to street node 6377 with distance 24.349748209586974.\nINFO:cityseer.graph:Added transport node 47412 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47413 to street node 7598 with distance 135.14946441380582.\nINFO:cityseer.graph:Linking transport node 47413 to street node 7599 with distance 107.73892946410564.\nINFO:cityseer.graph:Added transport node 47413 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47414 to street node 7598 with distance 170.64482899684057.\nINFO:cityseer.graph:Linking transport node 47414 to street node 7599 with distance 72.7328272872512.\nINFO:cityseer.graph:Added transport node 47414 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47415 to street node 13640 with distance 66.86375114791957.\nINFO:cityseer.graph:Linking transport node 47415 to street node 13641 with distance 47.489668030993556.\nINFO:cityseer.graph:Added transport node 47415 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47416 to street node 13635 with distance 25.296834709352343.\nINFO:cityseer.graph:Linking transport node 47416 to street node 13638 with distance 55.63546785439849.\nINFO:cityseer.graph:Added transport node 47416 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47417 to street node 33752 with distance 26.94887743538049.\nINFO:cityseer.graph:Linking transport node 47417 to street node 33753 with distance 102.06506436727125.\nINFO:cityseer.graph:Added transport node 47417 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47418 to street node 33752 with distance 45.46032497197793.\nINFO:cityseer.graph:Added transport node 47418 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47419 to street node 30028 with distance 283.9492594954015.\nINFO:cityseer.graph:Linking transport node 47419 to street node 30030 with distance 136.026919608429.\nINFO:cityseer.graph:Added transport node 47419 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47420 to street node 42157 with distance 142.84363713468667.\nINFO:cityseer.graph:Linking transport node 47420 to street node 42159 with distance 13.849893456114609.\nINFO:cityseer.graph:Added transport node 47420 and created 4 link edges.\n 23%|██▎       | 292/1272 [00:00&lt;00:01, 941.79it/s] INFO:cityseer.graph:Linking transport node 47421 to street node 30028 with distance 297.6590924063352.\nINFO:cityseer.graph:Linking transport node 47421 to street node 30030 with distance 120.88308039487296.\nINFO:cityseer.graph:Added transport node 47421 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47422 to street node 42157 with distance 179.39345878850054.\nINFO:cityseer.graph:Linking transport node 47422 to street node 42159 with distance 24.892479020026347.\nINFO:cityseer.graph:Added transport node 47422 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47423 to street node 16528 with distance 52.04458036236855.\nINFO:cityseer.graph:Added transport node 47423 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47424 to street node 16528 with distance 91.12783537614564.\nINFO:cityseer.graph:Added transport node 47424 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47425 to street node 16528 with distance 97.89353296390686.\nINFO:cityseer.graph:Added transport node 47425 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47426 to street node 27696 with distance 68.56043086130033.\nINFO:cityseer.graph:Linking transport node 47426 to street node 34595 with distance 8.779536651354501.\nINFO:cityseer.graph:Added transport node 47426 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47427 to street node 40306 with distance 12.916629719173812.\nINFO:cityseer.graph:Linking transport node 47427 to street node 40318 with distance 19.947249581687363.\nINFO:cityseer.graph:Added transport node 47427 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47428 to street node 28339 with distance 37.17296820916659.\nINFO:cityseer.graph:Linking transport node 47428 to street node 32737 with distance 37.708128428045086.\nINFO:cityseer.graph:Added transport node 47428 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47429 to street node 28339 with distance 20.314265488376712.\nINFO:cityseer.graph:Linking transport node 47429 to street node 34462 with distance 48.29203503249306.\nINFO:cityseer.graph:Added transport node 47429 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47430 to street node 23173 with distance 24.336033896885773.\nINFO:cityseer.graph:Linking transport node 47430 to street node 36257 with distance 21.604245240176514.\nINFO:cityseer.graph:Added transport node 47430 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47431 to street node 28338 with distance 51.560995950786484.\nINFO:cityseer.graph:Linking transport node 47431 to street node 28339 with distance 23.476182751996223.\nINFO:cityseer.graph:Added transport node 47431 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47432 to street node 28338 with distance 57.91790346742919.\nINFO:cityseer.graph:Linking transport node 47432 to street node 28339 with distance 17.192988730757882.\nINFO:cityseer.graph:Added transport node 47432 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47433 to street node 15764 with distance 80.8861234983515.\nINFO:cityseer.graph:Added transport node 47433 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47434 to street node 23113 with distance 84.34176930720085.\nINFO:cityseer.graph:Linking transport node 47434 to street node 27608 with distance 24.930730991066877.\nINFO:cityseer.graph:Added transport node 47434 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47435 to street node 15764 with distance 83.15728688988776.\nINFO:cityseer.graph:Linking transport node 47435 to street node 15766 with distance 28.967865417123694.\nINFO:cityseer.graph:Added transport node 47435 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47436 to street node 15765 with distance 10.53745302460218.\nINFO:cityseer.graph:Added transport node 47436 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47437 to street node 15764 with distance 85.85516524693163.\nINFO:cityseer.graph:Linking transport node 47437 to street node 15765 with distance 29.901546711928404.\nINFO:cityseer.graph:Added transport node 47437 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47438 to street node 23132 with distance 48.20934536898511.\nINFO:cityseer.graph:Added transport node 47438 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47439 to street node 23132 with distance 72.94835059834114.\nINFO:cityseer.graph:Linking transport node 47439 to street node 29672 with distance 33.289115629230636.\nINFO:cityseer.graph:Added transport node 47439 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47440 to street node 23132 with distance 35.03082938588612.\nINFO:cityseer.graph:Linking transport node 47440 to street node 29671 with distance 62.707675693458.\nINFO:cityseer.graph:Added transport node 47440 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47441 to street node 23132 with distance 56.28656386318554.\nINFO:cityseer.graph:Added transport node 47441 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47442 to street node 26378 with distance 30.787517381297043.\nINFO:cityseer.graph:Linking transport node 47442 to street node 26379 with distance 11.752143622214563.\nINFO:cityseer.graph:Added transport node 47442 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47443 to street node 26376 with distance 24.138635954887064.\nINFO:cityseer.graph:Linking transport node 47443 to street node 35484 with distance 51.87298773583911.\nINFO:cityseer.graph:Added transport node 47443 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47444 to street node 25627 with distance 56.39623695161386.\nINFO:cityseer.graph:Linking transport node 47444 to street node 25628 with distance 18.67907128279156.\nINFO:cityseer.graph:Added transport node 47444 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47445 to street node 26376 with distance 14.636966770006378.\nINFO:cityseer.graph:Added transport node 47445 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47446 to street node 26122 with distance 21.79253885887108.\nINFO:cityseer.graph:Linking transport node 47446 to street node 26125 with distance 29.34591560572887.\nINFO:cityseer.graph:Added transport node 47446 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47447 to street node 26119 with distance 28.75873033181063.\nINFO:cityseer.graph:Added transport node 47447 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47448 to street node 26122 with distance 6.684311747589678.\nINFO:cityseer.graph:Linking transport node 47448 to street node 26125 with distance 39.63044496405872.\nINFO:cityseer.graph:Added transport node 47448 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47449 to street node 23677 with distance 39.13148005832617.\nINFO:cityseer.graph:Added transport node 47449 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47450 to street node 28719 with distance 14.479826153268574.\nINFO:cityseer.graph:Linking transport node 47450 to street node 28721 with distance 17.305193310498098.\nINFO:cityseer.graph:Added transport node 47450 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47451 to street node 28719 with distance 35.59302268411472.\nINFO:cityseer.graph:Linking transport node 47451 to street node 28723 with distance 43.225865825136694.\nINFO:cityseer.graph:Added transport node 47451 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47452 to street node 28726 with distance 15.548274440069209.\nINFO:cityseer.graph:Linking transport node 47452 to street node 28730 with distance 31.79421942342821.\nINFO:cityseer.graph:Added transport node 47452 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47453 to street node 28719 with distance 32.2850261246464.\nINFO:cityseer.graph:Linking transport node 47453 to street node 28720 with distance 14.249404620937005.\nINFO:cityseer.graph:Added transport node 47453 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47454 to street node 28730 with distance 29.182143344653426.\nINFO:cityseer.graph:Linking transport node 47454 to street node 28731 with distance 12.540729336021261.\nINFO:cityseer.graph:Added transport node 47454 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47455 to street node 28726 with distance 20.529472649086696.\nINFO:cityseer.graph:Linking transport node 47455 to street node 28729 with distance 76.04109784138018.\nINFO:cityseer.graph:Added transport node 47455 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47456 to street node 28729 with distance 75.03180806055347.\nINFO:cityseer.graph:Added transport node 47456 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47457 to street node 28726 with distance 24.505638361358194.\nINFO:cityseer.graph:Linking transport node 47457 to street node 28730 with distance 19.66752193622173.\nINFO:cityseer.graph:Added transport node 47457 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47458 to street node 32397 with distance 121.72357552825707.\nINFO:cityseer.graph:Linking transport node 47458 to street node 32406 with distance 19.812160527744922.\nINFO:cityseer.graph:Added transport node 47458 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47459 to street node 32406 with distance 13.072347118179836.\nINFO:cityseer.graph:Added transport node 47459 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47460 to street node 32407 with distance 15.97166048552456.\nINFO:cityseer.graph:Added transport node 47460 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47461 to street node 10987 with distance 16.28503606606912.\nINFO:cityseer.graph:Linking transport node 47461 to street node 32404 with distance 60.16713754266577.\nINFO:cityseer.graph:Added transport node 47461 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47462 to street node 32404 with distance 63.04398948224392.\nINFO:cityseer.graph:Linking transport node 47462 to street node 32408 with distance 11.929186654120532.\nINFO:cityseer.graph:Added transport node 47462 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47463 to street node 32404 with distance 41.83459617610377.\nINFO:cityseer.graph:Added transport node 47463 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47464 to street node 27694 with distance 11.313967118107517.\nINFO:cityseer.graph:Linking transport node 47464 to street node 27695 with distance 47.881823622248604.\nINFO:cityseer.graph:Added transport node 47464 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47465 to street node 27694 with distance 10.468158178819944.\nINFO:cityseer.graph:Linking transport node 47465 to street node 31201 with distance 14.940582535002271.\nINFO:cityseer.graph:Added transport node 47465 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47466 to street node 32404 with distance 49.32394181656241.\nINFO:cityseer.graph:Added transport node 47466 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47467 to street node 39093 with distance 44.2154386695051.\nINFO:cityseer.graph:Linking transport node 47467 to street node 39094 with distance 45.20364531849167.\nINFO:cityseer.graph:Added transport node 47467 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47468 to street node 39093 with distance 41.65028455591417.\nINFO:cityseer.graph:Added transport node 47468 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47469 to street node 39093 with distance 55.857975260263416.\nINFO:cityseer.graph:Linking transport node 47469 to street node 39094 with distance 27.696557379837223.\nINFO:cityseer.graph:Added transport node 47469 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47470 to street node 39093 with distance 29.77589198002954.\nINFO:cityseer.graph:Linking transport node 47470 to street node 39094 with distance 53.62071001949001.\nINFO:cityseer.graph:Added transport node 47470 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47471 to street node 28748 with distance 8.630072731695467.\nINFO:cityseer.graph:Linking transport node 47471 to street node 28749 with distance 66.58963224110181.\nINFO:cityseer.graph:Added transport node 47471 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47472 to street node 28602 with distance 67.98887421437442.\nINFO:cityseer.graph:Linking transport node 47472 to street node 28603 with distance 22.958822922622822.\nINFO:cityseer.graph:Added transport node 47472 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47473 to street node 23922 with distance 15.646112705798487.\nINFO:cityseer.graph:Added transport node 47473 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47474 to street node 28604 with distance 33.968667885151845.\nINFO:cityseer.graph:Linking transport node 47474 to street node 28749 with distance 63.38489037855976.\nINFO:cityseer.graph:Added transport node 47474 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47475 to street node 26823 with distance 37.082463083373554.\nINFO:cityseer.graph:Added transport node 47475 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47476 to street node 28602 with distance 69.5364778890941.\nINFO:cityseer.graph:Linking transport node 47476 to street node 28603 with distance 18.6905937055688.\nINFO:cityseer.graph:Added transport node 47476 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47477 to street node 28604 with distance 31.75167249605801.\nINFO:cityseer.graph:Linking transport node 47477 to street node 28749 with distance 63.97583701193273.\nINFO:cityseer.graph:Added transport node 47477 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47478 to street node 14349 with distance 172.6213934148985.\nINFO:cityseer.graph:Added transport node 47478 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47479 to street node 17431 with distance 21.57846155048181.\nINFO:cityseer.graph:Linking transport node 47479 to street node 40132 with distance 99.68160927835258.\nINFO:cityseer.graph:Added transport node 47479 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47480 to street node 17430 with distance 80.64317782356731.\nINFO:cityseer.graph:Added transport node 47480 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47481 to street node 17430 with distance 103.64947739383013.\nINFO:cityseer.graph:Linking transport node 47481 to street node 17431 with distance 26.51637986097109.\nINFO:cityseer.graph:Added transport node 47481 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47482 to street node 17423 with distance 32.483029822308595.\nINFO:cityseer.graph:Linking transport node 47482 to street node 17430 with distance 131.17612151119877.\nINFO:cityseer.graph:Added transport node 47482 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47483 to street node 27542 with distance 15.318353389640208.\nINFO:cityseer.graph:Added transport node 47483 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47484 to street node 17430 with distance 29.260050851094388.\nINFO:cityseer.graph:Added transport node 47484 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47485 to street node 15708 with distance 20.54666859508889.\nINFO:cityseer.graph:Linking transport node 47485 to street node 15717 with distance 27.559421065459784.\nINFO:cityseer.graph:Added transport node 47485 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47486 to street node 17423 with distance 31.41901492944737.\nINFO:cityseer.graph:Linking transport node 47486 to street node 17430 with distance 143.42251133936716.\nINFO:cityseer.graph:Added transport node 47486 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47487 to street node 3207 with distance 120.05649508434585.\nINFO:cityseer.graph:Linking transport node 47487 to street node 3208 with distance 24.138711972938577.\nINFO:cityseer.graph:Added transport node 47487 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47488 to street node 15161 with distance 74.18212576168854.\nINFO:cityseer.graph:Linking transport node 47488 to street node 18941 with distance 51.52146506544181.\nINFO:cityseer.graph:Added transport node 47488 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47489 to street node 8708 with distance 19.592675838459034.\nINFO:cityseer.graph:Linking transport node 47489 to street node 8710 with distance 43.054126649740105.\nINFO:cityseer.graph:Added transport node 47489 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47490 to street node 7598 with distance 186.32209057068195.\nINFO:cityseer.graph:Linking transport node 47490 to street node 7599 with distance 58.18001130133337.\nINFO:cityseer.graph:Added transport node 47490 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47491 to street node 13640 with distance 66.86375114791957.\nINFO:cityseer.graph:Linking transport node 47491 to street node 13641 with distance 47.489668030993556.\nINFO:cityseer.graph:Added transport node 47491 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47492 to street node 30028 with distance 283.9492594954015.\nINFO:cityseer.graph:Linking transport node 47492 to street node 30030 with distance 136.026919608429.\nINFO:cityseer.graph:Added transport node 47492 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47493 to street node 16528 with distance 52.04458036236855.\nINFO:cityseer.graph:Added transport node 47493 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47494 to street node 28339 with distance 37.17296820916659.\nINFO:cityseer.graph:Linking transport node 47494 to street node 32737 with distance 37.708128428045086.\nINFO:cityseer.graph:Added transport node 47494 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47495 to street node 15764 with distance 80.8861234983515.\nINFO:cityseer.graph:Added transport node 47495 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47496 to street node 23132 with distance 48.20934536898511.\nINFO:cityseer.graph:Added transport node 47496 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47497 to street node 26378 with distance 30.787517381297043.\nINFO:cityseer.graph:Linking transport node 47497 to street node 26379 with distance 11.752143622214563.\nINFO:cityseer.graph:Added transport node 47497 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47498 to street node 26122 with distance 21.79253885887108.\nINFO:cityseer.graph:Linking transport node 47498 to street node 26125 with distance 29.34591560572887.\nINFO:cityseer.graph:Added transport node 47498 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47499 to street node 28719 with distance 14.479826153268574.\nINFO:cityseer.graph:Linking transport node 47499 to street node 28721 with distance 17.305193310498098.\nINFO:cityseer.graph:Added transport node 47499 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47500 to street node 32397 with distance 121.72357552825707.\nINFO:cityseer.graph:Linking transport node 47500 to street node 32406 with distance 19.812160527744922.\nINFO:cityseer.graph:Added transport node 47500 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47501 to street node 39093 with distance 44.2154386695051.\nINFO:cityseer.graph:Linking transport node 47501 to street node 39094 with distance 45.20364531849167.\nINFO:cityseer.graph:Added transport node 47501 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47502 to street node 28748 with distance 8.630072731695467.\nINFO:cityseer.graph:Linking transport node 47502 to street node 28749 with distance 66.58963224110181.\nINFO:cityseer.graph:Added transport node 47502 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47503 to street node 17472 with distance 49.69892046314459.\nINFO:cityseer.graph:Linking transport node 47503 to street node 17473 with distance 29.896559020876385.\nINFO:cityseer.graph:Added transport node 47503 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47504 to street node 17472 with distance 17.731901368927666.\nINFO:cityseer.graph:Linking transport node 47504 to street node 27309 with distance 35.71105848761543.\nINFO:cityseer.graph:Added transport node 47504 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47505 to street node 39178 with distance 16.36535995725905.\nINFO:cityseer.graph:Added transport node 47505 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47506 to street node 26619 with distance 8.343630453266684.\nINFO:cityseer.graph:Added transport node 47506 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47507 to street node 26621 with distance 85.63559866194764.\nINFO:cityseer.graph:Added transport node 47507 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47508 to street node 26621 with distance 85.63559866194764.\nINFO:cityseer.graph:Added transport node 47508 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47509 to street node 8889 with distance 22.27674541077375.\nINFO:cityseer.graph:Linking transport node 47509 to street node 8892 with distance 38.16365499838362.\nINFO:cityseer.graph:Added transport node 47509 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47510 to street node 28748 with distance 5.520700189621914.\nINFO:cityseer.graph:Linking transport node 47510 to street node 28749 with distance 73.02743271255277.\nINFO:cityseer.graph:Added transport node 47510 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47511 to street node 28738 with distance 13.302421284251507.\nINFO:cityseer.graph:Linking transport node 47511 to street node 30431 with distance 26.85001561694103.\nINFO:cityseer.graph:Added transport node 47511 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47512 to street node 28106 with distance 43.454958568055595.\nINFO:cityseer.graph:Linking transport node 47512 to street node 32756 with distance 21.452354496094685.\nINFO:cityseer.graph:Added transport node 47512 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47513 to street node 26038 with distance 8.221454519762045.\nINFO:cityseer.graph:Linking transport node 47513 to street node 26040 with distance 18.85650400385342.\nINFO:cityseer.graph:Added transport node 47513 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47514 to street node 26038 with distance 22.884059754525612.\nINFO:cityseer.graph:Linking transport node 47514 to street node 26039 with distance 14.724397120165264.\nINFO:cityseer.graph:Added transport node 47514 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47515 to street node 20908 with distance 13.978230343848434.\nINFO:cityseer.graph:Linking transport node 47515 to street node 26037 with distance 43.095274378966295.\nINFO:cityseer.graph:Added transport node 47515 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47516 to street node 26035 with distance 1.1723799145022136.\nINFO:cityseer.graph:Added transport node 47516 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47517 to street node 25774 with distance 41.56513613983385.\nINFO:cityseer.graph:Linking transport node 47517 to street node 26044 with distance 34.1423804866124.\nINFO:cityseer.graph:Added transport node 47517 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47518 to street node 29916 with distance 37.72432793357521.\nINFO:cityseer.graph:Linking transport node 47518 to street node 34180 with distance 26.487761714980426.\nINFO:cityseer.graph:Added transport node 47518 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47519 to street node 34180 with distance 41.170764531441385.\nINFO:cityseer.graph:Linking transport node 47519 to street node 38804 with distance 50.273469016767706.\nINFO:cityseer.graph:Added transport node 47519 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47520 to street node 34180 with distance 31.57543303484106.\nINFO:cityseer.graph:Added transport node 47520 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47521 to street node 31864 with distance 50.425751319804114.\nINFO:cityseer.graph:Linking transport node 47521 to street node 31865 with distance 50.966188910806565.\nINFO:cityseer.graph:Added transport node 47521 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47522 to street node 31865 with distance 37.25589050823154.\nINFO:cityseer.graph:Linking transport node 47522 to street node 36352 with distance 52.43955567226881.\nINFO:cityseer.graph:Added transport node 47522 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47523 to street node 4142 with distance 72.97053926469844.\nINFO:cityseer.graph:Linking transport node 47523 to street node 31865 with distance 33.00912019413542.\nINFO:cityseer.graph:Added transport node 47523 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47524 to street node 31864 with distance 62.96288332827868.\nINFO:cityseer.graph:Linking transport node 47524 to street node 31866 with distance 17.204744411176986.\nINFO:cityseer.graph:Added transport node 47524 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47525 to street node 31862 with distance 84.63699841102434.\nINFO:cityseer.graph:Linking transport node 47525 to street node 31866 with distance 9.30343809889562.\nINFO:cityseer.graph:Added transport node 47525 and created 4 link edges.\n 31%|███       | 397/1272 [00:00&lt;00:01, 708.83it/s]INFO:cityseer.graph:Linking transport node 47526 to street node 36356 with distance 47.21227501480724.\nINFO:cityseer.graph:Linking transport node 47526 to street node 36359 with distance 68.4034801418333.\nINFO:cityseer.graph:Added transport node 47526 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47527 to street node 36356 with distance 18.18795695758339.\nINFO:cityseer.graph:Linking transport node 47527 to street node 36360 with distance 68.7142815136345.\nINFO:cityseer.graph:Added transport node 47527 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47528 to street node 36356 with distance 7.036317198526861.\nINFO:cityseer.graph:Added transport node 47528 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47529 to street node 29594 with distance 56.1486783788356.\nINFO:cityseer.graph:Linking transport node 47529 to street node 29595 with distance 31.647984280102623.\nINFO:cityseer.graph:Added transport node 47529 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47530 to street node 29591 with distance 73.58274548266064.\nINFO:cityseer.graph:Linking transport node 47530 to street node 29595 with distance 30.228557915918802.\nINFO:cityseer.graph:Added transport node 47530 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47531 to street node 23733 with distance 30.229560483765194.\nINFO:cityseer.graph:Added transport node 47531 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47532 to street node 31150 with distance 13.576368650522.\nINFO:cityseer.graph:Linking transport node 47532 to street node 31151 with distance 80.56929542703841.\nINFO:cityseer.graph:Added transport node 47532 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47533 to street node 31150 with distance 47.72075494911879.\nINFO:cityseer.graph:Linking transport node 47533 to street node 31153 with distance 58.22560984119805.\nINFO:cityseer.graph:Added transport node 47533 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47534 to street node 28956 with distance 63.661998490019535.\nINFO:cityseer.graph:Linking transport node 47534 to street node 31151 with distance 55.41542338927451.\nINFO:cityseer.graph:Added transport node 47534 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47535 to street node 31160 with distance 62.21444401195574.\nINFO:cityseer.graph:Added transport node 47535 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47536 to street node 31160 with distance 49.434501941571966.\nINFO:cityseer.graph:Added transport node 47536 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47537 to street node 24889 with distance 34.94074537080657.\nINFO:cityseer.graph:Linking transport node 47537 to street node 24890 with distance 37.41395292225971.\nINFO:cityseer.graph:Added transport node 47537 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47538 to street node 24888 with distance 33.70144520454563.\nINFO:cityseer.graph:Added transport node 47538 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47539 to street node 31158 with distance 14.53465799062129.\nINFO:cityseer.graph:Linking transport node 47539 to street node 31161 with distance 55.13043464890598.\nINFO:cityseer.graph:Added transport node 47539 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47540 to street node 24180 with distance 53.547509329827946.\nINFO:cityseer.graph:Linking transport node 47540 to street node 31156 with distance 59.89502385733762.\nINFO:cityseer.graph:Added transport node 47540 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47541 to street node 24180 with distance 54.42373823521847.\nINFO:cityseer.graph:Added transport node 47541 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47542 to street node 28975 with distance 55.45601922659515.\nINFO:cityseer.graph:Linking transport node 47542 to street node 28976 with distance 17.380429766150158.\nINFO:cityseer.graph:Added transport node 47542 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47543 to street node 29312 with distance 52.71116615398389.\nINFO:cityseer.graph:Added transport node 47543 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47544 to street node 24179 with distance 33.477370710815144.\nINFO:cityseer.graph:Added transport node 47544 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47545 to street node 22488 with distance 36.23055470573748.\nINFO:cityseer.graph:Linking transport node 47545 to street node 22494 with distance 52.10957898153924.\nINFO:cityseer.graph:Added transport node 47545 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47546 to street node 22488 with distance 34.641740572729596.\nINFO:cityseer.graph:Linking transport node 47546 to street node 22490 with distance 51.25836201788895.\nINFO:cityseer.graph:Added transport node 47546 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47547 to street node 22488 with distance 15.998086136318319.\nINFO:cityseer.graph:Added transport node 47547 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47548 to street node 22488 with distance 21.491209693889605.\nINFO:cityseer.graph:Linking transport node 47548 to street node 22490 with distance 63.99099575677314.\nINFO:cityseer.graph:Added transport node 47548 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47549 to street node 29624 with distance 33.97356502196519.\nINFO:cityseer.graph:Linking transport node 47549 to street node 33902 with distance 34.83343817747374.\nINFO:cityseer.graph:Added transport node 47549 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47550 to street node 43126 with distance 15.43673064188869.\nINFO:cityseer.graph:Added transport node 47550 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47551 to street node 43126 with distance 13.864477851506381.\nINFO:cityseer.graph:Added transport node 47551 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47552 to street node 31843 with distance 16.328804848456837.\nINFO:cityseer.graph:Linking transport node 47552 to street node 31845 with distance 28.41259471169515.\nINFO:cityseer.graph:Added transport node 47552 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47553 to street node 31843 with distance 11.117175238745565.\nINFO:cityseer.graph:Added transport node 47553 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47554 to street node 39539 with distance 14.233231785205488.\nINFO:cityseer.graph:Linking transport node 47554 to street node 39541 with distance 91.11272424055099.\nINFO:cityseer.graph:Added transport node 47554 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47555 to street node 40304 with distance 141.6216864546765.\nINFO:cityseer.graph:Linking transport node 47555 to street node 44492 with distance 73.88647767432794.\nINFO:cityseer.graph:Added transport node 47555 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47556 to street node 41329 with distance 104.23179849903255.\nINFO:cityseer.graph:Linking transport node 47556 to street node 44499 with distance 30.723281941402593.\nINFO:cityseer.graph:Added transport node 47556 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47557 to street node 39539 with distance 95.32129963314686.\nINFO:cityseer.graph:Added transport node 47557 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47558 to street node 23291 with distance 49.58664330725199.\nINFO:cityseer.graph:Linking transport node 47558 to street node 23293 with distance 96.7706515196186.\nINFO:cityseer.graph:Added transport node 47558 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47559 to street node 23293 with distance 82.53508960545001.\nINFO:cityseer.graph:Added transport node 47559 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47560 to street node 23291 with distance 28.58664787480343.\nINFO:cityseer.graph:Linking transport node 47560 to street node 23293 with distance 103.06565842442153.\nINFO:cityseer.graph:Added transport node 47560 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47561 to street node 21912 with distance 75.87036179430562.\nINFO:cityseer.graph:Added transport node 47561 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47562 to street node 23293 with distance 82.04526464560148.\nINFO:cityseer.graph:Added transport node 47562 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47563 to street node 42714 with distance 82.57959002767902.\nINFO:cityseer.graph:Linking transport node 47563 to street node 42969 with distance 17.140354423246965.\nINFO:cityseer.graph:Added transport node 47563 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47564 to street node 42714 with distance 94.33717848372814.\nINFO:cityseer.graph:Linking transport node 47564 to street node 42969 with distance 7.4715071346854485.\nINFO:cityseer.graph:Added transport node 47564 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47565 to street node 8579 with distance 66.62876283898079.\nINFO:cityseer.graph:Linking transport node 47565 to street node 8580 with distance 42.9156100460043.\nINFO:cityseer.graph:Added transport node 47565 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47566 to street node 8579 with distance 62.39417461259712.\nINFO:cityseer.graph:Linking transport node 47566 to street node 8580 with distance 47.04493038039146.\nINFO:cityseer.graph:Added transport node 47566 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47567 to street node 6442 with distance 73.72929557833149.\nINFO:cityseer.graph:Linking transport node 47567 to street node 8580 with distance 53.78320828322693.\nINFO:cityseer.graph:Added transport node 47567 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47568 to street node 8580 with distance 57.21998392261805.\nINFO:cityseer.graph:Linking transport node 47568 to street node 8982 with distance 29.566893376773482.\nINFO:cityseer.graph:Added transport node 47568 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47569 to street node 3179 with distance 25.008098795621194.\nINFO:cityseer.graph:Linking transport node 47569 to street node 3186 with distance 19.29652360271746.\nINFO:cityseer.graph:Added transport node 47569 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47570 to street node 8579 with distance 55.81457195958244.\nINFO:cityseer.graph:Linking transport node 47570 to street node 8580 with distance 53.07625218955762.\nINFO:cityseer.graph:Added transport node 47570 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47571 to street node 6712 with distance 40.58295560568387.\nINFO:cityseer.graph:Linking transport node 47571 to street node 6723 with distance 41.172936639012875.\nINFO:cityseer.graph:Added transport node 47571 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47572 to street node 6727 with distance 15.75736920638153.\nINFO:cityseer.graph:Added transport node 47572 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47573 to street node 6721 with distance 120.29592642810502.\nINFO:cityseer.graph:Linking transport node 47573 to street node 6723 with distance 11.454075401060267.\nINFO:cityseer.graph:Added transport node 47573 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47574 to street node 6724 with distance 41.278440704888816.\nINFO:cityseer.graph:Added transport node 47574 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47575 to street node 6723 with distance 7.870312046813355.\nINFO:cityseer.graph:Added transport node 47575 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47576 to street node 43568 with distance 11.050461661319588.\nINFO:cityseer.graph:Linking transport node 47576 to street node 43569 with distance 33.30803626300225.\nINFO:cityseer.graph:Added transport node 47576 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47577 to street node 43568 with distance 14.620758265367403.\nINFO:cityseer.graph:Linking transport node 47577 to street node 43569 with distance 28.84427167758126.\nINFO:cityseer.graph:Added transport node 47577 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47578 to street node 43567 with distance 47.71394570024773.\nINFO:cityseer.graph:Linking transport node 47578 to street node 43569 with distance 24.224721441765276.\nINFO:cityseer.graph:Added transport node 47578 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47579 to street node 43568 with distance 12.201271599417632.\nINFO:cityseer.graph:Linking transport node 47579 to street node 43586 with distance 23.813389412767826.\nINFO:cityseer.graph:Added transport node 47579 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47580 to street node 45420 with distance 23.716124066995647.\nINFO:cityseer.graph:Linking transport node 47580 to street node 45829 with distance 72.54666424171891.\nINFO:cityseer.graph:Added transport node 47580 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47581 to street node 34066 with distance 114.22453436820503.\nINFO:cityseer.graph:Linking transport node 47581 to street node 45420 with distance 0.5765175404298987.\nINFO:cityseer.graph:Added transport node 47581 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47582 to street node 45420 with distance 34.14392166819304.\nINFO:cityseer.graph:Linking transport node 47582 to street node 45829 with distance 51.71479852197496.\nINFO:cityseer.graph:Added transport node 47582 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47583 to street node 45830 with distance 68.27782409620198.\nINFO:cityseer.graph:Linking transport node 47583 to street node 45831 with distance 48.80049131136634.\nINFO:cityseer.graph:Added transport node 47583 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47584 to street node 22488 with distance 34.80755011995387.\nINFO:cityseer.graph:Linking transport node 47584 to street node 22494 with distance 52.6851066322738.\nINFO:cityseer.graph:Added transport node 47584 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47585 to street node 17472 with distance 49.69892046314459.\nINFO:cityseer.graph:Linking transport node 47585 to street node 17473 with distance 29.896559020876385.\nINFO:cityseer.graph:Added transport node 47585 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47586 to street node 26619 with distance 8.343630453266684.\nINFO:cityseer.graph:Added transport node 47586 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47587 to street node 26038 with distance 8.221454519762045.\nINFO:cityseer.graph:Linking transport node 47587 to street node 26040 with distance 18.85650400385342.\nINFO:cityseer.graph:Added transport node 47587 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47588 to street node 29916 with distance 37.72432793357521.\nINFO:cityseer.graph:Linking transport node 47588 to street node 34180 with distance 26.487761714980426.\nINFO:cityseer.graph:Added transport node 47588 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47589 to street node 31864 with distance 50.425751319804114.\nINFO:cityseer.graph:Linking transport node 47589 to street node 31865 with distance 50.966188910806565.\nINFO:cityseer.graph:Added transport node 47589 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47590 to street node 36356 with distance 47.21227501480724.\nINFO:cityseer.graph:Linking transport node 47590 to street node 36359 with distance 68.4034801418333.\nINFO:cityseer.graph:Added transport node 47590 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47591 to street node 31150 with distance 13.576368650522.\nINFO:cityseer.graph:Linking transport node 47591 to street node 31151 with distance 80.56929542703841.\nINFO:cityseer.graph:Added transport node 47591 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47592 to street node 31160 with distance 62.21444401195574.\nINFO:cityseer.graph:Added transport node 47592 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47593 to street node 43126 with distance 15.43673064188869.\nINFO:cityseer.graph:Added transport node 47593 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47594 to street node 31843 with distance 16.328804848456837.\nINFO:cityseer.graph:Linking transport node 47594 to street node 31845 with distance 28.41259471169515.\nINFO:cityseer.graph:Added transport node 47594 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47595 to street node 39539 with distance 14.233231785205488.\nINFO:cityseer.graph:Linking transport node 47595 to street node 39541 with distance 91.11272424055099.\nINFO:cityseer.graph:Added transport node 47595 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47596 to street node 23291 with distance 49.58664330725199.\nINFO:cityseer.graph:Linking transport node 47596 to street node 23293 with distance 96.7706515196186.\nINFO:cityseer.graph:Added transport node 47596 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47597 to street node 42714 with distance 82.57959002767902.\nINFO:cityseer.graph:Linking transport node 47597 to street node 42969 with distance 17.140354423246965.\nINFO:cityseer.graph:Added transport node 47597 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47598 to street node 8579 with distance 66.62876283898079.\nINFO:cityseer.graph:Linking transport node 47598 to street node 8580 with distance 42.9156100460043.\nINFO:cityseer.graph:Added transport node 47598 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47599 to street node 6712 with distance 40.58295560568387.\nINFO:cityseer.graph:Linking transport node 47599 to street node 6723 with distance 41.172936639012875.\nINFO:cityseer.graph:Added transport node 47599 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47600 to street node 43568 with distance 11.050461661319588.\nINFO:cityseer.graph:Linking transport node 47600 to street node 43569 with distance 33.30803626300225.\nINFO:cityseer.graph:Added transport node 47600 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47601 to street node 45420 with distance 23.716124066995647.\nINFO:cityseer.graph:Linking transport node 47601 to street node 45829 with distance 72.54666424171891.\nINFO:cityseer.graph:Added transport node 47601 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47602 to street node 39404 with distance 64.8731165603756.\nINFO:cityseer.graph:Linking transport node 47602 to street node 39410 with distance 57.28271394870832.\nINFO:cityseer.graph:Added transport node 47602 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47603 to street node 39410 with distance 31.52191613842633.\nINFO:cityseer.graph:Added transport node 47603 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47604 to street node 39410 with distance 21.781567470039843.\nINFO:cityseer.graph:Linking transport node 47604 to street node 45687 with distance 55.31095652716642.\nINFO:cityseer.graph:Added transport node 47604 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47605 to street node 39404 with distance 34.289663109879015.\nINFO:cityseer.graph:Linking transport node 47605 to street node 39410 with distance 39.759470883896135.\nINFO:cityseer.graph:Added transport node 47605 and created 4 link edges.\n 38%|███▊      | 477/1272 [00:00&lt;00:01, 658.63it/s]INFO:cityseer.graph:Linking transport node 47606 to street node 39410 with distance 25.15837744826737.\nINFO:cityseer.graph:Linking transport node 47606 to street node 45687 with distance 54.81962750277273.\nINFO:cityseer.graph:Added transport node 47606 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47607 to street node 39401 with distance 56.809604113088206.\nINFO:cityseer.graph:Linking transport node 47607 to street node 39402 with distance 33.021904396220975.\nINFO:cityseer.graph:Added transport node 47607 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47608 to street node 39401 with distance 74.30846757645394.\nINFO:cityseer.graph:Linking transport node 47608 to street node 39402 with distance 10.802133220325702.\nINFO:cityseer.graph:Added transport node 47608 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47609 to street node 39402 with distance 24.414499299729172.\nINFO:cityseer.graph:Added transport node 47609 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47610 to street node 44412 with distance 74.59081402712854.\nINFO:cityseer.graph:Linking transport node 47610 to street node 44414 with distance 83.00714104139816.\nINFO:cityseer.graph:Added transport node 47610 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47611 to street node 44412 with distance 17.906068741220103.\nINFO:cityseer.graph:Linking transport node 47611 to street node 44414 with distance 91.49062134769768.\nINFO:cityseer.graph:Added transport node 47611 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47612 to street node 3761 with distance 45.76271476707091.\nINFO:cityseer.graph:Linking transport node 47612 to street node 42425 with distance 21.910196351203403.\nINFO:cityseer.graph:Added transport node 47612 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47613 to street node 42423 with distance 21.802005021863923.\nINFO:cityseer.graph:Linking transport node 47613 to street node 42425 with distance 19.937546486293982.\nINFO:cityseer.graph:Added transport node 47613 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47614 to street node 3761 with distance 55.217579637363315.\nINFO:cityseer.graph:Linking transport node 47614 to street node 42425 with distance 12.675546927943271.\nINFO:cityseer.graph:Added transport node 47614 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47615 to street node 15104 with distance 192.158271488772.\nINFO:cityseer.graph:Linking transport node 47615 to street node 17118 with distance 28.573420104861086.\nINFO:cityseer.graph:Added transport node 47615 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47616 to street node 15104 with distance 203.0521330956319.\nINFO:cityseer.graph:Linking transport node 47616 to street node 17118 with distance 17.657708974319938.\nINFO:cityseer.graph:Added transport node 47616 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47617 to street node 15104 with distance 184.8889552018496.\nINFO:cityseer.graph:Linking transport node 47617 to street node 17118 with distance 35.77659280615206.\nINFO:cityseer.graph:Added transport node 47617 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47618 to street node 8602 with distance 220.98106639031334.\nINFO:cityseer.graph:Linking transport node 47618 to street node 20008 with distance 77.8165690793819.\nINFO:cityseer.graph:Added transport node 47618 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47619 to street node 8602 with distance 287.2187404486105.\nINFO:cityseer.graph:Added transport node 47619 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47620 to street node 8602 with distance 254.72544364644563.\nINFO:cityseer.graph:Linking transport node 47620 to street node 20007 with distance 47.573297104929594.\nINFO:cityseer.graph:Added transport node 47620 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47621 to street node 7085 with distance 6.071953310141414.\nINFO:cityseer.graph:Added transport node 47621 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47622 to street node 11767 with distance 16.010705881573063.\nINFO:cityseer.graph:Added transport node 47622 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47623 to street node 7085 with distance 40.746409960958005.\nINFO:cityseer.graph:Added transport node 47623 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47624 to street node 7085 with distance 37.903354086346006.\nINFO:cityseer.graph:Added transport node 47624 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47625 to street node 22516 with distance 18.372319409940044.\nINFO:cityseer.graph:Added transport node 47625 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47626 to street node 22514 with distance 13.5645654196117.\nINFO:cityseer.graph:Linking transport node 47626 to street node 22515 with distance 48.387167802207756.\nINFO:cityseer.graph:Added transport node 47626 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47627 to street node 22516 with distance 25.032003680569037.\nINFO:cityseer.graph:Added transport node 47627 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47628 to street node 23874 with distance 13.984367845173482.\nINFO:cityseer.graph:Linking transport node 47628 to street node 23875 with distance 52.76212413982614.\nINFO:cityseer.graph:Added transport node 47628 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47629 to street node 23853 with distance 148.64393908585748.\nINFO:cityseer.graph:Linking transport node 47629 to street node 23854 with distance 39.85636881786027.\nINFO:cityseer.graph:Added transport node 47629 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47630 to street node 23853 with distance 138.1716920509155.\nINFO:cityseer.graph:Linking transport node 47630 to street node 23854 with distance 50.508272349336416.\nINFO:cityseer.graph:Added transport node 47630 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47631 to street node 23853 with distance 141.17269679144007.\nINFO:cityseer.graph:Added transport node 47631 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47632 to street node 23842 with distance 39.130035158641924.\nINFO:cityseer.graph:Added transport node 47632 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47633 to street node 23842 with distance 9.014971382184694.\nINFO:cityseer.graph:Linking transport node 47633 to street node 23845 with distance 169.8929507261518.\nINFO:cityseer.graph:Added transport node 47633 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47634 to street node 23842 with distance 45.73940024322494.\nINFO:cityseer.graph:Linking transport node 47634 to street node 23844 with distance 55.14972797116629.\nINFO:cityseer.graph:Added transport node 47634 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47635 to street node 12981 with distance 29.148656648016317.\nINFO:cityseer.graph:Linking transport node 47635 to street node 12984 with distance 8.70967273146147.\nINFO:cityseer.graph:Added transport node 47635 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47636 to street node 12981 with distance 31.8625507831192.\nINFO:cityseer.graph:Linking transport node 47636 to street node 23238 with distance 30.028197039316805.\nINFO:cityseer.graph:Added transport node 47636 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47637 to street node 12979 with distance 20.64946072826662.\nINFO:cityseer.graph:Linking transport node 47637 to street node 12981 with distance 14.874867282070248.\nINFO:cityseer.graph:Added transport node 47637 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47638 to street node 12984 with distance 14.074979722334286.\nINFO:cityseer.graph:Added transport node 47638 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47639 to street node 22210 with distance 8.776234697269462.\nINFO:cityseer.graph:Linking transport node 47639 to street node 23835 with distance 63.503816118447816.\nINFO:cityseer.graph:Added transport node 47639 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47640 to street node 23821 with distance 25.162014450554498.\nINFO:cityseer.graph:Linking transport node 47640 to street node 23822 with distance 21.003956246319962.\nINFO:cityseer.graph:Added transport node 47640 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47641 to street node 22645 with distance 35.26946428149325.\nINFO:cityseer.graph:Linking transport node 47641 to street node 23819 with distance 24.77941226274471.\nINFO:cityseer.graph:Added transport node 47641 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47642 to street node 23819 with distance 11.026890690072378.\nINFO:cityseer.graph:Linking transport node 47642 to street node 23820 with distance 47.495214204298605.\nINFO:cityseer.graph:Added transport node 47642 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47643 to street node 23819 with distance 16.791431793002122.\nINFO:cityseer.graph:Added transport node 47643 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47644 to street node 20945 with distance 11.828817398102577.\nINFO:cityseer.graph:Added transport node 47644 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47645 to street node 20945 with distance 17.668372504418805.\nINFO:cityseer.graph:Linking transport node 47645 to street node 23823 with distance 34.43828142498176.\nINFO:cityseer.graph:Added transport node 47645 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47646 to street node 20943 with distance 36.58891051307598.\nINFO:cityseer.graph:Linking transport node 47646 to street node 20945 with distance 15.419702687299054.\nINFO:cityseer.graph:Added transport node 47646 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47647 to street node 23805 with distance 15.795498686642349.\nINFO:cityseer.graph:Linking transport node 47647 to street node 23809 with distance 15.28008889922143.\nINFO:cityseer.graph:Added transport node 47647 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47648 to street node 23796 with distance 13.150410471015988.\nINFO:cityseer.graph:Linking transport node 47648 to street node 23797 with distance 40.810884584362206.\nINFO:cityseer.graph:Added transport node 47648 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47649 to street node 23793 with distance 67.04404496772366.\nINFO:cityseer.graph:Linking transport node 47649 to street node 23796 with distance 9.709541992459398.\nINFO:cityseer.graph:Added transport node 47649 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47650 to street node 23807 with distance 26.00752589207118.\nINFO:cityseer.graph:Added transport node 47650 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47651 to street node 23809 with distance 17.650214091555174.\nINFO:cityseer.graph:Linking transport node 47651 to street node 38835 with distance 44.8213476454946.\nINFO:cityseer.graph:Added transport node 47651 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47652 to street node 17609 with distance 25.60447607859165.\nINFO:cityseer.graph:Linking transport node 47652 to street node 17613 with distance 60.77248886946402.\nINFO:cityseer.graph:Added transport node 47652 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47653 to street node 23774 with distance 7.370843788563727.\nINFO:cityseer.graph:Linking transport node 47653 to street node 23776 with distance 37.64613511500374.\nINFO:cityseer.graph:Added transport node 47653 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47654 to street node 23777 with distance 5.475155647850311.\nINFO:cityseer.graph:Linking transport node 47654 to street node 23897 with distance 55.06030782764885.\nINFO:cityseer.graph:Added transport node 47654 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47655 to street node 17609 with distance 13.56673316141074.\nINFO:cityseer.graph:Linking transport node 47655 to street node 17669 with distance 63.41031288854646.\nINFO:cityseer.graph:Added transport node 47655 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47656 to street node 17609 with distance 15.36960968774445.\nINFO:cityseer.graph:Linking transport node 47656 to street node 17613 with distance 64.00016095081192.\nINFO:cityseer.graph:Added transport node 47656 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47657 to street node 22114 with distance 39.6231273750352.\nINFO:cityseer.graph:Linking transport node 47657 to street node 22115 with distance 63.5964157750855.\nINFO:cityseer.graph:Added transport node 47657 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47658 to street node 24180 with distance 2.097454463404752.\nINFO:cityseer.graph:Added transport node 47658 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47659 to street node 41204 with distance 78.82502120858119.\nINFO:cityseer.graph:Linking transport node 47659 to street node 42150 with distance 21.320067033234256.\nINFO:cityseer.graph:Added transport node 47659 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47660 to street node 42150 with distance 25.486445501560492.\nINFO:cityseer.graph:Added transport node 47660 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47661 to street node 41204 with distance 71.26986803712036.\nINFO:cityseer.graph:Linking transport node 47661 to street node 42150 with distance 45.07064937820574.\nINFO:cityseer.graph:Added transport node 47661 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47662 to street node 33720 with distance 11.529776662591289.\nINFO:cityseer.graph:Added transport node 47662 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47663 to street node 14226 with distance 71.22836731273067.\nINFO:cityseer.graph:Linking transport node 47663 to street node 14227 with distance 17.25581387322946.\nINFO:cityseer.graph:Added transport node 47663 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47664 to street node 26064 with distance 15.32211184748317.\nINFO:cityseer.graph:Linking transport node 47664 to street node 36724 with distance 39.69786164885779.\nINFO:cityseer.graph:Added transport node 47664 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47665 to street node 36724 with distance 42.16465683738167.\nINFO:cityseer.graph:Linking transport node 47665 to street node 36725 with distance 11.62403091037389.\nINFO:cityseer.graph:Added transport node 47665 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47666 to street node 14226 with distance 29.169645198120207.\nINFO:cityseer.graph:Linking transport node 47666 to street node 14230 with distance 39.64918025148232.\nINFO:cityseer.graph:Added transport node 47666 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47667 to street node 26036 with distance 27.55545212339999.\nINFO:cityseer.graph:Added transport node 47667 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47668 to street node 29292 with distance 30.65575939619044.\nINFO:cityseer.graph:Linking transport node 47668 to street node 32748 with distance 29.390417110607647.\nINFO:cityseer.graph:Added transport node 47668 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47669 to street node 29291 with distance 15.30411938962023.\nINFO:cityseer.graph:Linking transport node 47669 to street node 29292 with distance 8.457732582400507.\nINFO:cityseer.graph:Added transport node 47669 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47670 to street node 38025 with distance 16.191673420203777.\nINFO:cityseer.graph:Linking transport node 47670 to street node 38026 with distance 15.823778952176143.\nINFO:cityseer.graph:Added transport node 47670 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47671 to street node 28719 with distance 8.904776681007123.\nINFO:cityseer.graph:Linking transport node 47671 to street node 28721 with distance 23.80662528623689.\nINFO:cityseer.graph:Added transport node 47671 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47672 to street node 29332 with distance 26.05903290071713.\nINFO:cityseer.graph:Linking transport node 47672 to street node 29333 with distance 17.097583217217306.\nINFO:cityseer.graph:Added transport node 47672 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47673 to street node 29850 with distance 32.454864578448834.\nINFO:cityseer.graph:Linking transport node 47673 to street node 35831 with distance 22.15055533115156.\nINFO:cityseer.graph:Added transport node 47673 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47674 to street node 35830 with distance 9.919910929921626.\nINFO:cityseer.graph:Linking transport node 47674 to street node 35832 with distance 70.5541459926018.\nINFO:cityseer.graph:Added transport node 47674 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47675 to street node 29854 with distance 29.404427766573882.\nINFO:cityseer.graph:Added transport node 47675 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47676 to street node 31614 with distance 11.58304119190847.\nINFO:cityseer.graph:Linking transport node 47676 to street node 35831 with distance 49.16903114821216.\nINFO:cityseer.graph:Added transport node 47676 and created 4 link edges.\n 43%|████▎     | 548/1272 [00:00&lt;00:01, 566.67it/s]INFO:cityseer.graph:Linking transport node 47677 to street node 42721 with distance 23.504928132368622.\nINFO:cityseer.graph:Added transport node 47677 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47678 to street node 20738 with distance 57.92679146247755.\nINFO:cityseer.graph:Linking transport node 47678 to street node 42721 with distance 26.981726201053075.\nINFO:cityseer.graph:Added transport node 47678 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47679 to street node 15717 with distance 20.242733680173558.\nINFO:cityseer.graph:Added transport node 47679 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47680 to street node 8640 with distance 76.80283587053265.\nINFO:cityseer.graph:Linking transport node 47680 to street node 8641 with distance 35.02612924730068.\nINFO:cityseer.graph:Added transport node 47680 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47681 to street node 26354 with distance 15.334786180360245.\nINFO:cityseer.graph:Linking transport node 47681 to street node 26355 with distance 125.61688816538256.\nINFO:cityseer.graph:Added transport node 47681 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47682 to street node 26354 with distance 13.60598382225536.\nINFO:cityseer.graph:Linking transport node 47682 to street node 26356 with distance 132.47187378225297.\nINFO:cityseer.graph:Added transport node 47682 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47683 to street node 26357 with distance 22.65789106172196.\nINFO:cityseer.graph:Added transport node 47683 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47684 to street node 26357 with distance 21.50954959277852.\nINFO:cityseer.graph:Added transport node 47684 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47685 to street node 27939 with distance 15.161796816069025.\nINFO:cityseer.graph:Linking transport node 47685 to street node 34347 with distance 44.39024232105044.\nINFO:cityseer.graph:Added transport node 47685 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47686 to street node 27939 with distance 25.331299869711145.\nINFO:cityseer.graph:Linking transport node 47686 to street node 34347 with distance 37.108010313404506.\nINFO:cityseer.graph:Added transport node 47686 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47687 to street node 33669 with distance 13.31032534543309.\nINFO:cityseer.graph:Linking transport node 47687 to street node 34348 with distance 28.763228610027042.\nINFO:cityseer.graph:Added transport node 47687 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47688 to street node 9383 with distance 32.65248894322117.\nINFO:cityseer.graph:Added transport node 47688 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47689 to street node 28971 with distance 25.773760903277754.\nINFO:cityseer.graph:Linking transport node 47689 to street node 28972 with distance 26.513641690205112.\nINFO:cityseer.graph:Added transport node 47689 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47690 to street node 9386 with distance 13.928486555136143.\nINFO:cityseer.graph:Linking transport node 47690 to street node 34362 with distance 106.91467497452433.\nINFO:cityseer.graph:Added transport node 47690 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47691 to street node 9383 with distance 26.765740648408773.\nINFO:cityseer.graph:Added transport node 47691 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47692 to street node 9388 with distance 16.237479983927432.\nINFO:cityseer.graph:Added transport node 47692 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47693 to street node 34375 with distance 17.271712620144708.\nINFO:cityseer.graph:Added transport node 47693 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47694 to street node 34375 with distance 14.639789608176232.\nINFO:cityseer.graph:Added transport node 47694 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47695 to street node 21995 with distance 38.4811837257865.\nINFO:cityseer.graph:Added transport node 47695 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47696 to street node 30883 with distance 9.508202893805258.\nINFO:cityseer.graph:Linking transport node 47696 to street node 30885 with distance 41.24541599930275.\nINFO:cityseer.graph:Added transport node 47696 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47697 to street node 30881 with distance 55.51825840346079.\nINFO:cityseer.graph:Linking transport node 47697 to street node 30883 with distance 9.02690416406596.\nINFO:cityseer.graph:Added transport node 47697 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47698 to street node 36026 with distance 30.137339055448738.\nINFO:cityseer.graph:Linking transport node 47698 to street node 42241 with distance 13.706041474983536.\nINFO:cityseer.graph:Added transport node 47698 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47699 to street node 25622 with distance 33.496140630937575.\nINFO:cityseer.graph:Linking transport node 47699 to street node 42241 with distance 20.356916594052645.\nINFO:cityseer.graph:Added transport node 47699 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47700 to street node 26307 with distance 14.332967689915705.\nINFO:cityseer.graph:Linking transport node 47700 to street node 26309 with distance 37.03523888456139.\nINFO:cityseer.graph:Added transport node 47700 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47701 to street node 30986 with distance 15.829984716135275.\nINFO:cityseer.graph:Linking transport node 47701 to street node 31826 with distance 22.51947908541347.\nINFO:cityseer.graph:Added transport node 47701 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47702 to street node 30986 with distance 10.88052832360076.\nINFO:cityseer.graph:Linking transport node 47702 to street node 31826 with distance 22.597775817060924.\nINFO:cityseer.graph:Added transport node 47702 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47703 to street node 46402 with distance 114.11831246855175.\nINFO:cityseer.graph:Linking transport node 47703 to street node 46403 with distance 44.087139341596234.\nINFO:cityseer.graph:Added transport node 47703 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47704 to street node 46403 with distance 77.11125331153748.\nINFO:cityseer.graph:Added transport node 47704 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47705 to street node 39404 with distance 60.629103379437.\nINFO:cityseer.graph:Linking transport node 47705 to street node 39410 with distance 55.73424152129951.\nINFO:cityseer.graph:Added transport node 47705 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47706 to street node 44412 with distance 74.59081402712854.\nINFO:cityseer.graph:Linking transport node 47706 to street node 44414 with distance 83.00714104139816.\nINFO:cityseer.graph:Added transport node 47706 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47707 to street node 3761 with distance 45.76271476707091.\nINFO:cityseer.graph:Linking transport node 47707 to street node 42425 with distance 21.910196351203403.\nINFO:cityseer.graph:Added transport node 47707 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47708 to street node 15104 with distance 192.158271488772.\nINFO:cityseer.graph:Linking transport node 47708 to street node 17118 with distance 28.573420104861086.\nINFO:cityseer.graph:Added transport node 47708 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47709 to street node 8602 with distance 220.98106639031334.\nINFO:cityseer.graph:Linking transport node 47709 to street node 20008 with distance 77.8165690793819.\nINFO:cityseer.graph:Added transport node 47709 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47710 to street node 7085 with distance 6.071953310141414.\nINFO:cityseer.graph:Added transport node 47710 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47711 to street node 22516 with distance 18.372319409940044.\nINFO:cityseer.graph:Added transport node 47711 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47712 to street node 23853 with distance 148.64393908585748.\nINFO:cityseer.graph:Linking transport node 47712 to street node 23854 with distance 39.85636881786027.\nINFO:cityseer.graph:Added transport node 47712 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47713 to street node 23842 with distance 39.130035158641924.\nINFO:cityseer.graph:Added transport node 47713 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47714 to street node 12981 with distance 29.148656648016317.\nINFO:cityseer.graph:Linking transport node 47714 to street node 12984 with distance 8.70967273146147.\nINFO:cityseer.graph:Added transport node 47714 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47715 to street node 23821 with distance 25.162014450554498.\nINFO:cityseer.graph:Linking transport node 47715 to street node 23822 with distance 21.003956246319962.\nINFO:cityseer.graph:Added transport node 47715 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47716 to street node 23805 with distance 15.795498686642349.\nINFO:cityseer.graph:Linking transport node 47716 to street node 23809 with distance 15.28008889922143.\nINFO:cityseer.graph:Added transport node 47716 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47717 to street node 17609 with distance 25.60447607859165.\nINFO:cityseer.graph:Linking transport node 47717 to street node 17613 with distance 60.77248886946402.\nINFO:cityseer.graph:Added transport node 47717 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47718 to street node 41204 with distance 78.82502120858119.\nINFO:cityseer.graph:Linking transport node 47718 to street node 42150 with distance 21.320067033234256.\nINFO:cityseer.graph:Added transport node 47718 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47719 to street node 14226 with distance 71.22836731273067.\nINFO:cityseer.graph:Linking transport node 47719 to street node 14227 with distance 17.25581387322946.\nINFO:cityseer.graph:Added transport node 47719 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47720 to street node 29292 with distance 30.65575939619044.\nINFO:cityseer.graph:Linking transport node 47720 to street node 32748 with distance 29.390417110607647.\nINFO:cityseer.graph:Added transport node 47720 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47721 to street node 29850 with distance 32.454864578448834.\nINFO:cityseer.graph:Linking transport node 47721 to street node 35831 with distance 22.15055533115156.\nINFO:cityseer.graph:Added transport node 47721 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47722 to street node 42721 with distance 23.504928132368622.\nINFO:cityseer.graph:Added transport node 47722 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47723 to street node 8640 with distance 76.80283587053265.\nINFO:cityseer.graph:Linking transport node 47723 to street node 8641 with distance 35.02612924730068.\nINFO:cityseer.graph:Added transport node 47723 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47724 to street node 27939 with distance 15.161796816069025.\nINFO:cityseer.graph:Linking transport node 47724 to street node 34347 with distance 44.39024232105044.\nINFO:cityseer.graph:Added transport node 47724 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47725 to street node 9383 with distance 32.65248894322117.\nINFO:cityseer.graph:Added transport node 47725 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47726 to street node 34375 with distance 17.271712620144708.\nINFO:cityseer.graph:Added transport node 47726 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47727 to street node 36026 with distance 30.137339055448738.\nINFO:cityseer.graph:Linking transport node 47727 to street node 42241 with distance 13.706041474983536.\nINFO:cityseer.graph:Added transport node 47727 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47728 to street node 30986 with distance 15.829984716135275.\nINFO:cityseer.graph:Linking transport node 47728 to street node 31826 with distance 22.51947908541347.\nINFO:cityseer.graph:Added transport node 47728 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47729 to street node 46402 with distance 114.11831246855175.\nINFO:cityseer.graph:Linking transport node 47729 to street node 46403 with distance 44.087139341596234.\nINFO:cityseer.graph:Added transport node 47729 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47730 to street node 912 with distance 4.670159815169623.\nINFO:cityseer.graph:Added transport node 47730 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47731 to street node 917 with distance 75.99003731819991.\nINFO:cityseer.graph:Added transport node 47731 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47732 to street node 917 with distance 79.27854412177443.\nINFO:cityseer.graph:Added transport node 47732 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47733 to street node 917 with distance 81.49699524421005.\nINFO:cityseer.graph:Added transport node 47733 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47734 to street node 917 with distance 77.13474140400011.\nINFO:cityseer.graph:Added transport node 47734 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47735 to street node 915 with distance 109.78900171006076.\nINFO:cityseer.graph:Linking transport node 47735 to street node 916 with distance 31.005865415727197.\nINFO:cityseer.graph:Added transport node 47735 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47736 to street node 34220 with distance 56.17602961100904.\nINFO:cityseer.graph:Added transport node 47736 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47737 to street node 34220 with distance 62.22699957491778.\nINFO:cityseer.graph:Linking transport node 47737 to street node 43309 with distance 36.03217159024164.\nINFO:cityseer.graph:Added transport node 47737 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47738 to street node 44966 with distance 12.918114090425398.\nINFO:cityseer.graph:Linking transport node 47738 to street node 45377 with distance 53.32694044727311.\nINFO:cityseer.graph:Added transport node 47738 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47739 to street node 44966 with distance 26.015747903539957.\nINFO:cityseer.graph:Linking transport node 47739 to street node 45377 with distance 44.217004063665144.\nINFO:cityseer.graph:Added transport node 47739 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47740 to street node 34220 with distance 39.439381004881774.\nINFO:cityseer.graph:Linking transport node 47740 to street node 45377 with distance 57.35792258878636.\nINFO:cityseer.graph:Added transport node 47740 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47741 to street node 34375 with distance 18.010346185473008.\nINFO:cityseer.graph:Added transport node 47741 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47742 to street node 9637 with distance 78.934717598917.\nINFO:cityseer.graph:Linking transport node 47742 to street node 9638 with distance 22.739030714504036.\nINFO:cityseer.graph:Added transport node 47742 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47743 to street node 9637 with distance 17.067579205485533.\nINFO:cityseer.graph:Linking transport node 47743 to street node 9639 with distance 114.34981977861389.\nINFO:cityseer.graph:Added transport node 47743 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47744 to street node 9637 with distance 41.70376196857424.\nINFO:cityseer.graph:Linking transport node 47744 to street node 9641 with distance 84.04341619214846.\nINFO:cityseer.graph:Added transport node 47744 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47745 to street node 1925 with distance 208.70159849921353.\nINFO:cityseer.graph:Added transport node 47745 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47746 to street node 38292 with distance 30.134227240982955.\nINFO:cityseer.graph:Added transport node 47746 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47747 to street node 9684 with distance 12.08986684818405.\nINFO:cityseer.graph:Linking transport node 47747 to street node 38294 with distance 46.68664239667892.\nINFO:cityseer.graph:Added transport node 47747 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47748 to street node 9682 with distance 55.36979647171251.\nINFO:cityseer.graph:Linking transport node 47748 to street node 27921 with distance 12.26069542335542.\nINFO:cityseer.graph:Added transport node 47748 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47749 to street node 9682 with distance 33.08979881345659.\nINFO:cityseer.graph:Linking transport node 47749 to street node 38294 with distance 15.273110302097132.\nINFO:cityseer.graph:Added transport node 47749 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47750 to street node 36942 with distance 12.046258645743045.\nINFO:cityseer.graph:Linking transport node 47750 to street node 36943 with distance 18.959476712706103.\nINFO:cityseer.graph:Added transport node 47750 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47751 to street node 36939 with distance 9.333667947459485.\nINFO:cityseer.graph:Linking transport node 47751 to street node 36942 with distance 49.40233215146742.\nINFO:cityseer.graph:Added transport node 47751 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47752 to street node 1925 with distance 204.4031147966044.\nINFO:cityseer.graph:Added transport node 47752 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47753 to street node 20067 with distance 7.160885514757687.\nINFO:cityseer.graph:Added transport node 47753 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47754 to street node 20067 with distance 17.378939555379223.\nINFO:cityseer.graph:Linking transport node 47754 to street node 20069 with distance 31.33386365441354.\nINFO:cityseer.graph:Added transport node 47754 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47755 to street node 30226 with distance 35.20675333029994.\nINFO:cityseer.graph:Added transport node 47755 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47756 to street node 20067 with distance 6.528791500963168.\nINFO:cityseer.graph:Added transport node 47756 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47757 to street node 28339 with distance 33.95991320846781.\nINFO:cityseer.graph:Linking transport node 47757 to street node 28340 with distance 35.30793544652014.\nINFO:cityseer.graph:Added transport node 47757 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47758 to street node 6700 with distance 128.8413409960008.\nINFO:cityseer.graph:Added transport node 47758 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47759 to street node 20315 with distance 22.120479572162726.\nINFO:cityseer.graph:Added transport node 47759 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47760 to street node 20312 with distance 40.56585542144097.\nINFO:cityseer.graph:Linking transport node 47760 to street node 20315 with distance 21.042703361389776.\nINFO:cityseer.graph:Added transport node 47760 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47761 to street node 7930 with distance 167.82539711424104.\nINFO:cityseer.graph:Added transport node 47761 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47762 to street node 8680 with distance 20.067626067892196.\nINFO:cityseer.graph:Added transport node 47762 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47763 to street node 18365 with distance 108.31249853553506.\nINFO:cityseer.graph:Linking transport node 47763 to street node 20135 with distance 79.64802246582953.\nINFO:cityseer.graph:Added transport node 47763 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47764 to street node 26503 with distance 27.440372513683.\nINFO:cityseer.graph:Linking transport node 47764 to street node 30024 with distance 54.40566360020592.\nINFO:cityseer.graph:Added transport node 47764 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47765 to street node 29426 with distance 83.07789832612642.\nINFO:cityseer.graph:Linking transport node 47765 to street node 32265 with distance 10.953006406751795.\nINFO:cityseer.graph:Added transport node 47765 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47766 to street node 29426 with distance 69.29213042306502.\nINFO:cityseer.graph:Linking transport node 47766 to street node 32266 with distance 26.9861592462969.\nINFO:cityseer.graph:Added transport node 47766 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47767 to street node 32253 with distance 63.38350802519557.\nINFO:cityseer.graph:Linking transport node 47767 to street node 32265 with distance 28.409862085207948.\nINFO:cityseer.graph:Added transport node 47767 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47768 to street node 26129 with distance 51.51991952931183.\nINFO:cityseer.graph:Linking transport node 47768 to street node 29425 with distance 41.94187690960435.\nINFO:cityseer.graph:Added transport node 47768 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47769 to street node 26129 with distance 49.65968364004192.\nINFO:cityseer.graph:Linking transport node 47769 to street node 29424 with distance 35.100515914505365.\nINFO:cityseer.graph:Added transport node 47769 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47770 to street node 32253 with distance 60.62004199452851.\nINFO:cityseer.graph:Linking transport node 47770 to street node 32265 with distance 29.93230331476729.\nINFO:cityseer.graph:Added transport node 47770 and created 4 link edges.\n 50%|█████     | 642/1272 [00:00&lt;00:00, 653.85it/s]INFO:cityseer.graph:Linking transport node 47771 to street node 36813 with distance 61.420898742524976.\nINFO:cityseer.graph:Linking transport node 47771 to street node 36814 with distance 0.6805866857073952.\nINFO:cityseer.graph:Added transport node 47771 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47772 to street node 36813 with distance 19.865171401645558.\nINFO:cityseer.graph:Linking transport node 47772 to street node 36814 with distance 55.17304512525652.\nINFO:cityseer.graph:Added transport node 47772 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47773 to street node 36813 with distance 17.96683790232606.\nINFO:cityseer.graph:Linking transport node 47773 to street node 37693 with distance 35.774747057041374.\nINFO:cityseer.graph:Added transport node 47773 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47774 to street node 36812 with distance 53.36711342101183.\nINFO:cityseer.graph:Linking transport node 47774 to street node 36814 with distance 47.122999755669724.\nINFO:cityseer.graph:Added transport node 47774 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47775 to street node 36814 with distance 40.945868982847955.\nINFO:cityseer.graph:Linking transport node 47775 to street node 37705 with distance 44.84889303651337.\nINFO:cityseer.graph:Added transport node 47775 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47776 to street node 36811 with distance 180.63172512033927.\nINFO:cityseer.graph:Linking transport node 47776 to street node 36814 with distance 46.173093045916445.\nINFO:cityseer.graph:Added transport node 47776 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47777 to street node 36813 with distance 34.31680625114423.\nINFO:cityseer.graph:Linking transport node 47777 to street node 36814 with distance 36.83615370968105.\nINFO:cityseer.graph:Added transport node 47777 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47778 to street node 29124 with distance 56.09588802154123.\nINFO:cityseer.graph:Linking transport node 47778 to street node 37711 with distance 40.619241959833985.\nINFO:cityseer.graph:Added transport node 47778 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47779 to street node 37708 with distance 16.282557108567783.\nINFO:cityseer.graph:Linking transport node 47779 to street node 37709 with distance 54.83376858387461.\nINFO:cityseer.graph:Added transport node 47779 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47780 to street node 37711 with distance 19.853119265627505.\nINFO:cityseer.graph:Linking transport node 47780 to street node 37713 with distance 86.45544003992559.\nINFO:cityseer.graph:Added transport node 47780 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47781 to street node 37712 with distance 27.46463384428221.\nINFO:cityseer.graph:Linking transport node 47781 to street node 37713 with distance 77.46815720637622.\nINFO:cityseer.graph:Added transport node 47781 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47782 to street node 29124 with distance 56.38393960148098.\nINFO:cityseer.graph:Linking transport node 47782 to street node 37711 with distance 35.23879713260798.\nINFO:cityseer.graph:Added transport node 47782 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47783 to street node 23748 with distance 75.57072313912047.\nINFO:cityseer.graph:Added transport node 47783 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47784 to street node 24182 with distance 47.088042352678826.\nINFO:cityseer.graph:Linking transport node 47784 to street node 28977 with distance 7.609926212679752.\nINFO:cityseer.graph:Added transport node 47784 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47785 to street node 22488 with distance 39.456539848946456.\nINFO:cityseer.graph:Linking transport node 47785 to street node 22494 with distance 50.76010749479366.\nINFO:cityseer.graph:Added transport node 47785 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47786 to street node 37117 with distance 55.629944777820434.\nINFO:cityseer.graph:Added transport node 47786 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47787 to street node 37117 with distance 91.99857962130555.\nINFO:cityseer.graph:Added transport node 47787 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47788 to street node 37117 with distance 84.96150651116683.\nINFO:cityseer.graph:Added transport node 47788 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47789 to street node 37115 with distance 25.289306775322714.\nINFO:cityseer.graph:Linking transport node 47789 to street node 37116 with distance 74.91876740129624.\nINFO:cityseer.graph:Added transport node 47789 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47790 to street node 37113 with distance 42.196712365723926.\nINFO:cityseer.graph:Linking transport node 47790 to street node 37115 with distance 26.38808552554856.\nINFO:cityseer.graph:Added transport node 47790 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47791 to street node 22292 with distance 71.1515304966098.\nINFO:cityseer.graph:Linking transport node 47791 to street node 29952 with distance 104.96873457353661.\nINFO:cityseer.graph:Added transport node 47791 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47792 to street node 33436 with distance 27.268082450895193.\nINFO:cityseer.graph:Linking transport node 47792 to street node 33437 with distance 58.0121297674142.\nINFO:cityseer.graph:Added transport node 47792 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47793 to street node 22289 with distance 22.640065662920613.\nINFO:cityseer.graph:Linking transport node 47793 to street node 22291 with distance 36.4892088327038.\nINFO:cityseer.graph:Added transport node 47793 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47794 to street node 22291 with distance 193.52965428757605.\nINFO:cityseer.graph:Linking transport node 47794 to street node 22292 with distance 70.83548602122985.\nINFO:cityseer.graph:Added transport node 47794 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47795 to street node 22292 with distance 67.600002763768.\nINFO:cityseer.graph:Linking transport node 47795 to street node 29952 with distance 107.70119602688587.\nINFO:cityseer.graph:Added transport node 47795 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47796 to street node 22292 with distance 31.910185991745013.\nINFO:cityseer.graph:Linking transport node 47796 to street node 29952 with distance 155.69801569672754.\nINFO:cityseer.graph:Added transport node 47796 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47797 to street node 22292 with distance 29.85027499268344.\nINFO:cityseer.graph:Linking transport node 47797 to street node 29952 with distance 156.1166165745006.\nINFO:cityseer.graph:Added transport node 47797 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47798 to street node 22292 with distance 130.09186630377124.\nINFO:cityseer.graph:Linking transport node 47798 to street node 29951 with distance 46.30064364125943.\nINFO:cityseer.graph:Added transport node 47798 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47799 to street node 26683 with distance 43.82750208211161.\nINFO:cityseer.graph:Added transport node 47799 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47800 to street node 22292 with distance 141.2241520940807.\nINFO:cityseer.graph:Linking transport node 47800 to street node 29952 with distance 36.47133394670123.\nINFO:cityseer.graph:Added transport node 47800 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47801 to street node 24915 with distance 69.91027267111066.\nINFO:cityseer.graph:Linking transport node 47801 to street node 29950 with distance 46.45159422203999.\nINFO:cityseer.graph:Added transport node 47801 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47802 to street node 22292 with distance 86.76432138093834.\nINFO:cityseer.graph:Linking transport node 47802 to street node 29952 with distance 87.7872234253366.\nINFO:cityseer.graph:Added transport node 47802 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47803 to street node 29950 with distance 61.66610495006591.\nINFO:cityseer.graph:Linking transport node 47803 to street node 29951 with distance 91.74952503084873.\nINFO:cityseer.graph:Added transport node 47803 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47804 to street node 22292 with distance 137.28168931266399.\nINFO:cityseer.graph:Linking transport node 47804 to street node 29952 with distance 45.5987200104089.\nINFO:cityseer.graph:Added transport node 47804 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47805 to street node 24915 with distance 49.672556674174146.\nINFO:cityseer.graph:Linking transport node 47805 to street node 29950 with distance 56.306344959550145.\nINFO:cityseer.graph:Added transport node 47805 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47806 to street node 22292 with distance 93.19503086647528.\nINFO:cityseer.graph:Linking transport node 47806 to street node 29952 with distance 81.42620307566244.\nINFO:cityseer.graph:Added transport node 47806 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47807 to street node 22292 with distance 62.324809039907485.\nINFO:cityseer.graph:Linking transport node 47807 to street node 29952 with distance 113.43984371530358.\nINFO:cityseer.graph:Added transport node 47807 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47808 to street node 22289 with distance 121.12117949745407.\nINFO:cityseer.graph:Linking transport node 47808 to street node 22292 with distance 46.00766420277316.\nINFO:cityseer.graph:Added transport node 47808 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47809 to street node 22289 with distance 123.0512267441746.\nINFO:cityseer.graph:Linking transport node 47809 to street node 22292 with distance 45.32970778510961.\nINFO:cityseer.graph:Added transport node 47809 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47810 to street node 22289 with distance 117.29248517383002.\nINFO:cityseer.graph:Linking transport node 47810 to street node 22292 with distance 49.73031162288362.\nINFO:cityseer.graph:Added transport node 47810 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47811 to street node 29950 with distance 104.36933541320515.\nINFO:cityseer.graph:Linking transport node 47811 to street node 29951 with distance 72.04618458277835.\nINFO:cityseer.graph:Added transport node 47811 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47812 to street node 29950 with distance 92.79457070666506.\nINFO:cityseer.graph:Linking transport node 47812 to street node 29951 with distance 82.02448762505081.\nINFO:cityseer.graph:Added transport node 47812 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47813 to street node 23418 with distance 39.40329254358024.\nINFO:cityseer.graph:Linking transport node 47813 to street node 27154 with distance 7.160370977310102.\nINFO:cityseer.graph:Added transport node 47813 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47814 to street node 35240 with distance 82.83353418003861.\nINFO:cityseer.graph:Added transport node 47814 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47815 to street node 41830 with distance 33.61289705192438.\nINFO:cityseer.graph:Linking transport node 47815 to street node 41894 with distance 33.17454235039974.\nINFO:cityseer.graph:Added transport node 47815 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47816 to street node 35241 with distance 32.758063475383366.\nINFO:cityseer.graph:Linking transport node 47816 to street node 41893 with distance 53.85488938881116.\nINFO:cityseer.graph:Added transport node 47816 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47817 to street node 41893 with distance 20.02422397247198.\nINFO:cityseer.graph:Added transport node 47817 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47818 to street node 10857 with distance 69.50453699686007.\nINFO:cityseer.graph:Linking transport node 47818 to street node 38708 with distance 30.95406952880974.\nINFO:cityseer.graph:Added transport node 47818 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47819 to street node 10857 with distance 33.250678043466955.\nINFO:cityseer.graph:Linking transport node 47819 to street node 38708 with distance 64.95104249745222.\nINFO:cityseer.graph:Added transport node 47819 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47820 to street node 9630 with distance 68.49246036367329.\nINFO:cityseer.graph:Linking transport node 47820 to street node 9631 with distance 79.87760359761987.\nINFO:cityseer.graph:Added transport node 47820 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47821 to street node 9630 with distance 17.20034053720412.\nINFO:cityseer.graph:Added transport node 47821 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47822 to street node 10756 with distance 21.828777373494482.\nINFO:cityseer.graph:Linking transport node 47822 to street node 10757 with distance 63.66162695931866.\nINFO:cityseer.graph:Added transport node 47822 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47823 to street node 7321 with distance 68.55655209726102.\nINFO:cityseer.graph:Linking transport node 47823 to street node 7323 with distance 37.05640130069592.\nINFO:cityseer.graph:Added transport node 47823 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47824 to street node 7321 with distance 59.65485289813011.\nINFO:cityseer.graph:Linking transport node 47824 to street node 7323 with distance 52.353023791559636.\nINFO:cityseer.graph:Added transport node 47824 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47825 to street node 7321 with distance 81.33281353796339.\nINFO:cityseer.graph:Linking transport node 47825 to street node 7323 with distance 22.983961685130428.\nINFO:cityseer.graph:Added transport node 47825 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47826 to street node 7321 with distance 79.42528138963137.\nINFO:cityseer.graph:Linking transport node 47826 to street node 7323 with distance 27.380105574044535.\nINFO:cityseer.graph:Added transport node 47826 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47827 to street node 17430 with distance 125.97902710006915.\nINFO:cityseer.graph:Linking transport node 47827 to street node 17431 with distance 13.542964947568976.\nINFO:cityseer.graph:Added transport node 47827 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47828 to street node 28604 with distance 61.28788958191323.\nINFO:cityseer.graph:Linking transport node 47828 to street node 28748 with distance 9.553691726821267.\nINFO:cityseer.graph:Added transport node 47828 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47829 to street node 18004 with distance 56.53273612759205.\nINFO:cityseer.graph:Linking transport node 47829 to street node 39030 with distance 73.86865883924644.\nINFO:cityseer.graph:Added transport node 47829 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47830 to street node 18004 with distance 60.06284868993844.\nINFO:cityseer.graph:Linking transport node 47830 to street node 39030 with distance 52.1374391129534.\nINFO:cityseer.graph:Added transport node 47830 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47831 to street node 36716 with distance 23.095018055164875.\nINFO:cityseer.graph:Linking transport node 47831 to street node 39686 with distance 85.27556100894763.\nINFO:cityseer.graph:Added transport node 47831 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47832 to street node 18004 with distance 50.389663961622155.\nINFO:cityseer.graph:Added transport node 47832 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47833 to street node 14436 with distance 90.35411099535511.\nINFO:cityseer.graph:Linking transport node 47833 to street node 36716 with distance 29.019391827821526.\nINFO:cityseer.graph:Added transport node 47833 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47834 to street node 39030 with distance 45.13950682799375.\nINFO:cityseer.graph:Linking transport node 47834 to street node 39295 with distance 60.756924728878815.\nINFO:cityseer.graph:Added transport node 47834 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47835 to street node 39295 with distance 65.01610804162425.\nINFO:cityseer.graph:Linking transport node 47835 to street node 39686 with distance 72.29477370019274.\nINFO:cityseer.graph:Added transport node 47835 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47836 to street node 18004 with distance 81.38962319297579.\nINFO:cityseer.graph:Linking transport node 47836 to street node 39030 with distance 44.36325592401794.\nINFO:cityseer.graph:Added transport node 47836 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47837 to street node 18004 with distance 26.773894675411697.\nINFO:cityseer.graph:Added transport node 47837 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47838 to street node 31417 with distance 27.650131097770316.\nINFO:cityseer.graph:Added transport node 47838 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47839 to street node 14253 with distance 20.813758387114987.\nINFO:cityseer.graph:Linking transport node 47839 to street node 31417 with distance 15.580992397930295.\nINFO:cityseer.graph:Added transport node 47839 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47840 to street node 26859 with distance 18.028660660328686.\nINFO:cityseer.graph:Linking transport node 47840 to street node 31416 with distance 34.14370257240974.\nINFO:cityseer.graph:Added transport node 47840 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47841 to street node 31394 with distance 36.95364096003333.\nINFO:cityseer.graph:Linking transport node 47841 to street node 31395 with distance 24.77530744694148.\nINFO:cityseer.graph:Added transport node 47841 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47842 to street node 31394 with distance 30.037243986647848.\nINFO:cityseer.graph:Linking transport node 47842 to street node 31395 with distance 34.06524040886234.\nINFO:cityseer.graph:Added transport node 47842 and created 4 link edges.\n 56%|█████▌    | 714/1272 [00:01&lt;00:01, 487.08it/s]INFO:cityseer.graph:Linking transport node 47843 to street node 25780 with distance 15.541713100370332.\nINFO:cityseer.graph:Linking transport node 47843 to street node 31394 with distance 34.9752128132047.\nINFO:cityseer.graph:Added transport node 47843 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47844 to street node 22062 with distance 13.732848451099544.\nINFO:cityseer.graph:Linking transport node 47844 to street node 33388 with distance 108.51419071415236.\nINFO:cityseer.graph:Added transport node 47844 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47845 to street node 33386 with distance 33.24860622219372.\nINFO:cityseer.graph:Linking transport node 47845 to street node 33388 with distance 80.15588056108153.\nINFO:cityseer.graph:Added transport node 47845 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47846 to street node 33387 with distance 59.46873265029276.\nINFO:cityseer.graph:Added transport node 47846 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47847 to street node 33386 with distance 26.14797588786785.\nINFO:cityseer.graph:Linking transport node 47847 to street node 33388 with distance 87.78010995698376.\nINFO:cityseer.graph:Added transport node 47847 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47848 to street node 15750 with distance 29.386390037560627.\nINFO:cityseer.graph:Linking transport node 47848 to street node 20327 with distance 32.79303836227094.\nINFO:cityseer.graph:Added transport node 47848 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47849 to street node 15750 with distance 42.91943112772799.\nINFO:cityseer.graph:Linking transport node 47849 to street node 20327 with distance 29.284631537193945.\nINFO:cityseer.graph:Added transport node 47849 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47850 to street node 6700 with distance 132.98569551749867.\nINFO:cityseer.graph:Added transport node 47850 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47851 to street node 18004 with distance 52.32611957713265.\nINFO:cityseer.graph:Linking transport node 47851 to street node 39030 with distance 74.6633599732866.\nINFO:cityseer.graph:Added transport node 47851 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47852 to street node 1925 with distance 203.91635129726376.\nINFO:cityseer.graph:Added transport node 47852 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47853 to street node 22292 with distance 67.46413067253421.\nINFO:cityseer.graph:Linking transport node 47853 to street node 29952 with distance 109.10235546430437.\nINFO:cityseer.graph:Added transport node 47853 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47854 to street node 912 with distance 4.670159815169623.\nINFO:cityseer.graph:Added transport node 47854 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47855 to street node 34220 with distance 56.17602961100904.\nINFO:cityseer.graph:Added transport node 47855 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47856 to street node 9637 with distance 78.934717598917.\nINFO:cityseer.graph:Linking transport node 47856 to street node 9638 with distance 22.739030714504036.\nINFO:cityseer.graph:Added transport node 47856 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47857 to street node 20067 with distance 7.160885514757687.\nINFO:cityseer.graph:Added transport node 47857 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47858 to street node 29426 with distance 83.07789832612642.\nINFO:cityseer.graph:Linking transport node 47858 to street node 32265 with distance 10.953006406751795.\nINFO:cityseer.graph:Added transport node 47858 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47859 to street node 36813 with distance 61.420898742524976.\nINFO:cityseer.graph:Linking transport node 47859 to street node 36814 with distance 0.6805866857073952.\nINFO:cityseer.graph:Added transport node 47859 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47860 to street node 29124 with distance 56.09588802154123.\nINFO:cityseer.graph:Linking transport node 47860 to street node 37711 with distance 40.619241959833985.\nINFO:cityseer.graph:Added transport node 47860 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47861 to street node 37117 with distance 55.629944777820434.\nINFO:cityseer.graph:Added transport node 47861 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47862 to street node 35240 with distance 82.83353418003861.\nINFO:cityseer.graph:Added transport node 47862 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47863 to street node 9630 with distance 68.49246036367329.\nINFO:cityseer.graph:Linking transport node 47863 to street node 9631 with distance 79.87760359761987.\nINFO:cityseer.graph:Added transport node 47863 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47864 to street node 7321 with distance 68.55655209726102.\nINFO:cityseer.graph:Linking transport node 47864 to street node 7323 with distance 37.05640130069592.\nINFO:cityseer.graph:Added transport node 47864 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47865 to street node 31417 with distance 27.650131097770316.\nINFO:cityseer.graph:Added transport node 47865 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47866 to street node 31394 with distance 36.95364096003333.\nINFO:cityseer.graph:Linking transport node 47866 to street node 31395 with distance 24.77530744694148.\nINFO:cityseer.graph:Added transport node 47866 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47867 to street node 22062 with distance 13.732848451099544.\nINFO:cityseer.graph:Linking transport node 47867 to street node 33388 with distance 108.51419071415236.\nINFO:cityseer.graph:Added transport node 47867 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47868 to street node 15750 with distance 29.386390037560627.\nINFO:cityseer.graph:Linking transport node 47868 to street node 20327 with distance 32.79303836227094.\nINFO:cityseer.graph:Added transport node 47868 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47869 to street node 5697 with distance 32.859674121792345.\nINFO:cityseer.graph:Linking transport node 47869 to street node 5700 with distance 30.395291976541664.\nINFO:cityseer.graph:Added transport node 47869 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47870 to street node 5700 with distance 29.95158087653065.\nINFO:cityseer.graph:Linking transport node 47870 to street node 21025 with distance 73.90207722952027.\nINFO:cityseer.graph:Added transport node 47870 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47871 to street node 5700 with distance 25.255945101889736.\nINFO:cityseer.graph:Linking transport node 47871 to street node 16379 with distance 112.94426619136952.\nINFO:cityseer.graph:Added transport node 47871 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47872 to street node 22193 with distance 26.700707940775253.\nINFO:cityseer.graph:Linking transport node 47872 to street node 22194 with distance 94.62902407404216.\nINFO:cityseer.graph:Added transport node 47872 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47873 to street node 22189 with distance 26.888620722526543.\nINFO:cityseer.graph:Linking transport node 47873 to street node 42509 with distance 43.44986129880621.\nINFO:cityseer.graph:Added transport node 47873 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47874 to street node 22194 with distance 73.64504101871394.\nINFO:cityseer.graph:Added transport node 47874 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47875 to street node 30200 with distance 14.850620222789484.\nINFO:cityseer.graph:Added transport node 47875 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47876 to street node 24642 with distance 18.189976697928106.\nINFO:cityseer.graph:Added transport node 47876 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47877 to street node 30200 with distance 29.82216242007277.\nINFO:cityseer.graph:Linking transport node 47877 to street node 30201 with distance 56.58468300008038.\nINFO:cityseer.graph:Added transport node 47877 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47878 to street node 30200 with distance 41.20180799355913.\nINFO:cityseer.graph:Linking transport node 47878 to street node 30204 with distance 6.403857589823414.\nINFO:cityseer.graph:Added transport node 47878 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47879 to street node 38921 with distance 14.516774377907915.\nINFO:cityseer.graph:Linking transport node 47879 to street node 38924 with distance 22.34667906455261.\nINFO:cityseer.graph:Added transport node 47879 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47880 to street node 25455 with distance 27.15079381986165.\nINFO:cityseer.graph:Linking transport node 47880 to street node 25457 with distance 29.65670271959393.\nINFO:cityseer.graph:Added transport node 47880 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47881 to street node 38116 with distance 14.302237540072758.\nINFO:cityseer.graph:Linking transport node 47881 to street node 38118 with distance 36.904559021358736.\nINFO:cityseer.graph:Added transport node 47881 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47882 to street node 25121 with distance 17.34631318965589.\nINFO:cityseer.graph:Linking transport node 47882 to street node 25122 with distance 56.70488019354523.\nINFO:cityseer.graph:Added transport node 47882 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47883 to street node 25121 with distance 24.829976921052758.\nINFO:cityseer.graph:Added transport node 47883 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47884 to street node 23821 with distance 23.2126776252677.\nINFO:cityseer.graph:Linking transport node 47884 to street node 23822 with distance 24.191309404209385.\nINFO:cityseer.graph:Added transport node 47884 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47885 to street node 6364 with distance 13.712791249132941.\nINFO:cityseer.graph:Linking transport node 47885 to street node 6367 with distance 31.797344039458554.\nINFO:cityseer.graph:Added transport node 47885 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47886 to street node 6365 with distance 10.88115618984833.\nINFO:cityseer.graph:Added transport node 47886 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47887 to street node 6364 with distance 20.527959645945337.\nINFO:cityseer.graph:Linking transport node 47887 to street node 20248 with distance 43.28092776094206.\nINFO:cityseer.graph:Added transport node 47887 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47888 to street node 44590 with distance 29.078532737371606.\nINFO:cityseer.graph:Added transport node 47888 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47889 to street node 24045 with distance 18.44715795925087.\nINFO:cityseer.graph:Linking transport node 47889 to street node 24805 with distance 43.05099298064557.\nINFO:cityseer.graph:Added transport node 47889 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47890 to street node 24045 with distance 21.20967089108569.\nINFO:cityseer.graph:Linking transport node 47890 to street node 24805 with distance 35.39813935725093.\nINFO:cityseer.graph:Added transport node 47890 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47891 to street node 24031 with distance 32.466017265754424.\nINFO:cityseer.graph:Linking transport node 47891 to street node 24045 with distance 19.097277979048023.\nINFO:cityseer.graph:Added transport node 47891 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47892 to street node 10212 with distance 65.96207981696436.\nINFO:cityseer.graph:Linking transport node 47892 to street node 10213 with distance 74.07099706691768.\nINFO:cityseer.graph:Added transport node 47892 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47893 to street node 10210 with distance 30.42317256570474.\nINFO:cityseer.graph:Linking transport node 47893 to street node 10213 with distance 80.9948416750316.\nINFO:cityseer.graph:Added transport node 47893 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47894 to street node 10212 with distance 67.70727362817195.\nINFO:cityseer.graph:Linking transport node 47894 to street node 10213 with distance 74.56711642699385.\nINFO:cityseer.graph:Added transport node 47894 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47895 to street node 22488 with distance 41.67776671016501.\nINFO:cityseer.graph:Linking transport node 47895 to street node 22494 with distance 50.945122949503514.\nINFO:cityseer.graph:Added transport node 47895 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47896 to street node 35321 with distance 39.984057107981734.\nINFO:cityseer.graph:Linking transport node 47896 to street node 35322 with distance 53.84018744852099.\nINFO:cityseer.graph:Added transport node 47896 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47897 to street node 35253 with distance 70.74108556811986.\nINFO:cityseer.graph:Linking transport node 47897 to street node 35322 with distance 62.2143677429263.\nINFO:cityseer.graph:Added transport node 47897 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47898 to street node 35321 with distance 33.91641786663389.\nINFO:cityseer.graph:Linking transport node 47898 to street node 35322 with distance 58.84970244094501.\nINFO:cityseer.graph:Added transport node 47898 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47899 to street node 35253 with distance 83.27657325505929.\nINFO:cityseer.graph:Linking transport node 47899 to street node 35322 with distance 37.1544395620376.\nINFO:cityseer.graph:Added transport node 47899 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47900 to street node 35327 with distance 23.33898550041462.\nINFO:cityseer.graph:Linking transport node 47900 to street node 35329 with distance 38.541445001977515.\nINFO:cityseer.graph:Added transport node 47900 and created 4 link edges.\n 61%|██████    | 772/1272 [00:01&lt;00:01, 492.69it/s]INFO:cityseer.graph:Linking transport node 47901 to street node 25644 with distance 11.351588834522548.\nINFO:cityseer.graph:Linking transport node 47901 to street node 35326 with distance 51.25574361410983.\nINFO:cityseer.graph:Added transport node 47901 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47902 to street node 35325 with distance 27.907266077466943.\nINFO:cityseer.graph:Linking transport node 47902 to street node 35327 with distance 14.977876994224.\nINFO:cityseer.graph:Added transport node 47902 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47903 to street node 35327 with distance 22.989811723351103.\nINFO:cityseer.graph:Linking transport node 47903 to street node 35329 with distance 31.857925445970572.\nINFO:cityseer.graph:Added transport node 47903 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47904 to street node 17557 with distance 1.5970991869936655.\nINFO:cityseer.graph:Linking transport node 47904 to street node 17559 with distance 69.3941403399564.\nINFO:cityseer.graph:Added transport node 47904 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47905 to street node 28625 with distance 63.94547840978347.\nINFO:cityseer.graph:Linking transport node 47905 to street node 28626 with distance 20.861856300045098.\nINFO:cityseer.graph:Added transport node 47905 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47906 to street node 28627 with distance 28.82190751742565.\nINFO:cityseer.graph:Linking transport node 47906 to street node 36037 with distance 76.7677165340692.\nINFO:cityseer.graph:Added transport node 47906 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47907 to street node 28627 with distance 28.576543235241672.\nINFO:cityseer.graph:Linking transport node 47907 to street node 36036 with distance 67.18286945924957.\nINFO:cityseer.graph:Added transport node 47907 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47908 to street node 28622 with distance 65.64332645056417.\nINFO:cityseer.graph:Linking transport node 47908 to street node 28627 with distance 37.14099665864886.\nINFO:cityseer.graph:Added transport node 47908 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47909 to street node 28626 with distance 37.33088716946948.\nINFO:cityseer.graph:Linking transport node 47909 to street node 36033 with distance 46.78456754408842.\nINFO:cityseer.graph:Added transport node 47909 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47910 to street node 28626 with distance 40.64754615527067.\nINFO:cityseer.graph:Linking transport node 47910 to street node 36032 with distance 69.6503011936453.\nINFO:cityseer.graph:Added transport node 47910 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47911 to street node 35240 with distance 84.43069902668753.\nINFO:cityseer.graph:Added transport node 47911 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47912 to street node 10877 with distance 38.16864280196832.\nINFO:cityseer.graph:Added transport node 47912 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47913 to street node 10875 with distance 56.154680986268815.\nINFO:cityseer.graph:Added transport node 47913 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47914 to street node 7073 with distance 91.94743212903062.\nINFO:cityseer.graph:Linking transport node 47914 to street node 10876 with distance 39.67607798185185.\nINFO:cityseer.graph:Added transport node 47914 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47915 to street node 10875 with distance 25.041414541031976.\nINFO:cityseer.graph:Linking transport node 47915 to street node 10880 with distance 59.2273064221093.\nINFO:cityseer.graph:Added transport node 47915 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47916 to street node 10875 with distance 31.01070530534009.\nINFO:cityseer.graph:Added transport node 47916 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47917 to street node 10875 with distance 44.18465306127471.\nINFO:cityseer.graph:Added transport node 47917 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47918 to street node 6779 with distance 76.87630146683952.\nINFO:cityseer.graph:Added transport node 47918 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47919 to street node 32986 with distance 17.623682968745193.\nINFO:cityseer.graph:Linking transport node 47919 to street node 43561 with distance 91.8887052177843.\nINFO:cityseer.graph:Added transport node 47919 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47920 to street node 32986 with distance 9.76611386344687.\nINFO:cityseer.graph:Added transport node 47920 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47921 to street node 6779 with distance 10.869831194395854.\nINFO:cityseer.graph:Added transport node 47921 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47922 to street node 6776 with distance 22.217929875526064.\nINFO:cityseer.graph:Linking transport node 47922 to street node 44110 with distance 36.65745573920424.\nINFO:cityseer.graph:Added transport node 47922 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47923 to street node 7996 with distance 4.886578112169734.\nINFO:cityseer.graph:Linking transport node 47923 to street node 44881 with distance 43.956614887989005.\nINFO:cityseer.graph:Added transport node 47923 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47924 to street node 44882 with distance 39.22286444651143.\nINFO:cityseer.graph:Added transport node 47924 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47925 to street node 44881 with distance 57.75415160972053.\nINFO:cityseer.graph:Linking transport node 47925 to street node 44882 with distance 8.226826440612282.\nINFO:cityseer.graph:Added transport node 47925 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47926 to street node 7996 with distance 16.42477164372437.\nINFO:cityseer.graph:Linking transport node 47926 to street node 44882 with distance 39.694087108206006.\nINFO:cityseer.graph:Added transport node 47926 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47927 to street node 44024 with distance 51.20166322265115.\nINFO:cityseer.graph:Linking transport node 47927 to street node 44025 with distance 15.929957697917601.\nINFO:cityseer.graph:Added transport node 47927 and created 4 link edges.\nINFO:cityseer.graph:Added transport node 47928 and created 0 link edges.\nINFO:cityseer.graph:Linking transport node 47929 to street node 44024 with distance 35.8839342066518.\nINFO:cityseer.graph:Linking transport node 47929 to street node 44025 with distance 28.704218967044092.\nINFO:cityseer.graph:Added transport node 47929 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47930 to street node 24086 with distance 118.29456120025442.\nINFO:cityseer.graph:Added transport node 47930 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47931 to street node 44841 with distance 105.55681725895651.\nINFO:cityseer.graph:Linking transport node 47931 to street node 44842 with distance 10.75184063259385.\nINFO:cityseer.graph:Added transport node 47931 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47932 to street node 44841 with distance 106.71973659438595.\nINFO:cityseer.graph:Linking transport node 47932 to street node 44842 with distance 12.809008668821967.\nINFO:cityseer.graph:Added transport node 47932 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47933 to street node 44841 with distance 102.47510485267351.\nINFO:cityseer.graph:Linking transport node 47933 to street node 44842 with distance 18.31194385630086.\nINFO:cityseer.graph:Added transport node 47933 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47934 to street node 7896 with distance 38.92031708919427.\nINFO:cityseer.graph:Linking transport node 47934 to street node 7897 with distance 35.32950326578639.\nINFO:cityseer.graph:Added transport node 47934 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47935 to street node 9735 with distance 53.943527386745586.\nINFO:cityseer.graph:Linking transport node 47935 to street node 46181 with distance 90.97196112770042.\nINFO:cityseer.graph:Added transport node 47935 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47936 to street node 7896 with distance 45.16826811445064.\nINFO:cityseer.graph:Linking transport node 47936 to street node 7897 with distance 15.99647948119633.\nINFO:cityseer.graph:Added transport node 47936 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47937 to street node 7896 with distance 25.921611249952353.\nINFO:cityseer.graph:Linking transport node 47937 to street node 7897 with distance 28.443931852483168.\nINFO:cityseer.graph:Added transport node 47937 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47938 to street node 2975 with distance 96.64953154251074.\nINFO:cityseer.graph:Linking transport node 47938 to street node 2976 with distance 30.60373639195281.\nINFO:cityseer.graph:Added transport node 47938 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47939 to street node 2975 with distance 108.30011995860507.\nINFO:cityseer.graph:Linking transport node 47939 to street node 2976 with distance 44.92820093654943.\nINFO:cityseer.graph:Added transport node 47939 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47940 to street node 2975 with distance 111.08108085920472.\nINFO:cityseer.graph:Linking transport node 47940 to street node 2976 with distance 44.018474037402406.\nINFO:cityseer.graph:Added transport node 47940 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47941 to street node 2864 with distance 69.44390698150033.\nINFO:cityseer.graph:Linking transport node 47941 to street node 2872 with distance 7.667611306210668.\nINFO:cityseer.graph:Added transport node 47941 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47942 to street node 2869 with distance 108.35781587173034.\nINFO:cityseer.graph:Added transport node 47942 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47943 to street node 2869 with distance 121.40755557686941.\nINFO:cityseer.graph:Linking transport node 47943 to street node 2871 with distance 63.59777625739493.\nINFO:cityseer.graph:Added transport node 47943 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47944 to street node 7550 with distance 108.02061889347361.\nINFO:cityseer.graph:Added transport node 47944 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47945 to street node 7550 with distance 72.99412796771114.\nINFO:cityseer.graph:Added transport node 47945 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47946 to street node 15845 with distance 134.58952282321647.\nINFO:cityseer.graph:Added transport node 47946 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47947 to street node 15845 with distance 121.62562655044307.\nINFO:cityseer.graph:Added transport node 47947 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47948 to street node 89 with distance 144.2193409611857.\nINFO:cityseer.graph:Linking transport node 47948 to street node 90 with distance 197.93278914438082.\nINFO:cityseer.graph:Added transport node 47948 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47949 to street node 89 with distance 144.32869517127432.\nINFO:cityseer.graph:Linking transport node 47949 to street node 90 with distance 205.55874753239755.\nINFO:cityseer.graph:Added transport node 47949 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47950 to street node 89 with distance 134.4871619429924.\nINFO:cityseer.graph:Linking transport node 47950 to street node 90 with distance 194.86106460081822.\nINFO:cityseer.graph:Added transport node 47950 and created 4 link edges.\nINFO:cityseer.graph:Added transport node 47951 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 47952 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 47953 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 47954 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 47955 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 47956 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 47957 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 47958 and created 0 link edges.\nINFO:cityseer.graph:Linking transport node 47959 to street node 43443 with distance 105.05850010082386.\nINFO:cityseer.graph:Linking transport node 47959 to street node 44629 with distance 99.78531456582245.\nINFO:cityseer.graph:Added transport node 47959 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47960 to street node 43443 with distance 102.45182287974794.\nINFO:cityseer.graph:Linking transport node 47960 to street node 44629 with distance 99.94514514054815.\nINFO:cityseer.graph:Added transport node 47960 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47961 to street node 43443 with distance 138.8132056995712.\nINFO:cityseer.graph:Linking transport node 47961 to street node 44629 with distance 120.2018171526034.\nINFO:cityseer.graph:Added transport node 47961 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47962 to street node 43409 with distance 64.03914198619455.\nINFO:cityseer.graph:Linking transport node 47962 to street node 43410 with distance 117.12827172417602.\nINFO:cityseer.graph:Added transport node 47962 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47963 to street node 43409 with distance 57.41744111231197.\nINFO:cityseer.graph:Linking transport node 47963 to street node 43410 with distance 109.11976191626428.\nINFO:cityseer.graph:Added transport node 47963 and created 4 link edges.\n 66%|██████▌   | 835/1272 [00:01&lt;00:00, 521.93it/s]INFO:cityseer.graph:Linking transport node 47964 to street node 43409 with distance 69.80469159378023.\nINFO:cityseer.graph:Linking transport node 47964 to street node 43410 with distance 122.57292079001292.\nINFO:cityseer.graph:Added transport node 47964 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47965 to street node 43459 with distance 29.336789534103062.\nINFO:cityseer.graph:Linking transport node 47965 to street node 43460 with distance 19.053696456124552.\nINFO:cityseer.graph:Added transport node 47965 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47966 to street node 43459 with distance 21.636156988340893.\nINFO:cityseer.graph:Linking transport node 47966 to street node 43460 with distance 21.407647952096962.\nINFO:cityseer.graph:Added transport node 47966 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47967 to street node 43459 with distance 35.78852167884842.\nINFO:cityseer.graph:Linking transport node 47967 to street node 43460 with distance 17.06882472153736.\nINFO:cityseer.graph:Added transport node 47967 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47968 to street node 232 with distance 158.37572689962005.\nINFO:cityseer.graph:Linking transport node 47968 to street node 236 with distance 146.5402019211435.\nINFO:cityseer.graph:Added transport node 47968 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47969 to street node 232 with distance 162.5603480366375.\nINFO:cityseer.graph:Linking transport node 47969 to street node 236 with distance 135.68341509303886.\nINFO:cityseer.graph:Added transport node 47969 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47970 to street node 232 with distance 144.81911369538182.\nINFO:cityseer.graph:Linking transport node 47970 to street node 236 with distance 190.20778383501454.\nINFO:cityseer.graph:Added transport node 47970 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47971 to street node 5697 with distance 32.859674121792345.\nINFO:cityseer.graph:Linking transport node 47971 to street node 5700 with distance 30.395291976541664.\nINFO:cityseer.graph:Added transport node 47971 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47972 to street node 22193 with distance 26.700707940775253.\nINFO:cityseer.graph:Linking transport node 47972 to street node 22194 with distance 94.62902407404216.\nINFO:cityseer.graph:Added transport node 47972 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47973 to street node 30200 with distance 14.850620222789484.\nINFO:cityseer.graph:Added transport node 47973 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47974 to street node 38921 with distance 14.516774377907915.\nINFO:cityseer.graph:Linking transport node 47974 to street node 38924 with distance 22.34667906455261.\nINFO:cityseer.graph:Added transport node 47974 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47975 to street node 25121 with distance 17.34631318965589.\nINFO:cityseer.graph:Linking transport node 47975 to street node 25122 with distance 56.70488019354523.\nINFO:cityseer.graph:Added transport node 47975 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47976 to street node 6364 with distance 13.712791249132941.\nINFO:cityseer.graph:Linking transport node 47976 to street node 6367 with distance 31.797344039458554.\nINFO:cityseer.graph:Added transport node 47976 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47977 to street node 24045 with distance 18.44715795925087.\nINFO:cityseer.graph:Linking transport node 47977 to street node 24805 with distance 43.05099298064557.\nINFO:cityseer.graph:Added transport node 47977 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47978 to street node 10212 with distance 65.96207981696436.\nINFO:cityseer.graph:Linking transport node 47978 to street node 10213 with distance 74.07099706691768.\nINFO:cityseer.graph:Added transport node 47978 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47979 to street node 35321 with distance 39.984057107981734.\nINFO:cityseer.graph:Linking transport node 47979 to street node 35322 with distance 53.84018744852099.\nINFO:cityseer.graph:Added transport node 47979 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47980 to street node 35327 with distance 23.33898550041462.\nINFO:cityseer.graph:Linking transport node 47980 to street node 35329 with distance 38.541445001977515.\nINFO:cityseer.graph:Added transport node 47980 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47981 to street node 28625 with distance 63.94547840978347.\nINFO:cityseer.graph:Linking transport node 47981 to street node 28626 with distance 20.861856300045098.\nINFO:cityseer.graph:Added transport node 47981 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47982 to street node 10877 with distance 38.16864280196832.\nINFO:cityseer.graph:Added transport node 47982 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47983 to street node 6779 with distance 76.87630146683952.\nINFO:cityseer.graph:Added transport node 47983 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47984 to street node 7996 with distance 4.886578112169734.\nINFO:cityseer.graph:Linking transport node 47984 to street node 44881 with distance 43.956614887989005.\nINFO:cityseer.graph:Added transport node 47984 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47985 to street node 44024 with distance 51.20166322265115.\nINFO:cityseer.graph:Linking transport node 47985 to street node 44025 with distance 15.929957697917601.\nINFO:cityseer.graph:Added transport node 47985 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47986 to street node 44841 with distance 105.55681725895651.\nINFO:cityseer.graph:Linking transport node 47986 to street node 44842 with distance 10.75184063259385.\nINFO:cityseer.graph:Added transport node 47986 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47987 to street node 7896 with distance 38.92031708919427.\nINFO:cityseer.graph:Linking transport node 47987 to street node 7897 with distance 35.32950326578639.\nINFO:cityseer.graph:Added transport node 47987 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47988 to street node 2975 with distance 96.64953154251074.\nINFO:cityseer.graph:Linking transport node 47988 to street node 2976 with distance 30.60373639195281.\nINFO:cityseer.graph:Added transport node 47988 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47989 to street node 2864 with distance 69.44390698150033.\nINFO:cityseer.graph:Linking transport node 47989 to street node 2872 with distance 7.667611306210668.\nINFO:cityseer.graph:Added transport node 47989 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47990 to street node 7550 with distance 108.02061889347361.\nINFO:cityseer.graph:Added transport node 47990 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 47991 to street node 89 with distance 144.2193409611857.\nINFO:cityseer.graph:Linking transport node 47991 to street node 90 with distance 197.93278914438082.\nINFO:cityseer.graph:Added transport node 47991 and created 4 link edges.\nINFO:cityseer.graph:Added transport node 47992 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 47993 and created 0 link edges.\nINFO:cityseer.graph:Linking transport node 47994 to street node 43443 with distance 105.05850010082386.\nINFO:cityseer.graph:Linking transport node 47994 to street node 44629 with distance 99.78531456582245.\nINFO:cityseer.graph:Added transport node 47994 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47995 to street node 43409 with distance 64.03914198619455.\nINFO:cityseer.graph:Linking transport node 47995 to street node 43410 with distance 117.12827172417602.\nINFO:cityseer.graph:Added transport node 47995 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47996 to street node 43459 with distance 29.336789534103062.\nINFO:cityseer.graph:Linking transport node 47996 to street node 43460 with distance 19.053696456124552.\nINFO:cityseer.graph:Added transport node 47996 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47997 to street node 232 with distance 158.37572689962005.\nINFO:cityseer.graph:Linking transport node 47997 to street node 236 with distance 146.5402019211435.\nINFO:cityseer.graph:Added transport node 47997 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47998 to street node 22292 with distance 67.75983172376448.\nINFO:cityseer.graph:Linking transport node 47998 to street node 29952 with distance 107.0018063571208.\nINFO:cityseer.graph:Added transport node 47998 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 47999 to street node 32081 with distance 88.81004921942396.\nINFO:cityseer.graph:Linking transport node 47999 to street node 34156 with distance 29.466512844109925.\nINFO:cityseer.graph:Added transport node 47999 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48000 to street node 34156 with distance 57.855132295451206.\nINFO:cityseer.graph:Added transport node 48000 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48001 to street node 32081 with distance 78.46779773018275.\nINFO:cityseer.graph:Linking transport node 48001 to street node 34156 with distance 36.42807501369575.\nINFO:cityseer.graph:Added transport node 48001 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48002 to street node 30802 with distance 40.36612424270623.\nINFO:cityseer.graph:Linking transport node 48002 to street node 34157 with distance 41.4410133843581.\nINFO:cityseer.graph:Added transport node 48002 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48003 to street node 30790 with distance 63.57152495893002.\nINFO:cityseer.graph:Linking transport node 48003 to street node 34157 with distance 23.308084719288537.\nINFO:cityseer.graph:Added transport node 48003 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48004 to street node 29491 with distance 22.902188195461203.\nINFO:cityseer.graph:Linking transport node 48004 to street node 34157 with distance 65.22785092335964.\nINFO:cityseer.graph:Added transport node 48004 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48005 to street node 6713 with distance 41.19125904522397.\nINFO:cityseer.graph:Linking transport node 48005 to street node 6723 with distance 40.4756665269963.\nINFO:cityseer.graph:Added transport node 48005 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48006 to street node 9153 with distance 59.47489007154892.\nINFO:cityseer.graph:Added transport node 48006 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48007 to street node 7740 with distance 21.671596441239647.\nINFO:cityseer.graph:Added transport node 48007 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48008 to street node 7753 with distance 59.191473917727905.\nINFO:cityseer.graph:Linking transport node 48008 to street node 9153 with distance 51.90052782848702.\nINFO:cityseer.graph:Added transport node 48008 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48009 to street node 7755 with distance 47.105392852679444.\nINFO:cityseer.graph:Linking transport node 48009 to street node 9153 with distance 62.65265610292921.\nINFO:cityseer.graph:Added transport node 48009 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48010 to street node 7755 with distance 63.92932763911393.\nINFO:cityseer.graph:Linking transport node 48010 to street node 9153 with distance 46.05419716948995.\nINFO:cityseer.graph:Added transport node 48010 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48011 to street node 46710 with distance 214.95424350978118.\nINFO:cityseer.graph:Added transport node 48011 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48012 to street node 46712 with distance 194.82775452744036.\nINFO:cityseer.graph:Linking transport node 48012 to street node 46713 with distance 110.78485886083976.\nINFO:cityseer.graph:Added transport node 48012 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48013 to street node 46712 with distance 184.0492058599395.\nINFO:cityseer.graph:Linking transport node 48013 to street node 46713 with distance 116.13157644237924.\nINFO:cityseer.graph:Added transport node 48013 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48014 to street node 46712 with distance 111.5654764000569.\nINFO:cityseer.graph:Linking transport node 48014 to street node 46713 with distance 180.1819370472137.\nINFO:cityseer.graph:Added transport node 48014 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48015 to street node 21745 with distance 39.38918711799493.\nINFO:cityseer.graph:Linking transport node 48015 to street node 21746 with distance 18.213246129719113.\nINFO:cityseer.graph:Added transport node 48015 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48016 to street node 21745 with distance 37.45628973190364.\nINFO:cityseer.graph:Linking transport node 48016 to street node 21746 with distance 19.36740110116362.\nINFO:cityseer.graph:Added transport node 48016 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48017 to street node 11788 with distance 76.01127563656046.\nINFO:cityseer.graph:Linking transport node 48017 to street node 21746 with distance 19.83423768531421.\nINFO:cityseer.graph:Added transport node 48017 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48018 to street node 6571 with distance 20.0373533756777.\nINFO:cityseer.graph:Linking transport node 48018 to street node 6573 with distance 11.83306685050843.\nINFO:cityseer.graph:Added transport node 48018 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48019 to street node 6572 with distance 63.057157668850174.\nINFO:cityseer.graph:Added transport node 48019 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48020 to street node 6572 with distance 51.88839155523496.\nINFO:cityseer.graph:Added transport node 48020 and created 2 link edges.\nINFO:cityseer.graph:Added transport node 48021 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48022 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48023 and created 0 link edges.\nINFO:cityseer.graph:Linking transport node 48024 to street node 46710 with distance 208.84545253058013.\nINFO:cityseer.graph:Added transport node 48024 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48025 to street node 32081 with distance 88.81004921942396.\nINFO:cityseer.graph:Linking transport node 48025 to street node 34156 with distance 29.466512844109925.\nINFO:cityseer.graph:Added transport node 48025 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48026 to street node 9153 with distance 59.47489007154892.\nINFO:cityseer.graph:Added transport node 48026 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48027 to street node 21745 with distance 39.38918711799493.\nINFO:cityseer.graph:Linking transport node 48027 to street node 21746 with distance 18.213246129719113.\nINFO:cityseer.graph:Added transport node 48027 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48028 to street node 6571 with distance 20.0373533756777.\nINFO:cityseer.graph:Linking transport node 48028 to street node 6573 with distance 11.83306685050843.\nINFO:cityseer.graph:Added transport node 48028 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48029 to street node 10713 with distance 35.89731235355856.\nINFO:cityseer.graph:Added transport node 48029 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48030 to street node 44816 with distance 38.12925414743406.\nINFO:cityseer.graph:Added transport node 48030 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48031 to street node 10715 with distance 35.41149045106623.\nINFO:cityseer.graph:Added transport node 48031 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48032 to street node 46128 with distance 117.03002031637257.\nINFO:cityseer.graph:Linking transport node 48032 to street node 46131 with distance 54.133955356056376.\nINFO:cityseer.graph:Added transport node 48032 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48033 to street node 44915 with distance 19.341502331637404.\nINFO:cityseer.graph:Linking transport node 48033 to street node 44922 with distance 62.97933515777126.\nINFO:cityseer.graph:Added transport node 48033 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48034 to street node 44921 with distance 75.05958320561012.\nINFO:cityseer.graph:Linking transport node 48034 to street node 44922 with distance 61.001267033752846.\nINFO:cityseer.graph:Added transport node 48034 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48035 to street node 46128 with distance 54.009933552921346.\nINFO:cityseer.graph:Added transport node 48035 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48036 to street node 46128 with distance 52.61471297192138.\nINFO:cityseer.graph:Linking transport node 48036 to street node 46131 with distance 90.55470040901629.\nINFO:cityseer.graph:Added transport node 48036 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48037 to street node 20835 with distance 23.684640636003394.\nINFO:cityseer.graph:Linking transport node 48037 to street node 41015 with distance 44.29127176671039.\nINFO:cityseer.graph:Added transport node 48037 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48038 to street node 20835 with distance 28.42321314887105.\nINFO:cityseer.graph:Linking transport node 48038 to street node 41015 with distance 39.17409237012424.\nINFO:cityseer.graph:Added transport node 48038 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48039 to street node 41015 with distance 34.08837671539513.\nINFO:cityseer.graph:Added transport node 48039 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48040 to street node 29983 with distance 42.688188064666825.\nINFO:cityseer.graph:Added transport node 48040 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48041 to street node 32846 with distance 86.29931514702844.\nINFO:cityseer.graph:Added transport node 48041 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48042 to street node 32844 with distance 27.682473050812888.\nINFO:cityseer.graph:Linking transport node 48042 to street node 32846 with distance 76.48652905447017.\nINFO:cityseer.graph:Added transport node 48042 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48043 to street node 37733 with distance 102.18997192491757.\nINFO:cityseer.graph:Linking transport node 48043 to street node 38994 with distance 22.19652674840181.\nINFO:cityseer.graph:Added transport node 48043 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48044 to street node 38994 with distance 45.98882798441546.\nINFO:cityseer.graph:Linking transport node 48044 to street node 40920 with distance 90.09380581098287.\nINFO:cityseer.graph:Added transport node 48044 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48045 to street node 38995 with distance 49.45188176169076.\nINFO:cityseer.graph:Linking transport node 48045 to street node 40396 with distance 71.37859604463321.\nINFO:cityseer.graph:Added transport node 48045 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48046 to street node 34157 with distance 28.362246849668182.\nINFO:cityseer.graph:Added transport node 48046 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48047 to street node 2033 with distance 32.160714096751825.\nINFO:cityseer.graph:Linking transport node 48047 to street node 32214 with distance 141.935357840931.\nINFO:cityseer.graph:Added transport node 48047 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48048 to street node 32214 with distance 85.8938767770969.\nINFO:cityseer.graph:Linking transport node 48048 to street node 40415 with distance 78.03459057082237.\nINFO:cityseer.graph:Added transport node 48048 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48049 to street node 2033 with distance 74.35996593027737.\nINFO:cityseer.graph:Linking transport node 48049 to street node 32215 with distance 100.35742709184036.\nINFO:cityseer.graph:Added transport node 48049 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48050 to street node 6539 with distance 19.477290266874753.\nINFO:cityseer.graph:Linking transport node 48050 to street node 11688 with distance 54.268625734845465.\nINFO:cityseer.graph:Added transport node 48050 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48051 to street node 11689 with distance 40.83678732988871.\nINFO:cityseer.graph:Linking transport node 48051 to street node 37771 with distance 54.33827594330416.\nINFO:cityseer.graph:Added transport node 48051 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48052 to street node 11689 with distance 40.95257771325299.\nINFO:cityseer.graph:Linking transport node 48052 to street node 35205 with distance 33.98608237904355.\nINFO:cityseer.graph:Added transport node 48052 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48053 to street node 30408 with distance 22.76822038271453.\nINFO:cityseer.graph:Linking transport node 48053 to street node 30596 with distance 91.37402547283008.\nINFO:cityseer.graph:Added transport node 48053 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48054 to street node 30408 with distance 21.908342257242893.\nINFO:cityseer.graph:Linking transport node 48054 to street node 32650 with distance 122.83736219868005.\nINFO:cityseer.graph:Added transport node 48054 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48055 to street node 22488 with distance 44.73002993993271.\nINFO:cityseer.graph:Linking transport node 48055 to street node 22494 with distance 51.62812760154091.\nINFO:cityseer.graph:Added transport node 48055 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48056 to street node 33719 with distance 25.801166855727683.\nINFO:cityseer.graph:Linking transport node 48056 to street node 33720 with distance 33.583772735910905.\nINFO:cityseer.graph:Added transport node 48056 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48057 to street node 34290 with distance 41.52784704572892.\nINFO:cityseer.graph:Linking transport node 48057 to street node 34291 with distance 17.95041770752142.\nINFO:cityseer.graph:Added transport node 48057 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48058 to street node 17848 with distance 79.08842960596445.\nINFO:cityseer.graph:Added transport node 48058 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48059 to street node 17850 with distance 24.572825008199192.\nINFO:cityseer.graph:Added transport node 48059 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48060 to street node 36813 with distance 56.98486410719758.\nINFO:cityseer.graph:Linking transport node 48060 to street node 36814 with distance 4.791384795079007.\nINFO:cityseer.graph:Added transport node 48060 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48061 to street node 44453 with distance 53.169046565534046.\nINFO:cityseer.graph:Added transport node 48061 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48062 to street node 11126 with distance 51.50039426832415.\nINFO:cityseer.graph:Linking transport node 48062 to street node 11128 with distance 131.21713443540295.\nINFO:cityseer.graph:Added transport node 48062 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48063 to street node 11127 with distance 108.21838760107772.\nINFO:cityseer.graph:Linking transport node 48063 to street node 11128 with distance 123.14054292895776.\nINFO:cityseer.graph:Added transport node 48063 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48064 to street node 35236 with distance 81.5782231572482.\nINFO:cityseer.graph:Linking transport node 48064 to street node 35237 with distance 95.90936580329972.\nINFO:cityseer.graph:Added transport node 48064 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48065 to street node 24692 with distance 64.8462096172054.\nINFO:cityseer.graph:Linking transport node 48065 to street node 24696 with distance 49.08686628779896.\nINFO:cityseer.graph:Added transport node 48065 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48066 to street node 43144 with distance 25.22746970522986.\nINFO:cityseer.graph:Linking transport node 48066 to street node 43145 with distance 58.0714840710958.\nINFO:cityseer.graph:Added transport node 48066 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48067 to street node 43143 with distance 35.84042448691837.\nINFO:cityseer.graph:Linking transport node 48067 to street node 43144 with distance 43.403234893030486.\nINFO:cityseer.graph:Added transport node 48067 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48068 to street node 24696 with distance 48.69884820862408.\nINFO:cityseer.graph:Added transport node 48068 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48069 to street node 24692 with distance 51.12192272376668.\nINFO:cityseer.graph:Added transport node 48069 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48070 to street node 23466 with distance 39.922637427735424.\nINFO:cityseer.graph:Linking transport node 48070 to street node 40602 with distance 15.484632947370391.\nINFO:cityseer.graph:Added transport node 48070 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48071 to street node 31693 with distance 75.45750154016055.\nINFO:cityseer.graph:Added transport node 48071 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48072 to street node 23468 with distance 17.31632916578105.\nINFO:cityseer.graph:Linking transport node 48072 to street node 31694 with distance 45.54995606077245.\nINFO:cityseer.graph:Added transport node 48072 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48073 to street node 40600 with distance 10.912037158890618.\nINFO:cityseer.graph:Linking transport node 48073 to street node 40601 with distance 46.29231557633789.\nINFO:cityseer.graph:Added transport node 48073 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48074 to street node 23466 with distance 33.541786810790555.\nINFO:cityseer.graph:Linking transport node 48074 to street node 40600 with distance 29.191135599199775.\nINFO:cityseer.graph:Added transport node 48074 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48075 to street node 38454 with distance 42.477247360964455.\nINFO:cityseer.graph:Linking transport node 48075 to street node 41390 with distance 55.808666994220005.\nINFO:cityseer.graph:Added transport node 48075 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48076 to street node 38454 with distance 46.60112503978016.\nINFO:cityseer.graph:Linking transport node 48076 to street node 41390 with distance 50.764936793618475.\nINFO:cityseer.graph:Added transport node 48076 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48077 to street node 38454 with distance 10.626684822351566.\nINFO:cityseer.graph:Added transport node 48077 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48078 to street node 38454 with distance 36.46257431025911.\nINFO:cityseer.graph:Linking transport node 48078 to street node 41390 with distance 60.1123232489042.\nINFO:cityseer.graph:Added transport node 48078 and created 4 link edges.\n 75%|███████▍  | 950/1272 [00:01&lt;00:00, 671.42it/s]INFO:cityseer.graph:Linking transport node 48079 to street node 21473 with distance 60.221604318092.\nINFO:cityseer.graph:Added transport node 48079 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48080 to street node 21477 with distance 10.975115991350103.\nINFO:cityseer.graph:Added transport node 48080 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48081 to street node 21475 with distance 28.210146114480455.\nINFO:cityseer.graph:Linking transport node 48081 to street node 21477 with distance 15.109055305846498.\nINFO:cityseer.graph:Added transport node 48081 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48082 to street node 21455 with distance 15.1951337234068.\nINFO:cityseer.graph:Linking transport node 48082 to street node 21473 with distance 63.504226951322444.\nINFO:cityseer.graph:Added transport node 48082 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48083 to street node 24053 with distance 101.37830055145042.\nINFO:cityseer.graph:Linking transport node 48083 to street node 24055 with distance 15.387373364818664.\nINFO:cityseer.graph:Added transport node 48083 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48084 to street node 24053 with distance 68.23849509027724.\nINFO:cityseer.graph:Linking transport node 48084 to street node 24055 with distance 41.47658433982611.\nINFO:cityseer.graph:Added transport node 48084 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48085 to street node 24053 with distance 34.20328901206292.\nINFO:cityseer.graph:Linking transport node 48085 to street node 24054 with distance 78.71478366762874.\nINFO:cityseer.graph:Added transport node 48085 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48086 to street node 24053 with distance 88.71887748517227.\nINFO:cityseer.graph:Linking transport node 48086 to street node 24054 with distance 28.97053240621949.\nINFO:cityseer.graph:Added transport node 48086 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48087 to street node 10802 with distance 71.510086675899.\nINFO:cityseer.graph:Linking transport node 48087 to street node 44640 with distance 63.13107289957626.\nINFO:cityseer.graph:Added transport node 48087 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48088 to street node 10801 with distance 15.739713168607617.\nINFO:cityseer.graph:Linking transport node 48088 to street node 38859 with distance 63.20654401130227.\nINFO:cityseer.graph:Added transport node 48088 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48089 to street node 44387 with distance 35.55434408182497.\nINFO:cityseer.graph:Linking transport node 48089 to street node 44639 with distance 26.204852353508016.\nINFO:cityseer.graph:Added transport node 48089 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48090 to street node 10798 with distance 55.75135715461727.\nINFO:cityseer.graph:Linking transport node 48090 to street node 10802 with distance 39.41700457692808.\nINFO:cityseer.graph:Added transport node 48090 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48091 to street node 44638 with distance 49.23111708355105.\nINFO:cityseer.graph:Added transport node 48091 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48092 to street node 21307 with distance 47.46231631285512.\nINFO:cityseer.graph:Linking transport node 48092 to street node 44638 with distance 60.517815284233194.\nINFO:cityseer.graph:Added transport node 48092 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48093 to street node 21307 with distance 49.3661774354131.\nINFO:cityseer.graph:Linking transport node 48093 to street node 44638 with distance 65.30342815633452.\nINFO:cityseer.graph:Added transport node 48093 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48094 to street node 21307 with distance 55.27297877371532.\nINFO:cityseer.graph:Linking transport node 48094 to street node 44638 with distance 60.832919569727316.\nINFO:cityseer.graph:Added transport node 48094 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48095 to street node 46208 with distance 50.28595318525849.\nINFO:cityseer.graph:Added transport node 48095 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48096 to street node 15082 with distance 48.02426257064951.\nINFO:cityseer.graph:Linking transport node 48096 to street node 46205 with distance 52.65906258765025.\nINFO:cityseer.graph:Added transport node 48096 and created 4 link edges.\nINFO:cityseer.graph:Added transport node 48097 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48098 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48099 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48100 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48101 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48102 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48103 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48104 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48105 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48106 and created 0 link edges.\nINFO:cityseer.graph:Linking transport node 48107 to street node 8209 with distance 60.540541100169214.\nINFO:cityseer.graph:Linking transport node 48107 to street node 8210 with distance 36.12012742750083.\nINFO:cityseer.graph:Added transport node 48107 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48108 to street node 8209 with distance 68.31008147313695.\nINFO:cityseer.graph:Linking transport node 48108 to street node 8210 with distance 28.321109412375552.\nINFO:cityseer.graph:Added transport node 48108 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48109 to street node 8209 with distance 72.82573935830364.\nINFO:cityseer.graph:Linking transport node 48109 to street node 8210 with distance 67.2622850798916.\nINFO:cityseer.graph:Added transport node 48109 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48110 to street node 12950 with distance 145.39197918975282.\nINFO:cityseer.graph:Added transport node 48110 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48111 to street node 12950 with distance 143.1191875775109.\nINFO:cityseer.graph:Added transport node 48111 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48112 to street node 12950 with distance 142.27841959294366.\nINFO:cityseer.graph:Added transport node 48112 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48113 to street node 10713 with distance 35.89731235355856.\nINFO:cityseer.graph:Added transport node 48113 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48114 to street node 46128 with distance 117.03002031637257.\nINFO:cityseer.graph:Linking transport node 48114 to street node 46131 with distance 54.133955356056376.\nINFO:cityseer.graph:Added transport node 48114 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48115 to street node 20835 with distance 23.684640636003394.\nINFO:cityseer.graph:Linking transport node 48115 to street node 41015 with distance 44.29127176671039.\nINFO:cityseer.graph:Added transport node 48115 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48116 to street node 32846 with distance 86.29931514702844.\nINFO:cityseer.graph:Added transport node 48116 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48117 to street node 37733 with distance 102.18997192491757.\nINFO:cityseer.graph:Linking transport node 48117 to street node 38994 with distance 22.19652674840181.\nINFO:cityseer.graph:Added transport node 48117 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48118 to street node 2033 with distance 32.160714096751825.\nINFO:cityseer.graph:Linking transport node 48118 to street node 32214 with distance 141.935357840931.\nINFO:cityseer.graph:Added transport node 48118 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48119 to street node 6539 with distance 19.477290266874753.\nINFO:cityseer.graph:Linking transport node 48119 to street node 11688 with distance 54.268625734845465.\nINFO:cityseer.graph:Added transport node 48119 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48120 to street node 17848 with distance 79.08842960596445.\nINFO:cityseer.graph:Added transport node 48120 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48121 to street node 44453 with distance 53.169046565534046.\nINFO:cityseer.graph:Added transport node 48121 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48122 to street node 24692 with distance 64.8462096172054.\nINFO:cityseer.graph:Linking transport node 48122 to street node 24696 with distance 49.08686628779896.\nINFO:cityseer.graph:Added transport node 48122 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48123 to street node 23466 with distance 39.922637427735424.\nINFO:cityseer.graph:Linking transport node 48123 to street node 40602 with distance 15.484632947370391.\nINFO:cityseer.graph:Added transport node 48123 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48124 to street node 38454 with distance 42.477247360964455.\nINFO:cityseer.graph:Linking transport node 48124 to street node 41390 with distance 55.808666994220005.\nINFO:cityseer.graph:Added transport node 48124 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48125 to street node 21473 with distance 60.221604318092.\nINFO:cityseer.graph:Added transport node 48125 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48126 to street node 24053 with distance 101.37830055145042.\nINFO:cityseer.graph:Linking transport node 48126 to street node 24055 with distance 15.387373364818664.\nINFO:cityseer.graph:Added transport node 48126 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48127 to street node 10802 with distance 71.510086675899.\nINFO:cityseer.graph:Linking transport node 48127 to street node 44640 with distance 63.13107289957626.\nINFO:cityseer.graph:Added transport node 48127 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48128 to street node 44638 with distance 49.23111708355105.\nINFO:cityseer.graph:Added transport node 48128 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48129 to street node 46208 with distance 50.28595318525849.\nINFO:cityseer.graph:Added transport node 48129 and created 2 link edges.\nINFO:cityseer.graph:Added transport node 48130 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48131 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48132 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48133 and created 0 link edges.\nINFO:cityseer.graph:Linking transport node 48134 to street node 8209 with distance 60.540541100169214.\nINFO:cityseer.graph:Linking transport node 48134 to street node 8210 with distance 36.12012742750083.\nINFO:cityseer.graph:Added transport node 48134 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48135 to street node 12950 with distance 145.39197918975282.\nINFO:cityseer.graph:Added transport node 48135 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48136 to street node 18334 with distance 22.868405245005874.\nINFO:cityseer.graph:Added transport node 48136 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48137 to street node 9727 with distance 41.47433246426544.\nINFO:cityseer.graph:Linking transport node 48137 to street node 18334 with distance 14.517163009064236.\nINFO:cityseer.graph:Added transport node 48137 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48138 to street node 2634 with distance 31.36742659116248.\nINFO:cityseer.graph:Added transport node 48138 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48139 to street node 2634 with distance 36.283506322634715.\nINFO:cityseer.graph:Linking transport node 48139 to street node 2635 with distance 40.7870956617806.\nINFO:cityseer.graph:Added transport node 48139 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48140 to street node 2644 with distance 35.474807710273765.\nINFO:cityseer.graph:Added transport node 48140 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48141 to street node 24004 with distance 509.095108603707.\nINFO:cityseer.graph:Added transport node 48141 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48142 to street node 29983 with distance 42.12845548270213.\nINFO:cityseer.graph:Added transport node 48142 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48143 to street node 28753 with distance 39.55303582349232.\nINFO:cityseer.graph:Linking transport node 48143 to street node 29974 with distance 39.9674837014131.\nINFO:cityseer.graph:Added transport node 48143 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48144 to street node 29974 with distance 41.94755736961135.\nINFO:cityseer.graph:Linking transport node 48144 to street node 29976 with distance 37.332013740878594.\nINFO:cityseer.graph:Added transport node 48144 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48145 to street node 28753 with distance 33.3842768024645.\nINFO:cityseer.graph:Linking transport node 48145 to street node 29974 with distance 54.160455979523434.\nINFO:cityseer.graph:Added transport node 48145 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48146 to street node 29956 with distance 41.167562622097385.\nINFO:cityseer.graph:Linking transport node 48146 to street node 29960 with distance 18.999589870230427.\nINFO:cityseer.graph:Added transport node 48146 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48147 to street node 29956 with distance 48.930814657715636.\nINFO:cityseer.graph:Linking transport node 48147 to street node 29959 with distance 35.687818807949434.\nINFO:cityseer.graph:Added transport node 48147 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48148 to street node 29956 with distance 33.21631609308061.\nINFO:cityseer.graph:Linking transport node 48148 to street node 29960 with distance 34.351712581791595.\nINFO:cityseer.graph:Added transport node 48148 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48149 to street node 6185 with distance 38.41951521438577.\nINFO:cityseer.graph:Added transport node 48149 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48150 to street node 6185 with distance 41.00015458758737.\nINFO:cityseer.graph:Linking transport node 48150 to street node 29964 with distance 58.800512044468356.\nINFO:cityseer.graph:Added transport node 48150 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48151 to street node 22292 with distance 69.61202951346966.\nINFO:cityseer.graph:Linking transport node 48151 to street node 29952 with distance 105.77496172499488.\nINFO:cityseer.graph:Added transport node 48151 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48152 to street node 35253 with distance 26.687837727749013.\nINFO:cityseer.graph:Linking transport node 48152 to street node 35322 with distance 92.56842306785504.\nINFO:cityseer.graph:Added transport node 48152 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48153 to street node 26046 with distance 41.73652747657872.\nINFO:cityseer.graph:Linking transport node 48153 to street node 30814 with distance 31.952877231536394.\nINFO:cityseer.graph:Added transport node 48153 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48154 to street node 31662 with distance 28.25293140416492.\nINFO:cityseer.graph:Linking transport node 48154 to street node 31664 with distance 62.946196914107276.\nINFO:cityseer.graph:Added transport node 48154 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48155 to street node 27695 with distance 4.750756875614374.\nINFO:cityseer.graph:Linking transport node 48155 to street node 32994 with distance 65.61326988656806.\nINFO:cityseer.graph:Added transport node 48155 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48156 to street node 18004 with distance 56.42093152050967.\nINFO:cityseer.graph:Linking transport node 48156 to street node 39030 with distance 69.63807465891261.\nINFO:cityseer.graph:Added transport node 48156 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48157 to street node 16016 with distance 57.03831636390607.\nINFO:cityseer.graph:Added transport node 48157 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48158 to street node 16016 with distance 41.78571386809209.\nINFO:cityseer.graph:Linking transport node 48158 to street node 16280 with distance 41.23741520848721.\nINFO:cityseer.graph:Added transport node 48158 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48159 to street node 15463 with distance 65.2699148058722.\nINFO:cityseer.graph:Linking transport node 48159 to street node 17403 with distance 52.847444856788094.\nINFO:cityseer.graph:Added transport node 48159 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48160 to street node 15463 with distance 40.72143058068778.\nINFO:cityseer.graph:Linking transport node 48160 to street node 17403 with distance 24.050844968612495.\nINFO:cityseer.graph:Added transport node 48160 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48161 to street node 15463 with distance 84.295684917905.\nINFO:cityseer.graph:Linking transport node 48161 to street node 17403 with distance 76.15235137960475.\nINFO:cityseer.graph:Added transport node 48161 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48162 to street node 15104 with distance 194.8698208947696.\nINFO:cityseer.graph:Linking transport node 48162 to street node 17118 with distance 26.134995940770374.\nINFO:cityseer.graph:Added transport node 48162 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48163 to street node 27374 with distance 64.05391726422069.\nINFO:cityseer.graph:Linking transport node 48163 to street node 27376 with distance 66.38556487098981.\nINFO:cityseer.graph:Added transport node 48163 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48164 to street node 27371 with distance 16.044732714116343.\nINFO:cityseer.graph:Added transport node 48164 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48165 to street node 27374 with distance 49.17667692180491.\nINFO:cityseer.graph:Linking transport node 48165 to street node 27376 with distance 67.49264226033955.\nINFO:cityseer.graph:Added transport node 48165 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48166 to street node 27370 with distance 22.082880012907946.\nINFO:cityseer.graph:Linking transport node 48166 to street node 27371 with distance 20.618965535286016.\nINFO:cityseer.graph:Added transport node 48166 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48167 to street node 31303 with distance 81.5959032148888.\nINFO:cityseer.graph:Added transport node 48167 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48168 to street node 31303 with distance 26.09103498398015.\nINFO:cityseer.graph:Added transport node 48168 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48169 to street node 7567 with distance 48.76634904801944.\nINFO:cityseer.graph:Linking transport node 48169 to street node 7568 with distance 15.011958899016026.\nINFO:cityseer.graph:Added transport node 48169 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48170 to street node 31303 with distance 24.90743632932002.\nINFO:cityseer.graph:Added transport node 48170 and created 2 link edges.\n 82%|████████▏ | 1042/1272 [00:01&lt;00:00, 670.97it/s]INFO:cityseer.graph:Linking transport node 48171 to street node 7717 with distance 44.642498570697185.\nINFO:cityseer.graph:Added transport node 48171 and created 2 link edges.\nINFO:cityseer.graph:Added transport node 48172 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48173 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48174 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48175 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48176 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48177 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48178 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48179 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48180 and created 0 link edges.\nINFO:cityseer.graph:Linking transport node 48181 to street node 31308 with distance 115.54462758747817.\nINFO:cityseer.graph:Added transport node 48181 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48182 to street node 31308 with distance 124.74523939501296.\nINFO:cityseer.graph:Added transport node 48182 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48183 to street node 31308 with distance 119.95715891302677.\nINFO:cityseer.graph:Added transport node 48183 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48184 to street node 11253 with distance 154.17303927592118.\nINFO:cityseer.graph:Linking transport node 48184 to street node 11255 with distance 30.65375980286122.\nINFO:cityseer.graph:Added transport node 48184 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48185 to street node 6991 with distance 51.85008277235011.\nINFO:cityseer.graph:Added transport node 48185 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48186 to street node 12824 with distance 9.210531366219382.\nINFO:cityseer.graph:Added transport node 48186 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48187 to street node 12824 with distance 15.374493022632725.\nINFO:cityseer.graph:Added transport node 48187 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48188 to street node 12824 with distance 15.328869017010962.\nINFO:cityseer.graph:Added transport node 48188 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48189 to street node 20375 with distance 23.148498549339912.\nINFO:cityseer.graph:Added transport node 48189 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48190 to street node 20375 with distance 13.31185218173692.\nINFO:cityseer.graph:Added transport node 48190 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48191 to street node 20375 with distance 15.862758591786061.\nINFO:cityseer.graph:Added transport node 48191 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48192 to street node 15275 with distance 233.8165127745065.\nINFO:cityseer.graph:Linking transport node 48192 to street node 15286 with distance 94.0876622222716.\nINFO:cityseer.graph:Added transport node 48192 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48193 to street node 15275 with distance 250.101939195353.\nINFO:cityseer.graph:Linking transport node 48193 to street node 15286 with distance 73.45859154581979.\nINFO:cityseer.graph:Added transport node 48193 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48194 to street node 15275 with distance 263.61176810339566.\nINFO:cityseer.graph:Linking transport node 48194 to street node 15286 with distance 56.729705168510385.\nINFO:cityseer.graph:Added transport node 48194 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48195 to street node 10949 with distance 205.7269544588422.\nINFO:cityseer.graph:Linking transport node 48195 to street node 10950 with distance 249.01206616619453.\nINFO:cityseer.graph:Added transport node 48195 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48196 to street node 10949 with distance 201.50015149090814.\nINFO:cityseer.graph:Linking transport node 48196 to street node 10950 with distance 247.3936280824365.\nINFO:cityseer.graph:Added transport node 48196 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48197 to street node 10949 with distance 212.18429134371527.\nINFO:cityseer.graph:Linking transport node 48197 to street node 10950 with distance 260.37886761397635.\nINFO:cityseer.graph:Added transport node 48197 and created 4 link edges.\nINFO:cityseer.graph:Added transport node 48198 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48199 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48200 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48201 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48202 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48203 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48204 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48205 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48206 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48207 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48208 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48209 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48210 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48211 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48212 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48213 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48214 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48215 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48216 and created 0 link edges.\nINFO:cityseer.graph:Linking transport node 48217 to street node 18334 with distance 22.868405245005874.\nINFO:cityseer.graph:Added transport node 48217 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48218 to street node 2634 with distance 31.36742659116248.\nINFO:cityseer.graph:Added transport node 48218 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48219 to street node 28753 with distance 39.55303582349232.\nINFO:cityseer.graph:Linking transport node 48219 to street node 29974 with distance 39.9674837014131.\nINFO:cityseer.graph:Added transport node 48219 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48220 to street node 29956 with distance 41.167562622097385.\nINFO:cityseer.graph:Linking transport node 48220 to street node 29960 with distance 18.999589870230427.\nINFO:cityseer.graph:Added transport node 48220 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48221 to street node 16016 with distance 57.03831636390607.\nINFO:cityseer.graph:Added transport node 48221 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48222 to street node 15463 with distance 65.2699148058722.\nINFO:cityseer.graph:Linking transport node 48222 to street node 17403 with distance 52.847444856788094.\nINFO:cityseer.graph:Added transport node 48222 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48223 to street node 27374 with distance 64.05391726422069.\nINFO:cityseer.graph:Linking transport node 48223 to street node 27376 with distance 66.38556487098981.\nINFO:cityseer.graph:Added transport node 48223 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48224 to street node 31303 with distance 81.5959032148888.\nINFO:cityseer.graph:Added transport node 48224 and created 2 link edges.\nINFO:cityseer.graph:Added transport node 48225 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48226 and created 0 link edges.\nINFO:cityseer.graph:Linking transport node 48227 to street node 31308 with distance 115.54462758747817.\nINFO:cityseer.graph:Added transport node 48227 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48228 to street node 11253 with distance 154.17303927592118.\nINFO:cityseer.graph:Linking transport node 48228 to street node 11255 with distance 30.65375980286122.\nINFO:cityseer.graph:Added transport node 48228 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48229 to street node 12824 with distance 9.210531366219382.\nINFO:cityseer.graph:Added transport node 48229 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48230 to street node 20375 with distance 23.148498549339912.\nINFO:cityseer.graph:Added transport node 48230 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48231 to street node 15275 with distance 233.8165127745065.\nINFO:cityseer.graph:Linking transport node 48231 to street node 15286 with distance 94.0876622222716.\nINFO:cityseer.graph:Added transport node 48231 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48232 to street node 10949 with distance 205.7269544588422.\nINFO:cityseer.graph:Linking transport node 48232 to street node 10950 with distance 249.01206616619453.\nINFO:cityseer.graph:Added transport node 48232 and created 4 link edges.\nINFO:cityseer.graph:Added transport node 48233 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48234 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48235 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48236 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48237 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48238 and created 0 link edges.\nINFO:cityseer.graph:Linking transport node 48239 to street node 1925 with distance 214.26432076785377.\nINFO:cityseer.graph:Added transport node 48239 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48240 to street node 24483 with distance 93.1703980993933.\nINFO:cityseer.graph:Linking transport node 48240 to street node 24484 with distance 9.30065638202225.\nINFO:cityseer.graph:Added transport node 48240 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48241 to street node 24483 with distance 48.36557618428804.\nINFO:cityseer.graph:Linking transport node 48241 to street node 24484 with distance 49.87725056419062.\nINFO:cityseer.graph:Added transport node 48241 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48242 to street node 26323 with distance 77.8283349317443.\nINFO:cityseer.graph:Added transport node 48242 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48243 to street node 24483 with distance 54.39460371697825.\nINFO:cityseer.graph:Added transport node 48243 and created 2 link edges.\n 88%|████████▊ | 1115/1272 [00:01&lt;00:00, 672.30it/s]INFO:cityseer.graph:Linking transport node 48244 to street node 25202 with distance 49.72689914890222.\nINFO:cityseer.graph:Added transport node 48244 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48245 to street node 9275 with distance 34.56101475350672.\nINFO:cityseer.graph:Linking transport node 48245 to street node 25204 with distance 50.62168472961263.\nINFO:cityseer.graph:Added transport node 48245 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48246 to street node 25202 with distance 44.922735128078564.\nINFO:cityseer.graph:Added transport node 48246 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48247 to street node 25204 with distance 47.983181062804654.\nINFO:cityseer.graph:Added transport node 48247 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48248 to street node 14087 with distance 81.21591212961656.\nINFO:cityseer.graph:Linking transport node 48248 to street node 18248 with distance 31.894351902382283.\nINFO:cityseer.graph:Added transport node 48248 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48249 to street node 39374 with distance 11.560962127741721.\nINFO:cityseer.graph:Linking transport node 48249 to street node 44579 with distance 18.394729957236237.\nINFO:cityseer.graph:Added transport node 48249 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48250 to street node 14292 with distance 44.601384783774975.\nINFO:cityseer.graph:Linking transport node 48250 to street node 18248 with distance 52.673747086944275.\nINFO:cityseer.graph:Added transport node 48250 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48251 to street node 14292 with distance 39.16323049134336.\nINFO:cityseer.graph:Linking transport node 48251 to street node 18248 with distance 58.812478245371445.\nINFO:cityseer.graph:Added transport node 48251 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48252 to street node 38525 with distance 26.03345559351913.\nINFO:cityseer.graph:Added transport node 48252 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48253 to street node 32723 with distance 50.81755425211374.\nINFO:cityseer.graph:Added transport node 48253 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48254 to street node 32723 with distance 35.359231775618824.\nINFO:cityseer.graph:Added transport node 48254 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48255 to street node 3841 with distance 74.59817012815935.\nINFO:cityseer.graph:Linking transport node 48255 to street node 6114 with distance 66.78773237499998.\nINFO:cityseer.graph:Added transport node 48255 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48256 to street node 3841 with distance 65.80479382525371.\nINFO:cityseer.graph:Linking transport node 48256 to street node 6114 with distance 56.39368248539814.\nINFO:cityseer.graph:Added transport node 48256 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48257 to street node 3841 with distance 58.20747698517265.\nINFO:cityseer.graph:Linking transport node 48257 to street node 6114 with distance 58.346091643764524.\nINFO:cityseer.graph:Added transport node 48257 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48258 to street node 19720 with distance 14.981637045290922.\nINFO:cityseer.graph:Added transport node 48258 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48259 to street node 6673 with distance 40.95351873448968.\nINFO:cityseer.graph:Linking transport node 48259 to street node 19720 with distance 18.520218622233475.\nINFO:cityseer.graph:Added transport node 48259 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48260 to street node 19721 with distance 40.764196342271795.\nINFO:cityseer.graph:Added transport node 48260 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48261 to street node 24483 with distance 93.1703980993933.\nINFO:cityseer.graph:Linking transport node 48261 to street node 24484 with distance 9.30065638202225.\nINFO:cityseer.graph:Added transport node 48261 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48262 to street node 25202 with distance 49.72689914890222.\nINFO:cityseer.graph:Added transport node 48262 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48263 to street node 14087 with distance 81.21591212961656.\nINFO:cityseer.graph:Linking transport node 48263 to street node 18248 with distance 31.894351902382283.\nINFO:cityseer.graph:Added transport node 48263 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48264 to street node 38525 with distance 26.03345559351913.\nINFO:cityseer.graph:Added transport node 48264 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48265 to street node 3841 with distance 74.59817012815935.\nINFO:cityseer.graph:Linking transport node 48265 to street node 6114 with distance 66.78773237499998.\nINFO:cityseer.graph:Added transport node 48265 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48266 to street node 19720 with distance 14.981637045290922.\nINFO:cityseer.graph:Added transport node 48266 and created 2 link edges.\nINFO:cityseer.graph:Added transport node 48267 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48268 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48269 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48270 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48271 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48272 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48273 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48274 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48275 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48276 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48277 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48278 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48279 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48280 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48281 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48282 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48283 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48284 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48285 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48286 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48287 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48288 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48289 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48290 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48291 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48292 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48293 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48294 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48295 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48296 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48297 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48298 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48299 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48300 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48301 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48302 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48303 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48304 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48305 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48306 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48307 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48308 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48309 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48310 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48311 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48312 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48313 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48314 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48315 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48316 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48317 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48318 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48319 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48320 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48321 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48322 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48323 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48324 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48325 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48326 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48327 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48328 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48329 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48330 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48331 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48332 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48333 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48334 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48335 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48336 and created 0 link edges.\nINFO:cityseer.graph:Linking transport node 48337 to street node 15384 with distance 72.49896988333025.\nINFO:cityseer.graph:Added transport node 48337 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48338 to street node 417 with distance 124.70614984937362.\nINFO:cityseer.graph:Linking transport node 48338 to street node 418 with distance 392.0354373698891.\nINFO:cityseer.graph:Added transport node 48338 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48339 to street node 417 with distance 123.46784565057014.\nINFO:cityseer.graph:Linking transport node 48339 to street node 418 with distance 390.9722299298423.\nINFO:cityseer.graph:Added transport node 48339 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48340 to street node 13484 with distance 127.99210325691895.\nINFO:cityseer.graph:Linking transport node 48340 to street node 15384 with distance 61.628681898780066.\nINFO:cityseer.graph:Added transport node 48340 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48341 to street node 15384 with distance 55.51642924389591.\nINFO:cityseer.graph:Added transport node 48341 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48342 to street node 304 with distance 33.63637270756363.\nINFO:cityseer.graph:Linking transport node 48342 to street node 449 with distance 42.45552825438527.\nINFO:cityseer.graph:Added transport node 48342 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48343 to street node 304 with distance 18.06450455859394.\nINFO:cityseer.graph:Linking transport node 48343 to street node 449 with distance 49.47305487507173.\nINFO:cityseer.graph:Added transport node 48343 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48344 to street node 449 with distance 39.848585386935554.\nINFO:cityseer.graph:Added transport node 48344 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48345 to street node 11997 with distance 239.30318734808912.\nINFO:cityseer.graph:Linking transport node 48345 to street node 11998 with distance 262.15409348668595.\nINFO:cityseer.graph:Added transport node 48345 and created 4 link edges.\n 96%|█████████▌| 1217/1272 [00:01&lt;00:00, 761.71it/s]INFO:cityseer.graph:Linking transport node 48346 to street node 11998 with distance 237.7384107889812.\nINFO:cityseer.graph:Linking transport node 48346 to street node 44215 with distance 148.28770182771547.\nINFO:cityseer.graph:Added transport node 48346 and created 4 link edges.\nINFO:cityseer.graph:Added transport node 48347 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48348 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48349 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48350 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48351 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48352 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48353 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48354 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48355 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48356 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48357 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48358 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48359 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48360 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48361 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48362 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48363 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48364 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48365 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48366 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48367 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48368 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48369 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48370 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48371 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48372 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48373 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48374 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48375 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48376 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48377 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48378 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48379 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48380 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48381 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48382 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48383 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48384 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48385 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48386 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48387 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48388 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48389 and created 0 link edges.\nINFO:cityseer.graph:Linking transport node 48390 to street node 15384 with distance 72.49896988333025.\nINFO:cityseer.graph:Added transport node 48390 and created 2 link edges.\nINFO:cityseer.graph:Linking transport node 48391 to street node 304 with distance 33.63637270756363.\nINFO:cityseer.graph:Linking transport node 48391 to street node 449 with distance 42.45552825438527.\nINFO:cityseer.graph:Added transport node 48391 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48392 to street node 11997 with distance 239.30318734808912.\nINFO:cityseer.graph:Linking transport node 48392 to street node 11998 with distance 262.15409348668595.\nINFO:cityseer.graph:Added transport node 48392 and created 4 link edges.\nINFO:cityseer.graph:Added transport node 48393 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48394 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48395 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48396 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48397 and created 0 link edges.\nINFO:cityseer.graph:Added transport node 48398 and created 0 link edges.\nINFO:cityseer.graph:Linking transport node 48399 to street node 29332 with distance 25.896252735954043.\nINFO:cityseer.graph:Linking transport node 48399 to street node 29333 with distance 11.615973177763903.\nINFO:cityseer.graph:Added transport node 48399 and created 4 link edges.\nINFO:cityseer.graph:Linking transport node 48400 to street node 18004 with distance 57.485535761447196.\nINFO:cityseer.graph:Linking transport node 48400 to street node 39030 with distance 65.27668037407327.\nINFO:cityseer.graph:Added transport node 48400 and created 4 link edges.\n100%|██████████| 1272/1272 [00:01&lt;00:00, 654.86it/s]\nINFO:cityseer.tools.io:Generating segment durations between stops.\nINFO:cityseer.tools.io:Adding GTFS segments to network edges.\n100%|██████████| 279/279 [00:00&lt;00:00, 66094.93it/s]\nINFO:cityseer.graph:Edge R-tree built successfully with 104026 items.\nstops\n\n\n\n\n\n\n\n\nstop_id\nstop_code\nstop_name\nstop_desc\nstop_lat\nstop_lon\nzone_id\nstop_url\nlocation_type\nparent_station\nstop_timezone\nwheelchair_boarding\navg_wait_time\n\n\n\n\n0\ngtfs-data/madrid_gtfs/madrid_metro-par_4_1\n1\nPLAZA DE CASTILLA\nPaseo de la Castellana 189\n40.46690\n-3.68917\nA\nhttp://www.crtm.es\n0\nest_90_21\nNaN\n0\n430.357143\n\n\n1\ngtfs-data/madrid_gtfs/madrid_metro-acc_4_1_1\n1\nPlaza de Castilla\nPaseo de la Castellana 189\n40.46682\n-3.68918\nNaN\nhttp://www.crtm.es\n2\nest_90_21\nNaN\n0\nNaN\n\n\n2\ngtfs-data/madrid_gtfs/madrid_metro-acc_4_1_1040\n1\nAscensor\nPlaza de Castilla 9\n40.46555\n-3.68877\nNaN\nhttp://www.crtm.es\n2\nest_90_21\nNaN\n0\nNaN\n\n\n3\ngtfs-data/madrid_gtfs/madrid_metro-acc_4_1_1043\n1\nIntercambiador Superficie\nPaseo de la Castellana 191 B\n40.46728\n-3.68915\nNaN\nhttp://www.crtm.es\n2\nest_90_21\nNaN\n0\nNaN\n\n\n4\ngtfs-data/madrid_gtfs/madrid_metro-acc_4_1_1044\n1\nAscensor\nPaseo de la Castellana 189\n40.46702\n-3.68918\nNaN\nhttp://www.crtm.es\n2\nest_90_21\nNaN\n0\nNaN\n\n\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n\n\n1267\ngtfs-data/madrid_gtfs/madrid_metro-est_4_234\n234\nHOSPITAL SEVERO OCHOA\nAvda Orellana 3\n40.32177\n-3.76797\nB1\nhttp://www.crtm.es\n1\nNaN\nEurope/Madrid\n2\nNaN\n\n\n1268\ngtfs-data/madrid_gtfs/madrid_metro-est_4_235\n235\nLEGANES CENTRAL\nCalle Virgen del Camino 1\n40.32899\n-3.77154\nB1\nhttp://www.crtm.es\n1\nNaN\nEurope/Madrid\n2\nNaN\n\n\n1269\ngtfs-data/madrid_gtfs/madrid_metro-est_4_236\n236\nSAN NICASIO\nAvda Mar Mediterráneo SN\n40.33616\n-3.77587\nB1\nhttp://www.crtm.es\n1\nNaN\nEurope/Madrid\n2\nNaN\n\n\n1270\ngtfs-data/madrid_gtfs/madrid_metro-par_4_237\n237\nOPERA\nPlaza de Isabel II 9\n40.41809\n-3.70928\nA\nhttp://www.crtm.es\n0\nest_4_36\nNaN\n0\n13.214286\n\n\n1271\ngtfs-data/madrid_gtfs/madrid_metro-par_4_238\n238\nPRINCIPE PIO\nPaseo de la Florida 2\n40.42099\n-3.72033\nA\nhttp://www.crtm.es\n0\nest_90_18\nNaN\n1\n13.214286\n\n\n\n\n1272 rows × 13 columns\n# convert stops to geopandas\nstops_gdf = gpd.GeoDataFrame(\n    stops,\n    geometry=gpd.points_from_xy(stops[\"stop_lon\"], stops[\"stop_lat\"]),\n    crs=4326,  # Adjust the CRS to suit your data if needed\n)\nstops_gdf = stops_gdf.to_crs(streets_gpd.crs.to_epsg())\nstops_gdf\n\n\n\n\n\n\n\n\nstop_id\nstop_code\nstop_name\nstop_desc\nstop_lat\nstop_lon\nzone_id\nstop_url\nlocation_type\nparent_station\nstop_timezone\nwheelchair_boarding\navg_wait_time\ngeometry\n\n\n\n\n0\ngtfs-data/madrid_gtfs/madrid_metro-par_4_1\n1\nPLAZA DE CASTILLA\nPaseo de la Castellana 189\n40.46690\n-3.68917\nA\nhttp://www.crtm.es\n0\nest_90_21\nNaN\n0\n430.357143\nPOINT (441575.052 4479808.7)\n\n\n1\ngtfs-data/madrid_gtfs/madrid_metro-acc_4_1_1\n1\nPlaza de Castilla\nPaseo de la Castellana 189\n40.46682\n-3.68918\nNaN\nhttp://www.crtm.es\n2\nest_90_21\nNaN\n0\nNaN\nPOINT (441574.135 4479799.826)\n\n\n2\ngtfs-data/madrid_gtfs/madrid_metro-acc_4_1_1040\n1\nAscensor\nPlaza de Castilla 9\n40.46555\n-3.68877\nNaN\nhttp://www.crtm.es\n2\nest_90_21\nNaN\n0\nNaN\nPOINT (441607.793 4479658.584)\n\n\n3\ngtfs-data/madrid_gtfs/madrid_metro-acc_4_1_1043\n1\nIntercambiador Superficie\nPaseo de la Castellana 191 B\n40.46728\n-3.68915\nNaN\nhttp://www.crtm.es\n2\nest_90_21\nNaN\n0\nNaN\nPOINT (441577.077 4479850.867)\n\n\n4\ngtfs-data/madrid_gtfs/madrid_metro-acc_4_1_1044\n1\nAscensor\nPaseo de la Castellana 189\n40.46702\n-3.68918\nNaN\nhttp://www.crtm.es\n2\nest_90_21\nNaN\n0\nNaN\nPOINT (441574.308 4479822.026)\n\n\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n\n\n1267\ngtfs-data/madrid_gtfs/madrid_metro-est_4_234\n234\nHOSPITAL SEVERO OCHOA\nAvda Orellana 3\n40.32177\n-3.76797\nB1\nhttp://www.crtm.es\n1\nNaN\nEurope/Madrid\n2\nNaN\nPOINT (434754.721 4463754.488)\n\n\n1268\ngtfs-data/madrid_gtfs/madrid_metro-est_4_235\n235\nLEGANES CENTRAL\nCalle Virgen del Camino 1\n40.32899\n-3.77154\nB1\nhttp://www.crtm.es\n1\nNaN\nEurope/Madrid\n2\nNaN\nPOINT (434458.401 4464558.532)\n\n\n1269\ngtfs-data/madrid_gtfs/madrid_metro-est_4_236\n236\nSAN NICASIO\nAvda Mar Mediterráneo SN\n40.33616\n-3.77587\nB1\nhttp://www.crtm.es\n1\nNaN\nEurope/Madrid\n2\nNaN\nPOINT (434097.544 4465357.604)\n\n\n1270\ngtfs-data/madrid_gtfs/madrid_metro-par_4_237\n237\nOPERA\nPlaza de Isabel II 9\n40.41809\n-3.70928\nA\nhttp://www.crtm.es\n0\nest_4_36\nNaN\n0\n13.214286\nPOINT (439826.687 4474404.289)\n\n\n1271\ngtfs-data/madrid_gtfs/madrid_metro-par_4_238\n238\nPRINCIPE PIO\nPaseo de la Florida 2\n40.42099\n-3.72033\nA\nhttp://www.crtm.es\n0\nest_90_18\nNaN\n1\n13.214286\nPOINT (438891.852 4474733.771)\n\n\n\n\n1272 rows × 14 columns\nstops.avg_wait_time.describe()\n# count nan\nstops.avg_wait_time.isna().sum()\n# impute\n\nnp.int64(982)\navg_stop_pairs\n\n\n\n\n\n\n\n\nprev_stop_id\nnext_stop_id\navg_segment_time\n\n\n\n\n0\ngtfs-data/madrid_gtfs/madrid_metro-par_4_1\ngtfs-data/madrid_gtfs/madrid_metro-par_4_10\n92.0\n\n\n1\ngtfs-data/madrid_gtfs/madrid_metro-par_4_10\ngtfs-data/madrid_gtfs/madrid_metro-par_4_11\n80.0\n\n\n2\ngtfs-data/madrid_gtfs/madrid_metro-par_4_100\ngtfs-data/madrid_gtfs/madrid_metro-par_4_101\n86.5\n\n\n3\ngtfs-data/madrid_gtfs/madrid_metro-par_4_101\ngtfs-data/madrid_gtfs/madrid_metro-par_4_102\n126.5\n\n\n4\ngtfs-data/madrid_gtfs/madrid_metro-par_4_102\ngtfs-data/madrid_gtfs/madrid_metro-par_4_103\n184.0\n\n\n...\n...\n...\n...\n\n\n274\ngtfs-data/madrid_gtfs/madrid_metro-par_4_94\ngtfs-data/madrid_gtfs/madrid_metro-par_4_95\n110.0\n\n\n275\ngtfs-data/madrid_gtfs/madrid_metro-par_4_95\ngtfs-data/madrid_gtfs/madrid_metro-par_4_96\n107.5\n\n\n276\ngtfs-data/madrid_gtfs/madrid_metro-par_4_96\ngtfs-data/madrid_gtfs/madrid_metro-par_4_97\n104.5\n\n\n277\ngtfs-data/madrid_gtfs/madrid_metro-par_4_97\ngtfs-data/madrid_gtfs/madrid_metro-par_4_98\n93.0\n\n\n278\ngtfs-data/madrid_gtfs/madrid_metro-par_4_98\ngtfs-data/madrid_gtfs/madrid_metro-par_4_99\n116.5\n\n\n\n\n279 rows × 3 columns\nThe centrality methods can now be computed.\ndistances = [500, 2000, 5000]\nnodes_gdf = networks.node_centrality_shortest(\n    network_structure=network_structure,\n    nodes_gdf=nodes_gdf,\n    distances=distances,\n)\n\nINFO:cityseer.metrics.networks:Computing shortest path node centrality.\n100%|██████████| 47129/47129 [03:47&lt;00:00, 206.88it/s]\nINFO:cityseer.config:Metrics computed for:\nINFO:cityseer.config:Distance: 500m, Beta: 0.008, Walking Time: 6.25 minutes.\nINFO:cityseer.config:Distance: 2000m, Beta: 0.002, Walking Time: 25.0 minutes.\nINFO:cityseer.config:Distance: 5000m, Beta: 0.0008, Walking Time: 62.5 minutes.\nnodes_gdf.columns\n\nIndex(['ns_node_idx', 'x', 'y', 'live', 'weight', 'primal_edge',\n       'primal_edge_node_a', 'primal_edge_node_b', 'primal_edge_idx',\n       'dual_node', 'cc_beta_500', 'cc_beta_2000', 'cc_beta_5000',\n       'cc_cycles_500', 'cc_cycles_2000', 'cc_cycles_5000', 'cc_density_500',\n       'cc_density_2000', 'cc_density_5000', 'cc_farness_500',\n       'cc_farness_2000', 'cc_farness_5000', 'cc_harmonic_500',\n       'cc_harmonic_2000', 'cc_harmonic_5000', 'cc_hillier_500',\n       'cc_hillier_2000', 'cc_hillier_5000', 'cc_betweenness_500',\n       'cc_betweenness_2000', 'cc_betweenness_5000', 'cc_betweenness_beta_500',\n       'cc_betweenness_beta_2000', 'cc_betweenness_beta_5000',\n       'cc_beta_500_not', 'cc_beta_2000_not', 'cc_beta_5000_not',\n       'cc_cycles_500_not', 'cc_cycles_2000_not', 'cc_cycles_5000_not',\n       'cc_density_500_not', 'cc_density_2000_not', 'cc_density_5000_not',\n       'cc_farness_500_not', 'cc_farness_2000_not', 'cc_farness_5000_not',\n       'cc_harmonic_500_not', 'cc_harmonic_2000_not', 'cc_harmonic_5000_not',\n       'cc_hillier_500_not', 'cc_hillier_2000_not', 'cc_hillier_5000_not',\n       'cc_betweenness_500_not', 'cc_betweenness_2000_not',\n       'cc_betweenness_5000_not', 'cc_betweenness_beta_500_not',\n       'cc_betweenness_beta_2000_not', 'cc_betweenness_beta_5000_not'],\n      dtype='object')"
  },
  {
    "objectID": "recipes/centrality/centrality_metro.html#plots",
    "href": "recipes/centrality/centrality_metro.html#plots",
    "title": "Calculate centralities",
    "section": "Plots",
    "text": "Plots\nLet’s plot a selection of distance thresholds for each of the computed measures.\n\nimport matplotlib.colors as colors\n\nfig, axes = plt.subplots(2, 1, figsize=(8, 12), facecolor=\"#1d1d1d\")\nfig.suptitle(\n    \"Shortest path centrality\",\n    fontsize=10,\n    color=\"#ddd\",\n)\n\nnodes_gdf.plot(\n    column=\"cc_harmonic_2000\",\n    cmap=\"magma\",\n    legend=False,\n    ax=axes[0],\n)\naxes[0].set_title(\n    \"Harmonic closeness centrality\",\n    fontsize=8,\n    color=\"#ddd\",\n)\nstops_gdf.plot(ax=axes[0], color=\"red\", markersize=1)\n\nnodes_gdf.plot(\n    column=\"cc_betweenness_2000\",\n    cmap=\"magma\",\n    norm=colors.LogNorm(),  # Apply log normalization\n    legend=False,\n    ax=axes[1],\n)\naxes[1].set_title(\n    \"Betweenness centrality\",\n    fontsize=8,\n    color=\"#ddd\",\n)\nstops_gdf.plot(ax=axes[1], color=\"red\", markersize=1)\n\nfor ax in axes:\n    ax.set_xlim(438500, 438500 + 3500)\n    ax.set_ylim(4472500, 4472500 + 3500)\n    ax.axis(False)\n\nplt.tight_layout()\n\n\n\n\n\n\n\n\n\nnodes_gdf[\"cc_harmonic_2000_diff\"] = (\n    nodes_gdf[\"cc_harmonic_2000\"] - nodes_gdf[\"cc_harmonic_2000_not\"]\n)\nnodes_gdf[\"cc_betweenness_2000_diff\"] = (\n    nodes_gdf[\"cc_betweenness_2000\"] - nodes_gdf[\"cc_betweenness_2000_not\"]\n)\n\n\nfig, axes = plt.subplots(2, 1, figsize=(8, 12), facecolor=\"#1d1d1d\")\nfig.suptitle(\n    \"Shortest path centrality\",\n    fontsize=10,\n    color=\"#ddd\",\n)\n\nnodes_gdf.plot(\n    column=\"cc_harmonic_2000_diff\",\n    cmap=\"viridis\",\n    legend=False,\n    ax=axes[0],\n)\naxes[0].set_title(\n    \"Harmonic closeness centrality\",\n    fontsize=8,\n    color=\"#ddd\",\n)\nstops_gdf.plot(ax=axes[0], color=\"red\", markersize=1)\n\nnodes_gdf.plot(\n    column=\"cc_betweenness_2000_diff\",\n    cmap=\"viridis\",\n    norm=colors.LogNorm(),  # Apply log normalization\n    legend=False,\n    ax=axes[1],\n)\naxes[1].set_title(\n    \"Betweenness centrality\",\n    fontsize=8,\n    color=\"#ddd\",\n)\nstops_gdf.plot(ax=axes[1], color=\"red\", markersize=1)\n\nfor ax in axes:\n    ax.set_xlim(438500, 438500 + 3500)\n    ax.set_ylim(4472500, 4472500 + 3500)\n    ax.axis(False)\n\nplt.tight_layout()"
  },
  {
    "objectID": "recipes/centrality/gpd_angular_centrality.html",
    "href": "recipes/centrality/gpd_angular_centrality.html",
    "title": "Angular distance network centrality",
    "section": "",
    "text": "Calculate angular (geometric or “simplest”) distance centralities from a geopandas GeoDataFrame.\n\nimport geopandas as gpd\nimport matplotlib.pyplot as plt\nfrom cityseer.metrics import networks\nfrom cityseer.tools import graphs, io\n\nPrepare the network as shown in other examples. Working with the dual graph is recommended.\n\nstreets_gpd = gpd.read_file(\"data/madrid_streets/street_network.gpkg\")\nstreets_gpd = streets_gpd.explode(reset_index=True)\nG = io.nx_from_generic_geopandas(streets_gpd)\nG_dual = graphs.nx_to_dual(G)\n\n100%|██████████| 47155/47155 [00:06&lt;00:00, 7660.93it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\n100%|██████████| 47129/47129 [00:00&lt;00:00, 275503.32it/s]\nINFO:cityseer.tools.graphs:Converting graph to dual.\nINFO:cityseer.tools.graphs:Preparing dual nodes\n100%|██████████| 47129/47129 [00:01&lt;00:00, 43327.77it/s]\nINFO:cityseer.tools.graphs:Preparing dual edges (splitting and welding geoms)\n100%|██████████| 47129/47129 [01:01&lt;00:00, 762.82it/s] \n\n\nUse network_structure_from_nx from the cityseer package’s io module to prepare the GeoDataFrames and NetworkStructure.\n\n# prepare the data structures\nnodes_gdf, _edges_gdf, network_structure = io.network_structure_from_nx(\n    G_dual,\n)\n\nINFO:cityseer.tools.io:Preparing node and edge arrays from networkX graph.\n100%|██████████| 47129/47129 [00:01&lt;00:00, 46406.45it/s]\n100%|██████████| 47129/47129 [00:11&lt;00:00, 4182.15it/s]\nINFO:cityseer.graph:Edge R-tree built successfully with 104026 items.\n\n\nUse the node_centrality_simplest function from the cityseer package’s networks module to calculate shortest angular (geometric or “simplest”) distance centralities. The function requires a NetworkStructure and nodes GeoDataFrame prepared with the network_structure_from_nx function in the previous step.\nThe function can calculate centralities for numerous distances at once via the distances parameter, which accepts a list of distances.\nThe function returns the nodes GeoDataFrame with the outputs of the centralities added as columns. The columns are named cc_{centrality}_{distance}_ang. Standard geopandas functionality can be used to explore, visualise, or save the results. See the documentation for more information on the available centrality formulations.\n\ndistances = [500, 2000]\nnodes_gdf = networks.node_centrality_simplest(\n    network_structure=network_structure,\n    nodes_gdf=nodes_gdf,\n    distances=distances,\n)\nnodes_gdf.head()\n\nINFO:cityseer.metrics.networks:Computing simplest path node centrality.\n100%|██████████| 47129/47129 [00:04&lt;00:00, 11652.78it/s]\nINFO:cityseer.config:Metrics computed for:\nINFO:cityseer.config:Distance: 500m, Beta: 0.008, Walking Time: 6.25 minutes.\nINFO:cityseer.config:Distance: 2000m, Beta: 0.002, Walking Time: 25.0 minutes.\n\n\n\n\n\n\n\n\n\nns_node_idx\nx\ny\nlive\nweight\nprimal_edge\nprimal_edge_node_a\nprimal_edge_node_b\nprimal_edge_idx\ndual_node\ncc_density_500_ang\ncc_density_2000_ang\ncc_harmonic_500_ang\ncc_harmonic_2000_ang\ncc_hillier_500_ang\ncc_hillier_2000_ang\ncc_farness_500_ang\ncc_farness_2000_ang\ncc_betweenness_500_ang\ncc_betweenness_2000_ang\n\n\n\n\nx454839.5-y4476885.3_x454855.9-y4476818.6_k0\n0\n454848.067543\n4.476852e+06\nTrue\n1\nLINESTRING (454855.9 4476818.6, 454849.1 44768...\nx454855.9-y4476818.6\nx454839.5-y4476885.3\n0\nPOINT (454848.067543 4476852.042507)\n30.0\n124.0\n12.848804\n26.465605\n10.168567\n18.186932\n88.508049\n845.442261\n0.0\n0.0\n\n\nx454833.6-y4476910.5_x454839.5-y4476885.3_k0\n1\n454836.577015\n4.476898e+06\nTrue\n1\nLINESTRING (454839.5 4476885.3, 454838 4476891...\nx454839.5-y4476885.3\nx454833.6-y4476910.5\n0\nPOINT (454836.577015 4476897.9067)\n36.0\n127.0\n14.853752\n28.316143\n10.232138\n18.836437\n126.659744\n856.265991\n136.0\n968.0\n\n\nx454839.5-y4476885.3_x454877.1-y4476893.6_k0\n2\n454858.300000\n4.476889e+06\nTrue\n1\nLINESTRING (454839.5 4476885.3, 454877.1 44768...\nx454839.5-y4476885.3\nx454877.1-y4476893.6\n0\nPOINT (454858.3 4476889.45)\n33.0\n125.0\n12.366441\n24.028734\n9.009537\n16.524494\n120.871918\n945.566040\n106.0\n752.0\n\n\nx454823.1-y4476952.1_x454833.6-y4476910.5_k0\n3\n454828.362585\n4.476931e+06\nTrue\n1\nLINESTRING (454833.6 4476910.5, 454830.4 44769...\nx454833.6-y4476910.5\nx454823.1-y4476952.1\n0\nPOINT (454828.362585 4476931.303206)\n36.0\n124.0\n15.039588\n28.382860\n10.302912\n18.803555\n125.789688\n817.717712\n165.0\n1180.0\n\n\nx454758.1-y4476894.6_x454833.6-y4476910.5_k0\n4\n454795.845199\n4.476903e+06\nTrue\n1\nLINESTRING (454758.1 4476894.6, 454769.8 44768...\nx454833.6-y4476910.5\nx454758.1-y4476894.6\n0\nPOINT (454795.845199 4476902.571916)\n33.0\n125.0\n9.605127\n21.297651\n8.002337\n16.290869\n136.085236\n959.126282\n0.0\n0.0\n\n\n\n\n\n\n\n\nnodes_gdf.columns\n\nIndex(['ns_node_idx', 'x', 'y', 'live', 'weight', 'primal_edge',\n       'primal_edge_node_a', 'primal_edge_node_b', 'primal_edge_idx',\n       'dual_node', 'cc_density_500_ang', 'cc_density_2000_ang',\n       'cc_harmonic_500_ang', 'cc_harmonic_2000_ang', 'cc_hillier_500_ang',\n       'cc_hillier_2000_ang', 'cc_farness_500_ang', 'cc_farness_2000_ang',\n       'cc_betweenness_500_ang', 'cc_betweenness_2000_ang'],\n      dtype='object')\n\n\n\nnodes_gdf[\"cc_betweenness_2000_ang\"].describe()\n\ncount     47129.000000\nmean       8083.850098\nstd       15415.607422\nmin           0.000000\n25%         374.000000\n50%        2210.000000\n75%        8528.000000\nmax      227236.000000\nName: cc_betweenness_2000_ang, dtype: float64\n\n\n\nfig, ax = plt.subplots(1, 1, figsize=(8, 6), facecolor=\"#1d1d1d\")\nnodes_gdf.plot(\n    column=\"cc_harmonic_500_ang\",\n    cmap=\"magma\",\n    legend=False,\n    ax=ax,\n)\nax.set_xlim(438500, 438500 + 3500)\nax.set_ylim(4472500, 4472500 + 3500)\nax.axis(False)\n\n(np.float64(438500.0),\n np.float64(442000.0),\n np.float64(4472500.0),\n np.float64(4476000.0))\n\n\n\n\n\n\n\n\n\n\nfig, ax = plt.subplots(1, 1, figsize=(8, 6), facecolor=\"#1d1d1d\")\nnodes_gdf.plot(\n    column=\"cc_betweenness_2000_ang\",\n    cmap=\"magma\",\n    legend=False,\n    ax=ax,\n)\nax.set_xlim(438500, 438500 + 3500)\nax.set_ylim(4472500, 4472500 + 3500)\nax.axis(False)\n\n(np.float64(438500.0),\n np.float64(442000.0),\n np.float64(4472500.0),\n np.float64(4476000.0))\n\n\n\n\n\n\n\n\n\nAlternatively, you can define the distance thresholds using a list of minutes instead.\n\nnodes_gdf = networks.node_centrality_simplest(\n    network_structure=network_structure,\n    nodes_gdf=nodes_gdf,\n    minutes=[15],\n)\n\nINFO:cityseer.metrics.networks:Computing simplest path node centrality.\n100%|██████████| 47129/47129 [00:03&lt;00:00, 15520.80it/s]\nINFO:cityseer.config:Metrics computed for:\nINFO:cityseer.config:Distance: 1200m, Beta: 0.00333, Walking Time: 15.0 minutes.\n\n\nThe function will map the minutes values into the equivalent distances, which are reported in the logged output.\n\nnodes_gdf.columns\n\nIndex(['ns_node_idx', 'x', 'y', 'live', 'weight', 'primal_edge',\n       'primal_edge_node_a', 'primal_edge_node_b', 'primal_edge_idx',\n       'dual_node', 'cc_density_500_ang', 'cc_density_2000_ang',\n       'cc_harmonic_500_ang', 'cc_harmonic_2000_ang', 'cc_hillier_500_ang',\n       'cc_hillier_2000_ang', 'cc_farness_500_ang', 'cc_farness_2000_ang',\n       'cc_betweenness_500_ang', 'cc_betweenness_2000_ang',\n       'cc_density_1200_ang', 'cc_harmonic_1200_ang', 'cc_hillier_1200_ang',\n       'cc_farness_1200_ang', 'cc_betweenness_1200_ang'],\n      dtype='object')\n\n\nAs per the function logging outputs, 15 minutes has been mapped to 1200m at default speed_m_s, so the corresponding outputs can be visualised using the 1200m columns. Use the configurable speed_m_s parameter to set a custom metres per second walking speed.\n\nfig, ax = plt.subplots(1, 1, figsize=(8, 6), facecolor=\"#1d1d1d\")\nnodes_gdf.plot(\n    column=\"cc_harmonic_1200_ang\",\n    cmap=\"magma\",\n    legend=False,\n    ax=ax,\n)\nax.set_xlim(438500, 438500 + 3500)\nax.set_ylim(4472500, 4472500 + 3500)\nax.axis(False)\n\n(np.float64(438500.0),\n np.float64(442000.0),\n np.float64(4472500.0),\n np.float64(4476000.0))"
  },
  {
    "objectID": "recipes/stats/gpd_stats.html",
    "href": "recipes/stats/gpd_stats.html",
    "title": "Statistics from geopandas data",
    "section": "",
    "text": "Calculate building statistics from a geopandas GeoDataFrame.\n\nimport geopandas as gpd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom cityseer.metrics import layers\nfrom cityseer.tools import graphs, io\n\nTo start, follow the same approach as shown in the network examples to create the network.\n\nstreets_gpd = gpd.read_file(\"data/madrid_streets/street_network.gpkg\")\nstreets_gpd = streets_gpd.explode(reset_index=True)\nG = io.nx_from_generic_geopandas(streets_gpd)\nG = graphs.nx_decompose(G, 50)\nG_dual = graphs.nx_to_dual(G)\nnodes_gdf, _edges_gdf, network_structure = io.network_structure_from_nx(G_dual)\n\n100%|██████████| 47155/47155 [00:06&lt;00:00, 7216.48it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\n100%|██████████| 47129/47129 [00:00&lt;00:00, 122034.52it/s]\nINFO:cityseer.tools.graphs:Decomposing graph to maximum edge lengths of 50.\n100%|██████████| 47129/47129 [00:22&lt;00:00, 2072.16it/s]\nINFO:cityseer.tools.graphs:Converting graph to dual.\nINFO:cityseer.tools.graphs:Preparing dual nodes\n100%|██████████| 137778/137778 [00:03&lt;00:00, 36067.12it/s]\nINFO:cityseer.tools.graphs:Preparing dual edges (splitting and welding geoms)\n100%|██████████| 137778/137778 [02:29&lt;00:00, 924.29it/s] \nINFO:cityseer.tools.io:Preparing node and edge arrays from networkX graph.\n100%|██████████| 137778/137778 [00:02&lt;00:00, 56625.43it/s]\n100%|██████████| 137778/137778 [00:20&lt;00:00, 6756.26it/s] \nINFO:cityseer.graph:Edge R-tree built successfully with 195313 items.\n\n\nRead-in the dataset from the source Geopackage or Shapefile Geopandas.\n\nbldgs_gpd = gpd.read_file(\"data/madrid_buildings/madrid_bldgs.gpkg\")\nbldgs_gpd.head()\n\n\n\n\n\n\n\n\nmean_height\narea\nperimeter\ncompactness\norientation\nvolume\nfloor_area_ratio\nform_factor\ncorners\nshape_index\nfractal_dimension\ngeometry\n\n\n\n\n0\nNaN\n187.418714\n58.669276\n0.491102\n40.235999\nNaN\nNaN\nNaN\n4\n0.700787\n1.026350\nPOLYGON ((448688.642 4492911, 448678.351 44928...\n\n\n1\n7.0\n39.082821\n26.992208\n0.472874\n10.252128\n273.579749\n78.165643\n5.410857\n4\n0.687658\n1.041691\nPOLYGON ((440862.665 4482604.017, 440862.64 44...\n\n\n2\n7.0\n39.373412\n27.050303\n0.475086\n10.252128\n275.613883\n78.746824\n5.400665\n4\n0.689265\n1.040760\nPOLYGON ((440862.681 4482608.269, 440862.665 4...\n\n\n3\n7.5\n37.933979\n26.739878\n0.464266\n10.252129\n284.504846\n75.867959\n5.513124\n4\n0.681371\n1.045072\nPOLYGON ((440862.705 4482612.365, 440862.681 4...\n\n\n4\n7.0\n39.013701\n26.972641\n0.472468\n10.183618\n273.095907\n78.027402\n5.412350\n4\n0.687363\n1.041798\nPOLYGON ((440880.29 4482607.963, 440880.274 44...\n\n\n\n\n\n\n\nUse the layers.compute_stats method to compute statistics for numeric columns in the GeoDataFrame. These are specified with the stats_column_labels argument. These statistics are computed over the network using network distances. In the case of weighted variances, the contribution of any particular point is weighted by the distance from the point of measure.\n\ndistances = [100, 200]\nnodes_gdf, bldgs_gpd = layers.compute_stats(\n    bldgs_gpd,\n    stats_column_labels=[\n        \"area\",\n        \"perimeter\",\n        \"compactness\",\n        \"orientation\",\n        \"shape_index\",\n    ],\n    nodes_gdf=nodes_gdf,\n    network_structure=network_structure,\n    distances=distances,\n)\n\nINFO:cityseer.metrics.layers:Computing statistics.\nINFO:cityseer.metrics.layers:Assigning data to network.\nINFO:cityseer.data:Assigning 135302 data entries to network nodes (max_dist: 100).\nINFO:cityseer.data:Collected 1282627 potential node assignments from data entries.\nINFO:cityseer.data:Finished assigning data. 1282627 assignments added to 89639 nodes.\nINFO:cityseer.graph:Barriers unset and R-tree cleared.\n100%|██████████| 137778/137778 [01:27&lt;00:00, 1573.99it/s]\nINFO:cityseer.config:Metrics computed for:\nINFO:cityseer.config:Distance: 100m, Beta: 0.04, Walking Time: 1.25 minutes.\nINFO:cityseer.config:Distance: 200m, Beta: 0.02, Walking Time: 2.5 minutes.\n\n\nThis will generate a set of columns containing count, sum, min, max, mean, and var, in unweighted nw and weighted wt versions (where applicable) for each of the input distance thresholds.\n\nnodes_gdf.columns\n\nIndex(['ns_node_idx', 'x', 'y', 'live', 'weight', 'primal_edge',\n       'primal_edge_node_a', 'primal_edge_node_b', 'primal_edge_idx',\n       'dual_node',\n       ...\n       'cc_shape_index_sum_200_nw', 'cc_shape_index_sum_200_wt',\n       'cc_shape_index_mean_200_nw', 'cc_shape_index_mean_200_wt',\n       'cc_shape_index_count_200_nw', 'cc_shape_index_count_200_wt',\n       'cc_shape_index_var_200_nw', 'cc_shape_index_var_200_wt',\n       'cc_shape_index_max_200', 'cc_shape_index_min_200'],\n      dtype='object', length=110)\n\n\nThe result in columns can be explored with conventional Python ecosystem tools such as seaborn and matplotlib.\n\nsns.histplot(\n    data=nodes_gdf,\n    x=\"cc_orientation_mean_200_wt\",\n    bins=50,\n)\n\n\n\n\n\n\n\n\n\nfig, ax = plt.subplots(1, 1, figsize=(8, 8), facecolor=\"#1d1d1d\")\nnodes_gdf.plot(\n    column=\"cc_orientation_mean_200_wt\",\n    cmap=\"Dark2\",\n    legend=False,\n    vmin=0,\n    vmax=45,\n    ax=ax,\n)\nbldgs_gpd.plot(\n    column=\"orientation\",\n    cmap=\"Dark2\",\n    legend=False,\n    vmin=0,\n    vmax=45,\n    alpha=0.5,\n    ax=ax,\n)\nax.set_xlim(438500, 438500 + 3500)\nax.set_ylim(4472500, 4472500 + 3500)\nax.axis(False)\n\n(np.float64(438500.0),\n np.float64(442000.0),\n np.float64(4472500.0),\n np.float64(4476000.0))"
  },
  {
    "objectID": "recipes/stats/index.html",
    "href": "recipes/stats/index.html",
    "title": "Statistics",
    "section": "",
    "text": "The following two examples use the layers.compute_stats method to compute statistics such as min, max, mean, and var. In general, the same network pre-processing steps can be followed as shown for these network preparation steps or for the network centrality steps. A data set is their necessary for identifying the locations of different land uses and it is the impossible to compete accessibilities over the network using the layers.compute_stats method.\nThis method requires:",
    "crumbs": [
      "Cityseer Recipes",
      "Statistics"
    ]
  },
  {
    "objectID": "recipes/stats/index.html#statistics-from-geopandas-data",
    "href": "recipes/stats/index.html#statistics-from-geopandas-data",
    "title": "Statistics",
    "section": "Statistics from geopandas data",
    "text": "Statistics from geopandas data\nCalculate building statistics from a geopandas GeoDataFrame.\nNotebook",
    "crumbs": [
      "Cityseer Recipes",
      "Statistics"
    ]
  },
  {
    "objectID": "recipes/stats/index.html#statistics-from-osm-data",
    "href": "recipes/stats/index.html#statistics-from-osm-data",
    "title": "Statistics",
    "section": "Statistics from OSM data",
    "text": "Statistics from OSM data\nCalculate building statistics from osmnx data.\nNotebook",
    "crumbs": [
      "Cityseer Recipes",
      "Statistics"
    ]
  },
  {
    "objectID": "recipes/networks/create_from_bbox.html",
    "href": "recipes/networks/create_from_bbox.html",
    "title": "OSM network from a bounding box",
    "section": "",
    "text": "Use a bounding box to create a networkx graph from OpenStreetMap data.\n\nfrom shapely import geometry\n\nfrom cityseer.tools import io, plot\n\nUse a shapely Polygon in WGS84 coordinates to define a boundary for the graph.\n\npoly_wgs = geometry.box(\n    -0.14115725966109327, 51.509220662095714, -0.12676440185383622, 51.51820111033659\n)\npoly_wgs\n\n\n\n\n\n\n\n\nUse the osm_graph_from_poly function available from the cityseer package’s io module.\nThe function expects a shapely polygon and returns a networkx graph. cityseer will automatically extract the graph topology while also creating accurate street geometries represented as shapely LineString geometries, which are linked to the graph’s edges through the geom edge attribute.\n\nG = io.osm_graph_from_poly(poly_wgs)\nprint(G)\n\nWARNING:cityseer.tools.io:Merging node 12450391665 into 25544116 due to identical x, y coords.\nINFO:cityseer.tools.graphs:Generating interpolated edge geometries.\nINFO:cityseer.tools.io:Converting networkX graph to CRS code 32630.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Snapping gapped endings.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\nINFO:cityseer.tools.graphs:Ironing edges.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\n\n\nMultiGraph with 382 nodes and 591 edges\n\n\nThe plot_nx function can be used to visualize the graph. It accepts a cityseer prepared networkx graph and will plot street geometries when the plot_geoms parameter is set to True.\n\nplot.plot_nx(G, plot_geoms=True)\n\nINFO:cityseer.tools.plot:Preparing graph nodes\nINFO:cityseer.tools.plot:Preparing graph edges\n\n\n\n\n\n\n\n\n\nIf using a different CRS, then specify this using the poly_crs_code parameter. For example, if you are using UTM zone 30N, then set this to the corresponding EPSG code, in this case 32630.\n\npoly_utm = geometry.box(698361, 5710348, 699361, 5711348)\nG_utm = io.osm_graph_from_poly(poly_utm, poly_crs_code=32630)\nprint(G_utm)\nplot.plot_nx(G_utm, plot_geoms=True)\n\nINFO:cityseer.tools.graphs:Generating interpolated edge geometries.\nINFO:cityseer.tools.io:Converting networkX graph to CRS code 32630.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Snapping gapped endings.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\nINFO:cityseer.tools.graphs:Ironing edges.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.plot:Preparing graph nodes\nINFO:cityseer.tools.plot:Preparing graph edges\n\n\nMultiGraph with 381 nodes and 595 edges\n\n\n\n\n\n\n\n\n\ncityseer will set node and edge geometry coordinates to the local projected UTM coordinate reference system. If you want to create the resulting graph in a specific CRS, then specify this using the to_crs_code parameter. For example, in the UK you might want to use the British National Grid, which has the EPSG code 27700.\n\nG_bng = io.osm_graph_from_poly(poly_wgs, to_crs_code=27700)\nprint(G_bng)\nplot.plot_nx(G_bng, plot_geoms=True)\n\nWARNING:cityseer.tools.io:Merging node 12450391665 into 25544116 due to identical x, y coords.\nINFO:cityseer.tools.graphs:Generating interpolated edge geometries.\nINFO:cityseer.tools.io:Converting networkX graph to CRS code 27700.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Snapping gapped endings.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\nINFO:cityseer.tools.graphs:Ironing edges.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.plot:Preparing graph nodes\nINFO:cityseer.tools.plot:Preparing graph edges\n\n\nMultiGraph with 380 nodes and 589 edges\n\n\n\n\n\n\n\n\n\ncityseer will automatically attempt to clean-up the graph by removing unnecessary nodes and simplifying the graph. If you only want basic cleaning without simplification, then set the simplify parameter to False. Note that in this case the graph has significantly more nodes and edges because simplification has not been applied.\n\nG_raw = io.osm_graph_from_poly(poly_wgs, simplify=False)\nprint(G_raw)\nplot.plot_nx(G_raw, plot_geoms=True)\n\nWARNING:cityseer.tools.io:Merging node 12450391665 into 25544116 due to identical x, y coords.\nINFO:cityseer.tools.graphs:Generating interpolated edge geometries.\nINFO:cityseer.tools.io:Converting networkX graph to CRS code 32630.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.plot:Preparing graph nodes\nINFO:cityseer.tools.plot:Preparing graph edges\n\n\nMultiGraph with 1913 nodes and 2211 edges"
  },
  {
    "objectID": "recipes/networks/network_from_relation_id.html",
    "href": "recipes/networks/network_from_relation_id.html",
    "title": "OSM network from a relation id",
    "section": "",
    "text": "Use an OSM relation id to create a networkx graph from OSM.\nUse OpenStreetMap to identify a boundary relations id. Then, use osmnx to retireve the relation id as a GeoDataFrame.\n\nimport osmnx as ox\n\nfrom cityseer.tools import io, plot\n\nIn this case, we’ll retrieve the London Soho boundary relation 17710512. For this, we can use the osmnx geocode_to_gdf function with the by_osmid parameter set to True. Note the preceding R prepended to the id as per the API documentation.\n\nbounds_gdf = ox.geocode_to_gdf(\n    \"R17710512\",  # OSM relation ID\n    by_osmid=True,\n)\nbounds_gdf\n\n\n\n\n\n\n\n\ngeometry\nbbox_west\nbbox_south\nbbox_east\nbbox_north\nplace_id\nosm_type\nosm_id\nlat\nlon\nclass\ntype\nplace_rank\nimportance\naddresstype\nname\ndisplay_name\n\n\n\n\n0\nPOLYGON ((-0.14183 51.5151, -0.14162 51.51449,...\n-0.141829\n51.509966\n-0.129378\n51.516365\n259863049\nrelation\n17710512\n51.514065\n-0.135049\nplace\nsuburb\n19\n0.552695\nneighbourhood\nSoho\nSoho, City of Westminster, Greater London, Eng...\n\n\n\n\n\n\n\nConvert the GeoDataFrame into a unified Polygon using the geopandas union_all method.\n\n# returns a geoDataFrame - union for the geom\nbounds_geom = bounds_gdf.union_all()\nbounds_geom\n\n\n\n\n\n\n\n\nIf the geometry is complex, then the subsequent OSM API request (which happens behind the scenes) can fail due to a long URL request. In this case, you can take the geometrically simpler convex_hull instead. Alternatively, you can simplify the geometry, but remember to use spatial units matching the CRS of the geometry.\n\nbounds_geom = bounds_geom.convex_hull\nbounds_geom\n\n\n\n\n\n\n\n\nThe shapely geometry can then be passed to the cityseer osm_graph_from_poly function, as per other examples.\n\nG = io.osm_graph_from_poly(bounds_geom)\nprint(G)\n\nINFO:cityseer.tools.graphs:Generating interpolated edge geometries.\nINFO:cityseer.tools.io:Converting networkX graph to CRS code 32630.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Snapping gapped endings.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\nINFO:cityseer.tools.graphs:Ironing edges.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\n\n\nMultiGraph with 144 nodes and 210 edges\n\n\n\nplot.plot_nx(G, plot_geoms=True)\n\nINFO:cityseer.tools.plot:Preparing graph nodes\nINFO:cityseer.tools.plot:Preparing graph edges"
  },
  {
    "objectID": "recipes/networks/create_dual_graph.html",
    "href": "recipes/networks/create_dual_graph.html",
    "title": "Create a Dual Graph",
    "section": "",
    "text": "Create a dual graph representation from a primal graph.\nFor purposes of visualisation and intuition, it is preferable to work with the network in its dual representation. This way, metrics such as centrality and accessibility are calculated relative to streets instead of intersections. The advantage is that you can then visualise the results on the street network itself. Additionally, angular distances (typically used for Space Syntax) are more intuitive to calculate on the dual graph. That said, nothing stops you from working with the primal graph if you prefer.\n\nfrom cityseer.tools import graphs, io, plot\n\nFirst, create a primal graph as before.\n\nlng, lat = -0.13396079424572427, 51.51371088849723\nbuffer = 500\npoly_wgs, epsg_code = io.buffered_point_poly(lng, lat, buffer)\nG = io.osm_graph_from_poly(poly_wgs)\nprint(G)\nplot.plot_nx(G, plot_geoms=True)\n\nINFO:cityseer.tools.graphs:Generating interpolated edge geometries.\nINFO:cityseer.tools.io:Converting networkX graph to CRS code 32630.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Snapping gapped endings.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\nINFO:cityseer.tools.graphs:Ironing edges.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.plot:Preparing graph nodes\nINFO:cityseer.tools.plot:Preparing graph edges\n\n\nMultiGraph with 320 nodes and 487 edges\n\n\n\n\n\n\n\n\n\nA dual graph representation can then be created using the nx_to_dual function available from the cityseer package’s graphs module.\n\nG_dual = graphs.nx_to_dual(G)\nprint(G_dual)\n\nINFO:cityseer.tools.graphs:Converting graph to dual.\nINFO:cityseer.tools.graphs:Preparing dual nodes\nINFO:cityseer.tools.graphs:Preparing dual edges (splitting and welding geoms)\n\n\nMultiGraph with 487 nodes and 1151 edges\n\n\nNotice that the dual graph will have the same number of nodes as the primal graph’s number of edges, since the edges have been converted to nodes. The new edges are created by splitting the original edges at their midpoints, and then welding corresponding segments together across intersections. True representations of street geometries are therefore preserved in the dual graph, allowing for accurate calculations of metric distances and angular deviation.\n\nplot.plot_nx(G_dual, plot_geoms=True)\n\nINFO:cityseer.tools.plot:Preparing graph nodes\nINFO:cityseer.tools.plot:Preparing graph edges"
  },
  {
    "objectID": "recipes/networks/momepy_to_cityseer.html",
    "href": "recipes/networks/momepy_to_cityseer.html",
    "title": "Convert a network from momepy",
    "section": "",
    "text": "Convert a network from momepy to a cityseer compatible networkx graph.\nThe process is for converting momepy networks is similar to that for opening street network datasets via geopandas.\n\nimport geopandas as gpd\nimport momepy\nfrom cityseer.tools import io, plot\n\n/Users/gareth/dev/cityseer-examples/.venv/lib/python3.12/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html\n  from .autonotebook import tqdm as notebook_tqdm\n\n\nPrepare a momepy street network. Here we will use the momepy example dataset streets which is a GeoDataFrame of street segments.\n\nstreets_gpd = gpd.read_file(\n    momepy.datasets.get_path(\"bubenec\"),\n    layer=\"streets\",\n)\nstreets_gpd.head()\n\n\n\n\n\n\n\n\ngeometry\n\n\n\n\n0\nLINESTRING (1603585.64 6464428.774, 1603413.20...\n\n\n1\nLINESTRING (1603268.502 6464060.781, 1603296.8...\n\n\n2\nLINESTRING (1603607.303 6464181.853, 1603592.8...\n\n\n3\nLINESTRING (1603678.97 6464477.215, 1603675.68...\n\n\n4\nLINESTRING (1603537.194 6464558.112, 1603557.6...\n\n\n\n\n\n\n\n\nstreets_gpd.plot()\n\n\n\n\n\n\n\n\nUse the nx_from_generic_geopandas function to convert the geopandas LineStrings dataset to a networkx graph. This function will automatically create nodes and edges from the LineStrings in the dataset.\n\nG = io.nx_from_generic_geopandas(streets_gpd)\nprint(G)\nplot.plot_nx(G, plot_geoms=True)\n\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\nINFO:cityseer.tools.plot:Preparing graph nodes\nINFO:cityseer.tools.plot:Preparing graph edges\n\n\nMultiGraph with 29 nodes and 35 edges"
  },
  {
    "objectID": "recipes/networks/network_from_streets.html",
    "href": "recipes/networks/network_from_streets.html",
    "title": "Custom network from a streets dataset",
    "section": "",
    "text": "Use geopandas to open a street network file and convert it to a networkx graph.\nIf you have a street network file in a GeoPackage, shapefile, or similar format, then you can load this file and convert it to a networkx graph.\n\nimport geopandas as gpd\nfrom cityseer.tools import io, plot\n\nUse geopandas to load the street network file. Check that your file path is correct!\n\nstreets_gpd = gpd.read_file(\"data/madrid_streets/street_network.gpkg\")\nstreets_gpd.head()\n\n\n\n\n\n\n\n\nGEODB_OID\nCDID\nCDMUNI\nCDVIAL\nCDTVIA\nDSPART\nDSVIAL\nDSVIAL_25\nDSVIAL_NOR\nCDVIAL_INE\nTIPOLOGIA\nGEOMETRY1_\ngeometry\n\n\n\n\n0\n2116085.0\n2116085.0\n049\n049A0246\nAvda\nde\nSan Pablo\nSan Pablo\nSAN PABLO\n00624\n35.0\n1424.530768\nMULTILINESTRING ((454855.882 4476818.629, 4548...\n\n\n1\n2116085.0\n2116085.0\n049\n049A0246\nAvda\nde\nSan Pablo\nSan Pablo\nSAN PABLO\n00624\n35.0\n1424.530768\nMULTILINESTRING ((454839.501 4476885.272, 4548...\n\n\n2\n2116085.0\n2116085.0\n049\n049A0246\nAvda\nde\nSan Pablo\nSan Pablo\nSAN PABLO\n00624\n35.0\n1424.530768\nMULTILINESTRING ((454833.577 4476910.504, 4548...\n\n\n3\n2116085.0\n2116085.0\n049\n049A0246\nAvda\nde\nSan Pablo\nSan Pablo\nSAN PABLO\n00624\n35.0\n1424.530768\nMULTILINESTRING ((454823.07 4476952.149, 45482...\n\n\n4\n2116085.0\n2116085.0\n049\n049A0246\nAvda\nde\nSan Pablo\nSan Pablo\nSAN PABLO\n00624\n35.0\n1424.530768\nMULTILINESTRING ((454817.822 4476974.014, 4548...\n\n\n\n\n\n\n\nTake note of you data CRS.\n\nepsg_code = streets_gpd.crs.to_epsg()\nprint(epsg_code)\nprint(streets_gpd.crs.is_projected)\n\n25830\nTrue\n\n\nIf your street network is not in a projected CRS, it is recommended to convert your dataset to a locally projected coordinate system. This can be done with the built-in to_crs method in geopandas. The EPSG code for the UTM zone can be found at epsg.io.\nAlternatively, you can project the graph after creation.\n\n# shown as example - unnecessary step for current dataset\nstreets_gpd = streets_gpd.to_crs(epsg=25830)\nprint(epsg_code)\nprint(streets_gpd.crs.is_projected)\n\n25830\nTrue\n\n\nTake note of the geometry type.\n\nstreets_gpd.geometry.type.unique()\n\narray(['MultiLineString'], dtype=object)\n\n\nIf your data consists of MultiLineString geometries, then these should first be converted to unnested LineString geometries.\n\nstreets_gpd = streets_gpd.explode(ignore_index=True)\nstreets_gpd.geometry.type.unique()\n\narray(['LineString'], dtype=object)\n\n\nUse the nx_from_generic_geopandas function to convert the geopandas LineStrings dataset to a networkx graph. This function will automatically create nodes and edges from the LineStrings in the dataset.\nThe function expects that all features are LineString geometries, where the geometries represent individual street segments that meet at intersections. Street segments which share endpoints will be connected by a node in the graph.\n\nG = io.nx_from_generic_geopandas(streets_gpd)\nprint(G)\n\n100%|██████████| 47155/47155 [00:06&lt;00:00, 7684.49it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\n100%|██████████| 47129/47129 [00:00&lt;00:00, 280225.96it/s]\n\n\nMultiGraph with 31280 nodes and 47129 edges\n\n\n\nplot.plot_nx(\n    G,\n    plot_geoms=True,\n    x_lim=(438500, 438500 + 3500),\n    y_lim=(4472500, 4472500 + 3500),\n)\n\nINFO:cityseer.tools.plot:Preparing graph nodes\nINFO:cityseer.tools.plot:Preparing graph edges\n100%|██████████| 47129/47129 [00:00&lt;00:00, 61490.78it/s]\n\n\n\n\n\n\n\n\n\nIf your data is not in a projected CRS (and if you did not already reproject the GeoDataFrame before creating the graph), then reproject your networkx graph to a locally projected coordinate system before doing further analysis.\nIf the data is currently in geographic longitudes and latitudes (WGS84 / 4326) then the nx_wgs_to_utm function can be used to convert it to the local UTM projection. Alternatively, the nx_epsg_conversion function can be used to specify input and output CRS.\n\n# shown as an example - unnecessary step for current dataset\nG_utm = io.nx_epsg_conversion(G, to_crs_code=32630)\nprint(G_utm)\n\nINFO:cityseer.tools.io:Converting networkX graph to CRS code 32630.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\n100%|██████████| 31280/31280 [00:00&lt;00:00, 1153945.46it/s]\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\n100%|██████████| 47129/47129 [00:03&lt;00:00, 15486.95it/s]\n\n\nMultiGraph with 31280 nodes and 47129 edges"
  },
  {
    "objectID": "recipes/index.html",
    "href": "recipes/index.html",
    "title": "Cityseer Guide",
    "section": "",
    "text": "This cookbook contains a collection of recipes to illustrate typical usage scenarios for cityseer.\nThe recipes build on each other, so if you are wondering why or how to do something, you may find the answers in another (typically preceding) recipe.\nPlease open an issue to request the addition of further examples for a given use-case.\n\nNetwork Preparation\ncityseer uses networkx MultiGraphs to represent pedestrian networks. In doing so, it embeds spatial information in the graph nodes and edges so that it can accurately manipulate the graphs and calculate derivative metrics.\nSee the Network Preparation page for examples of how to create a cityseer compatible networkx graph from:\n\nOSM data using bounding boxes, radii around points, or from a custom boundary file;\ngeopandas data including the use of geopandas to open and import files such as geopackages and shapefiles;\nImports from momepy and osmnx;\nAutomatic and manual network simplification;\nCasting primal networks to dual representations to model and visualise metrics using streets instead of intersections.\n\n\n\nMetrics\ncityseer converts the network into a rust data structure prior to computing derivative metrics. This is done to improve performance so that it can be used for larger cities with correspondingly larger data sets and networks.\nThis is done using network_structure_from_nx function which is available in the cityseer io module. You will see this method used in all of the following examples. Use of this method will result in three derivative data structures:\n\nA nodes GeoDataFrame with the graph’s nodes. This is used for saving the outputs of calculations, and makes it easy to export the outputs of calculations to files that can be used from QGIS or other GIS software and workflows.\nAn edges GeoDataFrame with the graph’s edges, including information that has been generated for the graph’s edges such as metric and angular distances, entry and exit angles, and the overall bearing of the edge.\nA cityseer NetworkStructure object which is used by cityseer for calculating the measures.\n\nOnce you’ve prepared the NetworkStructure object, you can use it over-and-over again to calculate a variety of centrality, accessibility, mixed-uses, and statistical metrics over the street network. The exception to this is when you change the input network, in which case you need to re-create the NetworkStructure object.\nUse of the dual representation is optional, but recommended. Keep in mind that if you’ve converted your networkx network into a dual representation, then the nodes GeoDataFrame will contain both the dual nodes (midpoints of streets) the primal edges. The primal edges will be set to the default geometry so that outputs can be visualised using the primal street geometries.\nNote that distances used when computing accessibilities, statistics, or other measures are all based on distances over the network. In the case of weighted variants, the distances used for the weighting process are the distances from each point of measure to the individual data points (such as land uses) under consideration.\n\nCentrality\nSee the Network Centrality page for examples of how to calculate a variety of shortest “metric” and simplest “angular” centrality metrics.\n\n\nAccessibility\nSee the Accessibility page for examples of how to calculate a variety of landuse accessibility and mixed-use metrics.\n\n\nStatistics\nSee the Statistics page for examples of how to calculate statistical metrics over the network.\n\n\n\nEdge Rolloff\nWhen calculating network or layer metrics, the network has to be buffered by a distance equal to the maximum distance threshold being considered by the algorithms. This prevents problematic results arising due to edge roll-off effects. For example, if running analysis using distances of 500, 1000, 2000m, then the network must be buffered by 2000m. When using data layers, the data points should — for the same reasons — cover these buffered extents as well.\nThe live=True node attribute is used for identifying nodes falling within the original non-buffered graph extents as opposed to the live=False nodes that fall within the surrounding buffered area. The underlying shortest-path algorithms will have access to both live=True and live=False nodes (thus preventing edge rolloff), but derivative metrics are only tabulated for live=True nodes. This eliminates edge roll-off effects, reduces unnecessary computation, and cleanly identifies which nodes are or are not in the buffered roll-off area. If some other post-processing step will be used for filtering the nodes, or if boundary roll-off is not being considered, then use the default behaviour where all nodes automatically set to live=True.\nHere is an example of how to set node status to live or not based on whether it intersects the original boundary.",
    "crumbs": [
      "Cityseer Recipes"
    ]
  },
  {
    "objectID": "recipes/continuity/continuity_os_open.html",
    "href": "recipes/continuity/continuity_os_open.html",
    "title": "OS Open Roads",
    "section": "",
    "text": "The following example uses the OS Open Roads dataset, which is available under the Open Government License.\n© Crown copyright and database right 2022"
  },
  {
    "objectID": "recipes/continuity/continuity_os_open.html#data-source",
    "href": "recipes/continuity/continuity_os_open.html#data-source",
    "title": "OS Open Roads",
    "section": "",
    "text": "The following example uses the OS Open Roads dataset, which is available under the Open Government License.\n© Crown copyright and database right 2022"
  },
  {
    "objectID": "recipes/continuity/continuity_os_open.html#preparation",
    "href": "recipes/continuity/continuity_os_open.html#preparation",
    "title": "OS Open Roads",
    "section": "Preparation",
    "text": "Preparation\nThe following example assumes:\n\nThat the notebook is being run from a cloned cityseer-api repository.\nThat the above dataset has been downloaded to temp/os_open_roads/oproad_gb.gpkg as a relative path. If running this notebook directly from within a clone of the cityseer-api repo, then this equates to the cityseer-api/temp/os_open_roads/oproad_gb.gpkg path. Please edit the paths and path setup in this cell if you are using different directories.\n\n\nfrom __future__ import annotations\n\nfrom pathlib import Path\n\nrepo_path = Path.cwd()\nif str(repo_path).endswith(\"continuity\"):\n    repo_path = Path.cwd() / \"../..\"\nif not str(repo_path.resolve()).endswith(\"cityseer-examples\"):\n    raise ValueError(\n        \"Please check your notebook working directory relative to your project and data paths.\"\n    )\n\nopen_roads_path = Path(repo_path / \"temp/os_open_roads/oproad_gb.gpkg\")\nprint(\"data path:\", open_roads_path)\nprint(\"path exists:\", open_roads_path.exists())\n\ndata path: /Users/gareth/dev/benchmark-urbanism/cityseer-examples/examples/continuity/../../temp/os_open_roads/oproad_gb.gpkg\npath exists: True\n\n\n\nExtents\nInstead of loading the entire dataset, we’ll use a bounding box to only load an area of interest.\n\nfrom pyproj import Transformer\nfrom shapely import geometry\n\nfrom cityseer.tools import io\n\n# create graph - only UK locations will work for OS Open Roads data\n# stratford-upon-avon\n# lng, lat, buffer_dist, plot_buffer = -1.7063649924889566, 52.19277374082795, 2500, 2000\n# london\nlng, lat, buffer_dist, plot_buffer = (\n    -0.13039709427587876,\n    51.516434828344366,\n    6000,\n    5000,\n)\n# transform from WGS to BNG\ntransformer = Transformer.from_crs(\"EPSG:4326\", \"EPSG:27700\")\neasting, northing = transformer.transform(lat, lng)\n# calculate bbox relative to centroid\ncentroid = geometry.Point(easting, northing)\ntarget_bbox: tuple[float, float, float, float] = centroid.buffer(buffer_dist).bounds  # type: ignore\nplot_bbox: tuple[float, float, float, float] = centroid.buffer(plot_buffer).bounds  # type: ignore\n\n\n\nLoad\nWe can now load the OS Open Roads dataset\n\n# load OS Open Roads data from downloaded geopackage\nG_open = io.nx_from_open_roads(open_roads_path, target_bbox=target_bbox)\n\nINFO:cityseer.tools.io:Nodes: 24778\nINFO:cityseer.tools.io:Edges: 32723\nINFO:cityseer.tools.io:Dropped 463 edges where not both start and end nodes were present.\nINFO:cityseer.tools.io:Running basic graph cleaning\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 24778/24778 [00:00&lt;00:00, 33240.53it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 10.\n100%|██████████| 30681/30681 [00:00&lt;00:00, 50838.55it/s]"
  },
  {
    "objectID": "recipes/continuity/continuity_os_open.html#observe-continuity-metrics",
    "href": "recipes/continuity/continuity_os_open.html#observe-continuity-metrics",
    "title": "OS Open Roads",
    "section": "Observe continuity metrics",
    "text": "Observe continuity metrics\nThis step runs the continuity analysis using the specified heuristic.\n\nimport matplotlib.pyplot as plt\n\nfrom cityseer.tools import io, plot\nfrom cityseer.metrics import observe\n\n# methods can be \"names\", \"routes\", \"highways\"\n\nprint(\"Continuity by street names\")\nG_cont, NamesContReport = observe.street_continuity(G_open, method=\"names\")\nNamesContReport.report_by_count(n_items=5)\nNamesContReport.report_by_length(n_items=5)\n\nprint(\"Continuity by route numbers\")\nG_cont, RoutesContReport = observe.street_continuity(G_cont, method=\"routes\")\nRoutesContReport.report_by_count(n_items=5)\nRoutesContReport.report_by_length(n_items=5)\n\nprint(\"Continuity by highway types\")\nG_cont, HwyContReport = observe.street_continuity(G_cont, method=\"highways\")\nHwyContReport.report_by_count(n_items=5)\nHwyContReport.report_by_length(n_items=5)\n\nprint(\"Continuity by overlapping routes and names types\")\nG_cont, HybridContReport = observe.hybrid_street_continuity(G_cont)\nHybridContReport.report_by_count(n_items=5)\nHybridContReport.report_by_length(n_items=5)\n\nContinuity by street names\n\n\nINFO:cityseer.metrics.observe:Calculating metrics for names.\n100%|██████████| 30609/30609 [00:00&lt;00:00, 31274.62it/s]\nINFO:cityseer.metrics.observe:Reporting top 5 continuity observations by street counts.\nINFO:cityseer.metrics.observe:Count: 82 - finchley road\nINFO:cityseer.metrics.observe:Count: 62 - harrow road\nINFO:cityseer.metrics.observe:Count: 58 - old kent road\nINFO:cityseer.metrics.observe:Count: 57 - king's road\nINFO:cityseer.metrics.observe:Count: 46 - clapham road\nINFO:cityseer.metrics.observe:Reporting top 5 continuity observations by street lengths.\nINFO:cityseer.metrics.observe:Length: 5.4km - harrow road\nINFO:cityseer.metrics.observe:Length: 5.34km - finchley road\nINFO:cityseer.metrics.observe:Length: 4.48km - outer circle\nINFO:cityseer.metrics.observe:Length: 3.7km - westway\nINFO:cityseer.metrics.observe:Length: 3.28km - old kent road\n\n\nContinuity by route numbers\n\n\nINFO:cityseer.metrics.observe:Calculating metrics for routes.\n100%|██████████| 30609/30609 [00:00&lt;00:00, 109845.11it/s]\nINFO:cityseer.metrics.observe:Reporting top 5 continuity observations by street counts.\nINFO:cityseer.metrics.observe:Count: 142 - a1\nINFO:cityseer.metrics.observe:Count: 135 - a10\nINFO:cityseer.metrics.observe:Count: 129 - a41\nINFO:cityseer.metrics.observe:Count: 128 - a107\nINFO:cityseer.metrics.observe:Count: 116 - a5\nINFO:cityseer.metrics.observe:Reporting top 5 continuity observations by street lengths.\nINFO:cityseer.metrics.observe:Length: 9.1km - a41\nINFO:cityseer.metrics.observe:Length: 8.1km - a1\nINFO:cityseer.metrics.observe:Length: 7.96km - a10\nINFO:cityseer.metrics.observe:Length: 7.76km - a3220\nINFO:cityseer.metrics.observe:Length: 7.12km - a107\n\n\nContinuity by highway types\n\n\nINFO:cityseer.metrics.observe:Calculating metrics for highways.\n100%|██████████| 30609/30609 [00:00&lt;00:00, 156124.61it/s]\nINFO:cityseer.metrics.observe:Reporting top 5 continuity observations by street counts.\nINFO:cityseer.metrics.observe:Count: 5056 - a road\nINFO:cityseer.metrics.observe:Count: 2510 - minor road\nINFO:cityseer.metrics.observe:Count: 1711 - primary road\nINFO:cityseer.metrics.observe:Count: 1487 - b road\nINFO:cityseer.metrics.observe:Count: 463 - secondary access road\nINFO:cityseer.metrics.observe:Reporting top 5 continuity observations by street lengths.\nINFO:cityseer.metrics.observe:Length: 336.17km - a road\nINFO:cityseer.metrics.observe:Length: 181.0km - minor road\nINFO:cityseer.metrics.observe:Length: 116.88km - primary road\nINFO:cityseer.metrics.observe:Length: 105.99km - b road\nINFO:cityseer.metrics.observe:Length: 33.74km - secondary access road\n\n\nContinuity by overlapping routes and names types\n\n\nINFO:cityseer.metrics.observe:Calculating metrics for routes.\n100%|██████████| 30609/30609 [00:00&lt;00:00, 118874.56it/s]\nINFO:cityseer.metrics.observe:Reporting top 5 continuity observations by street counts.\nINFO:cityseer.metrics.observe:Count: 230 - a1\nINFO:cityseer.metrics.observe:Count: 204 - a41\nINFO:cityseer.metrics.observe:Count: 162 - a40\nINFO:cityseer.metrics.observe:Count: 162 - a10\nINFO:cityseer.metrics.observe:Count: 154 - a107\nINFO:cityseer.metrics.observe:Reporting top 5 continuity observations by street lengths.\nINFO:cityseer.metrics.observe:Length: 14.76km - a41\nINFO:cityseer.metrics.observe:Length: 13.1km - a1\nINFO:cityseer.metrics.observe:Length: 12.38km - a40\nINFO:cityseer.metrics.observe:Length: 10.98km - a3220\nINFO:cityseer.metrics.observe:Length: 9.46km - a10\n\n\n\nfor method, shape_exp, descriptor, cmap, inverse, col_by_categ in zip(\n    [\"names\", \"routes\", \"highways\", \"hybrid\"],  #\n    [1, 0.75, 0.5, 1],  #\n    [\"Street names\", \"Routes\", \"Road types\", \"Hybrid routes & names\"],  #\n    [\"plasma\", \"viridis\", \"tab10\", \"tab10\"],  #\n    [False, False, True, False],  #\n    [False, False, True, True],\n):\n    print(f\"Plotting results for method: {method}\")\n    # plot\n    bg_colour = \"#1d1d1d\"\n    fig, axes = plt.subplots(\n        2, 1, dpi=150, figsize=(8, 12), facecolor=bg_colour, constrained_layout=True\n    )\n    fig.suptitle(\n        f\"OS Open Roads plotted by {descriptor} continuity\",\n        fontsize=\"small\",\n        ha=\"center\",\n    )\n    # by count\n    plot.plot_nx_edges(\n        axes[0],  # type: ignore\n        nx_multigraph=G_cont,\n        edge_metrics_key=f\"{method}_cont_by_count\",\n        bbox_extents=plot_bbox,\n        cmap_key=cmap,\n        lw_min=0.5,\n        lw_max=2,\n        edge_label_key=f\"{method}_cont_by_label\",\n        colour_by_categorical=col_by_categ,\n        shape_exp=shape_exp,\n        face_colour=bg_colour,\n        invert_plot_order=inverse,\n    )\n    axes[0].set_xlabel(f\"{descriptor} by count\", fontsize=\"x-small\")  # type: ignore\n    # by length\n    plot.plot_nx_edges(\n        axes[1],  # type: ignore\n        nx_multigraph=G_cont,\n        edge_metrics_key=f\"{method}_cont_by_length\",\n        bbox_extents=plot_bbox,\n        cmap_key=cmap,\n        lw_min=0.5,\n        lw_max=2,\n        edge_label_key=f\"{method}_cont_by_label\",\n        colour_by_categorical=col_by_categ,\n        shape_exp=shape_exp,\n        face_colour=bg_colour,\n        invert_plot_order=inverse,\n    )\n    axes[1].set_xlabel(f\"{descriptor} by length (metres)\", fontsize=\"x-small\")  # type: ignore\n    plt.show()\n\nINFO:cityseer.tools.plot:Extracting edge geometries\n\n\nPlotting results for method: names\n\n\n30609it [00:00, 469577.59it/s]\nINFO:cityseer.tools.plot:Generating plot\n100%|██████████| 30609/30609 [00:02&lt;00:00, 11117.21it/s]\nINFO:cityseer.tools.plot:Extracting edge geometries\n30609it [00:00, 545878.18it/s]\nINFO:cityseer.tools.plot:Generating plot\n100%|██████████| 30609/30609 [00:03&lt;00:00, 10180.88it/s]\n\n\n\n\n\n\n\n\n\nINFO:cityseer.tools.plot:Extracting edge geometries\n\n\nPlotting results for method: routes\n\n\n30609it [00:00, 464096.40it/s]\nINFO:cityseer.tools.plot:Generating plot\n100%|██████████| 30609/30609 [00:03&lt;00:00, 9764.13it/s] \nINFO:cityseer.tools.plot:Extracting edge geometries\n30609it [00:00, 694550.28it/s]\nINFO:cityseer.tools.plot:Generating plot\n100%|██████████| 30609/30609 [00:03&lt;00:00, 8866.57it/s] \n\n\n\n\n\n\n\n\n\nINFO:cityseer.tools.plot:Extracting edge geometries\n\n\nPlotting results for method: highways\n\n\n30609it [00:00, 532384.47it/s]\nINFO:cityseer.tools.plot:Generating plot\n100%|██████████| 6/6 [00:02&lt;00:00,  2.75it/s]\nINFO:cityseer.tools.plot:Extracting edge geometries\n30609it [00:00, 593554.44it/s]\nINFO:cityseer.tools.plot:Generating plot\n100%|██████████| 6/6 [00:02&lt;00:00,  2.96it/s]\n\n\n\n\n\n\n\n\n\nINFO:cityseer.tools.plot:Extracting edge geometries\n\n\nPlotting results for method: hybrid\n\n\n30609it [00:00, 652573.79it/s]\nINFO:cityseer.tools.plot:Generating plot\n100%|██████████| 11/11 [00:02&lt;00:00,  5.26it/s]\nINFO:cityseer.tools.plot:Extracting edge geometries\n30609it [00:00, 700114.25it/s]\nINFO:cityseer.tools.plot:Generating plot\n100%|██████████| 11/11 [00:01&lt;00:00,  5.77it/s]"
  },
  {
    "objectID": "recipes/accessibility/osm_accessibility.html",
    "href": "recipes/accessibility/osm_accessibility.html",
    "title": "Landuse accessibility from OSM data",
    "section": "",
    "text": "Calculate landuse accessibilities from OSM data.\nThis examples calculates landuse accessibility to pubs and restaurants for London using OpenStreetMap data.\n\nfrom cityseer.metrics import layers\nfrom cityseer.tools import graphs, io\nimport matplotlib.pyplot as plt\nfrom osmnx import features\n\nTo start, follow the same approach as shown in the network examples to create the network.\n\nlng, lat = -0.13396079424572427, 51.51371088849723\nbuffer = 1500\npoly_wgs, epsg_code = io.buffered_point_poly(lng, lat, buffer)\nG = io.osm_graph_from_poly(poly_wgs)\nG_dual = graphs.nx_to_dual(G)\nnodes_gdf, _edges_gdf, network_structure = io.network_structure_from_nx(G_dual)\n\nWARNING:cityseer.tools.io:Merging node 12450391665 into 25544116 due to identical x, y coords.\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nWARNING:cityseer.tools.io:Unable to parse level info: -`;-4\nINFO:cityseer.tools.graphs:Generating interpolated edge geometries.\n100%|██████████| 24137/24137 [00:00&lt;00:00, 32175.89it/s]\nINFO:cityseer.tools.io:Converting networkX graph to CRS code 32630.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\n100%|██████████| 22415/22415 [00:00&lt;00:00, 458947.15it/s]\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\n100%|██████████| 24137/24137 [00:03&lt;00:00, 7254.89it/s] \nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 22415/22415 [00:01&lt;00:00, 13879.86it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 12164/12164 [00:00&lt;00:00, 796221.95it/s]\n100%|██████████| 12164/12164 [00:01&lt;00:00, 6485.78it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 10442/10442 [00:00&lt;00:00, 39344.82it/s]\n100%|██████████| 7384/7384 [00:00&lt;00:00, 170909.83it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 9004/9004 [00:00&lt;00:00, 542374.17it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 6651/6651 [00:00&lt;00:00, 1062635.83it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 5270/5270 [00:00&lt;00:00, 91584.00it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6660/6660 [00:00&lt;00:00, 114239.01it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 6611/6611 [00:00&lt;00:00, 601226.01it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 5270/5270 [00:00&lt;00:00, 14552.14it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6667/6667 [00:00&lt;00:00, 34978.63it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 6657/6657 [00:00&lt;00:00, 620298.17it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 5270/5270 [00:00&lt;00:00, 66320.97it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6658/6658 [00:00&lt;00:00, 260882.79it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 6658/6658 [00:00&lt;00:00, 461428.88it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 5270/5270 [00:00&lt;00:00, 62305.63it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6659/6659 [00:00&lt;00:00, 133573.11it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 5270/5270 [00:00&lt;00:00, 23229.99it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 5270/5270 [00:01&lt;00:00, 4358.35it/s] \nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6607/6607 [00:00&lt;00:00, 140421.52it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 5230/5230 [00:00&lt;00:00, 219775.28it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 5158/5158 [00:00&lt;00:00, 16874.80it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 5158/5158 [00:13&lt;00:00, 379.10it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6062/6062 [00:00&lt;00:00, 35120.64it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 4801/4801 [00:00&lt;00:00, 199766.41it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 4765/4765 [00:00&lt;00:00, 6171.92it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 4765/4765 [00:03&lt;00:00, 1360.04it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 5857/5857 [00:00&lt;00:00, 89795.70it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 4713/4713 [00:00&lt;00:00, 61984.59it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 4698/4698 [00:00&lt;00:00, 25120.17it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 4698/4698 [00:04&lt;00:00, 948.92it/s] \nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 5715/5715 [00:00&lt;00:00, 114634.64it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 4617/4617 [00:00&lt;00:00, 396281.78it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 4602/4602 [00:00&lt;00:00, 25589.26it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 5692/5692 [00:00&lt;00:00, 794105.19it/s]\nINFO:cityseer.tools.graphs:Snapping gapped endings.\n100%|██████████| 4602/4602 [00:00&lt;00:00, 7457.33it/s] \nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 5889/5889 [00:00&lt;00:00, 421297.59it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 4602/4602 [00:00&lt;00:00, 6607.16it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 6779/6779 [00:00&lt;00:00, 134301.25it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\n100%|██████████| 5098/5098 [00:00&lt;00:00, 370254.40it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 4298/4298 [00:00&lt;00:00, 13844.61it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 4818/4818 [00:00&lt;00:00, 224824.85it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 3138/3138 [00:00&lt;00:00, 3590.38it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 4857/4857 [00:00&lt;00:00, 54270.50it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 3138/3138 [00:00&lt;00:00, 26443.35it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 3138/3138 [00:22&lt;00:00, 141.32it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 3881/3881 [00:00&lt;00:00, 12165.07it/s]\nINFO:cityseer.tools.util:Creating edges STR tree.\n100%|██████████| 3682/3682 [00:00&lt;00:00, 399168.43it/s]\nINFO:cityseer.tools.graphs:Splitting opposing edges.\n100%|██████████| 2476/2476 [00:00&lt;00:00, 5052.38it/s]\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 3692/3692 [00:00&lt;00:00, 151398.78it/s]\nINFO:cityseer.tools.util:Creating nodes STR tree\n100%|██████████| 2476/2476 [00:00&lt;00:00, 22488.45it/s]\nINFO:cityseer.tools.graphs:Consolidating nodes.\n100%|██████████| 2476/2476 [00:13&lt;00:00, 179.61it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\n100%|██████████| 3168/3168 [00:00&lt;00:00, 27905.77it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 2030/2030 [00:00&lt;00:00, 44400.60it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\n100%|██████████| 2934/2934 [00:00&lt;00:00, 66311.14it/s]\nINFO:cityseer.tools.graphs:Ironing edges.\n100%|██████████| 2916/2916 [00:00&lt;00:00, 10649.15it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\n100%|██████████| 2905/2905 [00:00&lt;00:00, 230295.10it/s]\nINFO:cityseer.tools.graphs:Removing dangling nodes.\n100%|██████████| 1890/1890 [00:00&lt;00:00, 218296.93it/s]\nINFO:cityseer.tools.graphs:Removing filler nodes.\n100%|██████████| 1872/1872 [00:00&lt;00:00, 103038.46it/s]\nINFO:cityseer.tools.graphs:Converting graph to dual.\nINFO:cityseer.tools.graphs:Preparing dual nodes\n100%|██████████| 2854/2854 [00:00&lt;00:00, 19984.88it/s]\nINFO:cityseer.tools.graphs:Preparing dual edges (splitting and welding geoms)\n100%|██████████| 2854/2854 [00:08&lt;00:00, 339.47it/s]\nINFO:cityseer.tools.io:Preparing node and edge arrays from networkX graph.\n100%|██████████| 2854/2854 [00:00&lt;00:00, 30413.74it/s]\n100%|██████████| 2854/2854 [00:01&lt;00:00, 2058.32it/s]\nINFO:cityseer.graph:Edge R-tree built successfully with 6722 items.\n\n\nPrepare the amenities GeoDataFrame by downloading the data from OpenStreetMap. The osmnx features_from_polygon works well for this purpose. In this instance, we are specifically targeting features that are labelled as an amenity type of either pub or restaurant. You can use the same idea to extract other features or land use types.\nIt is important to convert the derivative GeoDataFrame to the same CRS as the network.\n\ndata_gdf = features.features_from_polygon(\n    poly_wgs, tags={\"amenity\": [\"pub\", \"restaurant\"]}\n)\ndata_gdf = data_gdf.to_crs(nodes_gdf.crs)\ndata_gdf\n\n\n\n\n\n\n\n\n\ngeometry\naddr:city\naddr:country\naddr:housenumber\naddr:postcode\naddr:street\namenity\ncheck_date\ncontact:email\ncontact:phone\n...\naccess:conditional\nnote:access\nname:gsw\nnote:name:en\nnote:name:zh\nwebsite:en\nserving_system:buffet\nbuilding:use\nfloor\ntype\n\n\nelement\nid\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nnode\n21593236\nPOINT (699869.619 5711280.678)\nLondon\nGB\n12\nWC2A 3HP\nGate Street\npub\n2023-04-18\ninfo@theshiptavern.co.uk\n+44 20 7405 1992\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n25471087\nPOINT (699749.16 5710787.29)\nLondon\nNaN\n39\nNaN\nBow Street\npub\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n25475914\nPOINT (699606.322 5711699.239)\nNaN\nNaN\nNaN\nNaN\nNaN\npub\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n25746185\nPOINT (700308.36 5710758.42)\nLondon\nNaN\nNaN\nWC2R 3LD\nNaN\npub\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n26699558\nPOINT (699071.215 5711168.671)\nNaN\nNaN\nNaN\nNaN\nNaN\npub\n2024-09-10\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n\n\nway\n995954627\nPOLYGON ((699270.101 5710540.727, 699277.571 5...\nLondon\nNaN\n24\nWC2H 0HX\nCharing Cross Road\nrestaurant\n2024-10-07\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n1016903732\nPOLYGON ((699039.571 5710804.095, 699036.453 5...\nNaN\nNaN\nNaN\nNaN\nNaN\nrestaurant\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n1060462032\nPOLYGON ((700144.125 5710144.723, 700142.327 5...\nLondon\nNaN\nNaN\nSE1 8XX\nBelvedere Road\nrestaurant\nNaN\nNaN\nNaN\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nretail\nNaN\nNaN\n\n\n1072559143\nPOLYGON ((699383.906 5710631.863, 699382.376 5...\nLondon\nNaN\n17\nWC2E 9AX\nGarrick Street\nrestaurant\nNaN\nNaN\n+44 20 3675 0930\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n1194233515\nPOLYGON ((700109.233 5711375.71, 700111.379 57...\nLondon\nNaN\n283-288\nWC1V 7HP\nHigh Holborn\npub\n2023-08-03\nNaN\n+44 20 7242 5669\n...\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nGround\nNaN\n\n\n\n\n1431 rows × 253 columns\n\n\n\nSome preparatory data cleaning is typically necessary. This example extracts the particular rows and columns of interest for the subsequent steps of analysis.\n\n# extract nodes\ndata_gdf = data_gdf.loc[\"node\"]\n# reset index\ndata_gdf = data_gdf.reset_index(level=0, drop=True)\n# extract relevant columns\ndata_gdf = data_gdf[[\"amenity\", \"geometry\"]]\ndata_gdf.head()\n\n\n\n\n\n\n\n\namenity\ngeometry\n\n\n\n\n0\npub\nPOINT (699869.619 5711280.678)\n\n\n1\npub\nPOINT (699749.16 5710787.29)\n\n\n2\npub\nPOINT (699606.322 5711699.239)\n\n\n3\npub\nPOINT (700308.36 5710758.42)\n\n\n4\npub\nPOINT (699071.215 5711168.671)\n\n\n\n\n\n\n\nOnce the land use and network data has been prepared, use the layers.compute_accessibilities method to compute accessibilities to land uses. The landuse_column_label and the target accessibility keys should correspond to the data in the input GeoDataFrame.\n\n# compute pub accessibility\ndistances = [100, 200, 400, 800]\nnodes_gdf, data_gdf = layers.compute_accessibilities(\n    data_gdf,\n    landuse_column_label=\"amenity\",\n    accessibility_keys=[\"pub\", \"restaurant\"],\n    nodes_gdf=nodes_gdf,\n    network_structure=network_structure,\n    distances=distances,\n)\n\nINFO:cityseer.metrics.layers:Computing land-use accessibility for: pub, restaurant\nINFO:cityseer.metrics.layers:Assigning data to network.\nINFO:cityseer.data:Assigning 701 data entries to network nodes (max_dist: 400).\nINFO:cityseer.data:Collected 1154 potential node assignments from data entries.\nINFO:cityseer.data:Finished assigning data. 1154 assignments added to 692 nodes.\nINFO:cityseer.graph:Barriers unset and R-tree cleared.\n100%|██████████| 2854/2854 [00:01&lt;00:00, 2841.05it/s]\nINFO:cityseer.config:Metrics computed for:\nINFO:cityseer.config:Distance: 100m, Beta: 0.04, Walking Time: 1.25 minutes.\nINFO:cityseer.config:Distance: 200m, Beta: 0.02, Walking Time: 2.5 minutes.\nINFO:cityseer.config:Distance: 400m, Beta: 0.01, Walking Time: 5.0 minutes.\nINFO:cityseer.config:Distance: 800m, Beta: 0.005, Walking Time: 10.0 minutes.\n\n\nThe output columns are named cc_{key}_{distance}_{type}. Where the keys will correspond to the input accessibility keys and the distances will correspond to the input distances. The types will correspond to either non-weighted nw or distance weighted wt count, or else the distance to the nearest instance of a given landuse.\nStandard GeoPandas functionality can be used to explore, visualise, or save the results.\n\nnodes_gdf.columns\n\nIndex(['ns_node_idx', 'x', 'y', 'live', 'weight', 'primal_edge',\n       'primal_edge_node_a', 'primal_edge_node_b', 'primal_edge_idx',\n       'dual_node', 'cc_pub_100_nw', 'cc_pub_100_wt', 'cc_pub_200_nw',\n       'cc_pub_200_wt', 'cc_pub_400_nw', 'cc_pub_400_wt', 'cc_pub_800_nw',\n       'cc_pub_800_wt', 'cc_pub_nearest_max_800', 'cc_restaurant_100_nw',\n       'cc_restaurant_100_wt', 'cc_restaurant_200_nw', 'cc_restaurant_200_wt',\n       'cc_restaurant_400_nw', 'cc_restaurant_400_wt', 'cc_restaurant_800_nw',\n       'cc_restaurant_800_wt', 'cc_restaurant_nearest_max_800'],\n      dtype='object')\n\n\n\nfig, ax = plt.subplots(1, 1, figsize=(8, 8), facecolor=\"#1d1d1d\")\nnodes_gdf.plot(\n    column=\"cc_restaurant_400_wt\",\n    cmap=\"magma\",\n    legend=False,\n    ax=ax,\n)\ndata_gdf[data_gdf[\"amenity\"] == \"restaurant\"].plot(\n    markersize=2,\n    edgecolor=None,\n    color=\"white\",\n    legend=False,\n    ax=ax,\n)\nax.axis(False)\n\n(np.float64(697035.8123208123),\n np.float64(700647.6928482385),\n np.float64(5709134.052621752),\n np.float64(5712638.694212982))\n\n\n\n\n\n\n\n\n\n\nfig, ax = plt.subplots(1, 1, figsize=(8, 8), facecolor=\"#1d1d1d\")\nnodes_gdf.plot(\n    column=\"cc_pub_nearest_max_800\",\n    cmap=\"viridis_r\",\n    legend=False,\n    ax=ax,\n)\ndata_gdf[data_gdf[\"amenity\"] == \"pub\"].plot(\n    markersize=2,\n    edgecolor=None,\n    color=\"white\",\n    legend=False,\n    ax=ax,\n)\nax.axis(False)\n\n(np.float64(697035.8123208123),\n np.float64(700647.6928482385),\n np.float64(5709196.42405734),\n np.float64(5712635.724144622))"
  },
  {
    "objectID": "recipes/accessibility/gpd_accessibility.html",
    "href": "recipes/accessibility/gpd_accessibility.html",
    "title": "Landuse accessibility from GeoPandas data",
    "section": "",
    "text": "Calculate landuse accessibilities from a geopandas GeoDataFrame.\n\nimport geopandas as gpd\nimport matplotlib.pyplot as plt\nfrom cityseer.metrics import layers\nfrom cityseer.tools import graphs, io\n\nTo start, follow the same approach as shown in the network examples to create the network.\n\nstreets_gpd = gpd.read_file(\"data/madrid_streets/street_network.gpkg\")\nstreets_gpd = streets_gpd.explode(reset_index=True)\nG = io.nx_from_generic_geopandas(streets_gpd)\nG_dual = graphs.nx_to_dual(G)\nnodes_gdf, _edges_gdf, network_structure = io.network_structure_from_nx(G_dual)\n\n100%|██████████| 47155/47155 [00:06&lt;00:00, 7343.79it/s]\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\n100%|██████████| 47129/47129 [00:00&lt;00:00, 275854.72it/s]\nINFO:cityseer.tools.graphs:Converting graph to dual.\nINFO:cityseer.tools.graphs:Preparing dual nodes\n100%|██████████| 47129/47129 [00:01&lt;00:00, 44160.82it/s]\nINFO:cityseer.tools.graphs:Preparing dual edges (splitting and welding geoms)\n100%|██████████| 47129/47129 [01:01&lt;00:00, 761.63it/s] \nINFO:cityseer.tools.io:Preparing node and edge arrays from networkX graph.\n100%|██████████| 47129/47129 [00:00&lt;00:00, 49521.54it/s]\n100%|██████████| 47129/47129 [00:10&lt;00:00, 4347.89it/s]\nINFO:cityseer.graph:Edge R-tree built successfully with 104026 items.\n\n\nRead-in the dataset from the source Geopackage or Shapefile Geopandas.\n\nprems_gpd = gpd.read_file(\"data/madrid_premises/madrid_premises.gpkg\")\nprems_gpd.head()\n\n\n\n\n\n\n\n\nindex\nlocal_id\nlocal_distr_id\nlocal_distr_desc\nlocal_neighb_id\nlocal_neighb_desc\nlocal_neighb_code\nlocal_census_section_id\nlocal_census_section_desc\nsection_id\nsection_desc\ndivision_id\ndivision_desc\nepigraph_id\nepigraph_desc\neasting\nnorthing\ngeometry\n\n\n\n\n0\n0\n10003324\n1\nCENTRO\n105\nUNIVERSIDAD\n5\n1091\n91\nI\nhospitality\n56\nfood_bev\n561001\nRESTAURANTE\n440181.6\n4475586.5\nPOINT (440181.6 4475586.5)\n\n\n1\n1\n10003330\n1\nCENTRO\n105\nUNIVERSIDAD\n5\n1115\n115\nR\nart_rec_entert\n90\ncreat_entert\n900003\nTEATRO Y ACTIVIDADES ESCENICAS REALIZADAS EN D...\n440000.6\n4474761.5\nPOINT (440000.6 4474761.5)\n\n\n2\n2\n10003356\n1\nCENTRO\n104\nJUSTICIA\n4\n1074\n74\nI\nhospitality\n56\nfood_bev\n561004\nBAR RESTAURANTE\n440618.6\n4474692.5\nPOINT (440618.6 4474692.5)\n\n\n3\n3\n10003364\n1\nCENTRO\n104\nJUSTICIA\n4\n1075\n75\nG\nwholesale_retail_motor\n47\nretail\n472401\nCOMERCIO AL POR MENOR DE PAN Y PRODUCTOS DE PA...\n440666.6\n4474909.5\nPOINT (440666.6 4474909.5)\n\n\n4\n4\n10003367\n1\nCENTRO\n106\nSOL\n6\n1119\n119\nG\nwholesale_retail_motor\n47\nretail\n477701\nCOMERCIO AL POR MENOR DE JOYAS, RELOJERIA Y BI...\n440378.6\n4474380.5\nPOINT (440378.6 4474380.5)\n\n\n\n\n\n\n\nIdentify or prepare any columns and land uses of interest, for which you want to compute accessibilities.\n\nprems_gpd.division_desc.unique()\n\narray(['food_bev', 'creat_entert', 'retail', 'services', 'education',\n       'accommod', 'Real Estate Activities',\n       'Residential Care Activities',\n       'Social Services Without Accommodation',\n       'Graphic Arts and Reproduction of Recorded Media',\n       'Sale and Repair of Motor Vehicles and Motorcycles',\n       'Decontamination and Other Waste Management Services',\n       'Gambling and Betting Activities', 'sports_rec', 'health',\n       'Wholesale Trade and Middlemen, Except for Motor Vehicles and Motorcycles',\n       'Telecommunications',\n       'Financial Services, Except Insurance and Pension Funds',\n       'Associative Activities', 'Veterinary Activities',\n       'Auxiliary Services to Financial Services and Insurance',\n       'Insurance, Reinsurance, and Pension Funds, Except Compulsory Social Security',\n       'Rental Activities',\n       'Office Administrative and Other Business Support Activities',\n       'Technical Services of Architecture and Engineering; Technical Testing and Analysis',\n       'Other Manufacturing Industries',\n       'Storage and Activities Related to Transport',\n       'Specialized Construction Activities and Building Finishing',\n       'Clothing Manufacturing',\n       'Activities of Travel Agencies, Tour Operators, Reservation Services, and Related Activities',\n       'Land Transport and Pipeline Transport',\n       'Other Professional, Scientific, and Technical Activities',\n       'Computer Repair, Personal Effects, and Household Items',\n       'Publishing (Includes Software)', 'Postal and Courier Activities',\n       'Food Industry', 'Advertising and Market Research',\n       'Public Administration and Defense; Compulsory Social Security',\n       'Film, Video, and TV Program Activities, Sound Recording, and Music Publishing, Sound Recording and Music Publishing',\n       'Legal and Accounting Activities',\n       'Building Promotion and Construction',\n       'Supply of Electricity, Gas, Steam, and Air Conditioning',\n       'Activities of Libraries, Archives, Museums, and Other Cultural Activities',\n       'Paper Industry',\n       'Manufacturing of Computer, Electronic, and Optical Products',\n       'Security and Investigation Activities',\n       'Leather and Footwear Industry',\n       'Repair and Installation of Machinery and Equipment',\n       'Manufacturing of Metal Products, Except Machinery and Equipment',\n       'Furniture Manufacturing',\n       'Building Services and Gardening Activities', 'Chemical Industry',\n       'Programming, Consultancy, and Other Computer-Related Activities',\n       'Manufacturing of Other Non-Metallic Mineral Products',\n       'Textile Industry', 'Research and Development',\n       'Activities of Head Offices; Management Consultancy Activities',\n       'Pharmaceutical Product Manufacturing',\n       'Manufacturing of Machinery and Equipment N.E.C.',\n       'Manufacturing of Motor Vehicles, Trailers, and Semi-Trailers',\n       'Information Services',\n       'Manufacturing of Rubber and Plastic Products',\n       'Manufacturing of Electrical Equipment',\n       'Manufacturing of Other Transport Equipment', 'Civil Engineering',\n       'Wood and Cork Industry, Except Furniture; Basketry and Basketwork',\n       'Waste Collection, Treatment, and Disposal; Materials Recovery',\n       'Activities of Extraterritorial Organizations and Bodies',\n       'Air Transport', 'Employment Activities',\n       'Agriculture, Livestock, Hunting, and Related Service Activities',\n       'Metallurgy; Manufacturing of Iron, Steel, and Ferro-Alloy Products',\n       'Broadcasting and Television Programming and Broadcasting Activities',\n       'Wastewater Collection and Treatment', 'Beverage Manufacturing',\n       'Water Collection, Treatment, and Supply',\n       'Support Activities for Extractive Industries',\n       'Other Extractive Industries', 'Forestry and Logging',\n       'Tobacco Industry'], dtype=object)\n\n\nOnce the land use and network data has been prepared, use the layers.compute_accessibilities method to compute accessibilities to land uses. The landuse_column_label and the target accessibility keys should correspond to the data in the input GeoDataFrame.\n\n# compute accessibility\ndistances = [100, 200, 400, 800]\nnodes_gdf, prems_gpd = layers.compute_accessibilities(\n    prems_gpd,\n    landuse_column_label=\"division_desc\",\n    accessibility_keys=[\"food_bev\", \"creat_entert\", \"retail\"],\n    nodes_gdf=nodes_gdf,\n    network_structure=network_structure,\n    distances=distances,\n)\n\nINFO:cityseer.metrics.layers:Computing land-use accessibility for: food_bev, creat_entert, retail\nINFO:cityseer.metrics.layers:Assigning data to network.\nINFO:cityseer.data:Assigning 117358 data entries to network nodes (max_dist: 100).\nINFO:cityseer.data:Collected 198773 potential node assignments from data entries.\nINFO:cityseer.data:Finished assigning data. 198773 assignments added to 24576 nodes.\nINFO:cityseer.graph:Barriers unset and R-tree cleared.\n100%|██████████| 47129/47129 [00:11&lt;00:00, 4210.26it/s]\nINFO:cityseer.config:Metrics computed for:\nINFO:cityseer.config:Distance: 100m, Beta: 0.04, Walking Time: 1.25 minutes.\nINFO:cityseer.config:Distance: 200m, Beta: 0.02, Walking Time: 2.5 minutes.\nINFO:cityseer.config:Distance: 400m, Beta: 0.01, Walking Time: 5.0 minutes.\nINFO:cityseer.config:Distance: 800m, Beta: 0.005, Walking Time: 10.0 minutes.\n\n\nThe output columns are named cc_{key}_{distance}_{type}. Where the keys will correspond to the input accessibility keys and the distances will correspond to the input distances. The types will correspond to either non-weighted nw or distance weighted wt count, or else the distance to the nearest instance of a given landuse.\nStandard GeoPandas functionality can be used to explore, visualise, or save the results.\n\nnodes_gdf.columns\n\nIndex(['ns_node_idx', 'x', 'y', 'live', 'weight', 'primal_edge',\n       'primal_edge_node_a', 'primal_edge_node_b', 'primal_edge_idx',\n       'dual_node', 'cc_food_bev_100_nw', 'cc_food_bev_100_wt',\n       'cc_food_bev_200_nw', 'cc_food_bev_200_wt', 'cc_food_bev_400_nw',\n       'cc_food_bev_400_wt', 'cc_food_bev_800_nw', 'cc_food_bev_800_wt',\n       'cc_food_bev_nearest_max_800', 'cc_creat_entert_100_nw',\n       'cc_creat_entert_100_wt', 'cc_creat_entert_200_nw',\n       'cc_creat_entert_200_wt', 'cc_creat_entert_400_nw',\n       'cc_creat_entert_400_wt', 'cc_creat_entert_800_nw',\n       'cc_creat_entert_800_wt', 'cc_creat_entert_nearest_max_800',\n       'cc_retail_100_nw', 'cc_retail_100_wt', 'cc_retail_200_nw',\n       'cc_retail_200_wt', 'cc_retail_400_nw', 'cc_retail_400_wt',\n       'cc_retail_800_nw', 'cc_retail_800_wt', 'cc_retail_nearest_max_800'],\n      dtype='object')\n\n\n\nfig, ax = plt.subplots(1, 1, figsize=(8, 8), facecolor=\"#1d1d1d\")\nnodes_gdf.plot(\n    column=\"cc_retail_400_wt\",\n    cmap=\"inferno\",\n    legend=False,\n    ax=ax,\n)\nprems_gpd[prems_gpd[\"division_desc\"] == \"retail\"].plot(\n    markersize=1,\n    edgecolor=None,\n    color=\"white\",\n    legend=False,\n    ax=ax,\n)\nax.set_xlim(439000, 439000 + 2500)\nax.set_ylim(4473000, 4473000 + 2500)\nax.axis(False)\n\n(np.float64(439000.0),\n np.float64(441500.0),\n np.float64(4473000.0),\n np.float64(4475500.0))\n\n\n\n\n\n\n\n\n\n\nfig, ax = plt.subplots(1, 1, figsize=(8, 8), facecolor=\"#1d1d1d\")\nnodes_gdf.plot(\n    column=\"cc_food_bev_200_wt\",\n    cmap=\"magma\",\n    legend=False,\n    ax=ax,\n)\nprems_gpd[prems_gpd[\"division_desc\"] == \"food_bev\"].plot(\n    markersize=1,\n    edgecolor=None,\n    color=\"white\",\n    legend=False,\n    ax=ax,\n)\nax.set_xlim(439000, 439000 + 2500)\nax.set_ylim(4473000, 4473000 + 2500)\nax.axis(False)\n\n(np.float64(439000.0),\n np.float64(441500.0),\n np.float64(4473000.0),\n np.float64(4475500.0))\n\n\n\n\n\n\n\n\n\n\nnodes_gdf[\"cc_creat_entert_nearest_max_800\"].fillna(800, inplace=True)\n\nfig, ax = plt.subplots(1, 1, figsize=(8, 8), facecolor=\"#1d1d1d\")\nnodes_gdf.plot(\n    column=\"cc_creat_entert_nearest_max_800\",\n    cmap=\"viridis_r\",\n    legend=False,\n    ax=ax,\n)\nprems_gpd[prems_gpd[\"division_desc\"] == \"creat_entert\"].plot(\n    markersize=2,\n    edgecolor=None,\n    color=\"white\",\n    legend=False,\n    ax=ax,\n)\nax.set_xlim(439000, 439000 + 2500)\nax.set_ylim(4473000, 4473000 + 2500)\nax.axis(False)\n\n/var/folders/t_/5c1lfd_94x15tzn6qlb2btk40000gn/T/ipykernel_12306/3453596325.py:1: FutureWarning: A value is trying to be set on a copy of a DataFrame or Series through chained assignment using an inplace method.\nThe behavior will change in pandas 3.0. This inplace method will never work because the intermediate object on which we are setting values always behaves as a copy.\n\nFor example, when doing 'df[col].method(value, inplace=True)', try using 'df.method({col: value}, inplace=True)' or df[col] = df[col].method(value) instead, to perform the operation inplace on the original object.\n\n\n  nodes_gdf[\"cc_creat_entert_nearest_max_800\"].fillna(800, inplace=True)\n\n\n(np.float64(439000.0),\n np.float64(441500.0),\n np.float64(4473000.0),\n np.float64(4475500.0))"
  },
  {
    "objectID": "class/6_data_science.html",
    "href": "class/6_data_science.html",
    "title": "Data Science",
    "section": "",
    "text": "Data science encompasses a wide array of methods to extract insights and knowledge from data. Broadly, these methods can be categorised:\n\nExploratory Data Analysis: This involves examining datasets to summarise their main characteristics, often with visual methods. It’s a first step to understand data distributions, relationships between variables, and to identify anomalies or patterns.\nUnsupervised Learning: This type of machine learning aims to find hidden patterns or intrinsic structures in input data without pre-existing labels.\n\nDimensionality Reduction: Simplifies complex datasets by reducing the number of variables (features) while preserving underlying information.\nClustering: Groups data points based on their similarity, helping to identify distinct segments or typologies within the data.\n\nSupervised Learning: This involves training a model on a labelled dataset, where the desired output is already known. The goal is to predict the output for new, unseen data. Regression (predicting continuous values) and classification (predicting discrete categories) are common supervised tasks.\n\nThis notebook will briefly demonstrate an example of dimensionality reduction using PCA to understand latent structures in street network centrality measures, and an example of supervised learning using a Random Forest Regressor to predict restaurant accessibility. This is a high-level introduction, and you are encouraged to explore these powerful techniques further.\nFirst, we import the necessary Python packages.\n\nimport matplotlib.pyplot as plt\nimport osmnx as ox\nfrom cityseer.metrics import layers, networks\nfrom cityseer.tools import graphs, io, plot\n\nFirst, we define the geographical area of interest (Nicosia, Cyprus) using longitude and latitude coordinates, and a buffer radius. Then, we use cityseer to:\n\nCreate a buffered polygon area around the center point.\nDownload and simplify the street network within this polygon from OpenStreetMap.\nConvert the primal graph (intersections and streets) to its dual representation (streets as nodes, intersections as edges) so that calculations can be expressed relative to streets.\nExtract the network structure (nodes and edges) into GeoDataFrames.\nCalculate various node centrality measures (network density, harmonic closeness, betweenness) at different distances (500m, 1000m, 2000m, 5000m) using angular analysis (considering turning angles). These measures help quantify the importance or connectivity of each node within the network.\n\nTo learn more about these methods, look at the Cityseer Recipes section.\n\nlng, lat = 33.36402, 35.17526\nbuffer = 2000\n\npoly_wgs, epsg_code = io.buffered_point_poly(lng, lat, buffer)\nG = io.osm_graph_from_poly(poly_wgs, to_crs_code=3035)\nG_dual = graphs.nx_to_dual(G)\nnodes_gdf, _edges_gdf, network_structure = io.network_structure_from_nx(\n    G_dual,\n)\nnodes_gdf = networks.node_centrality_simplest(\n    network_structure=network_structure,\n    nodes_gdf=nodes_gdf,\n    distances=[500, 1000, 2000, 5000],\n)\nnodes_gdf.head()\n\nINFO:cityseer.tools.graphs:Generating interpolated edge geometries.\nINFO:cityseer.tools.io:Converting networkX graph to CRS code 3035.\nINFO:cityseer.tools.io:Processing node x, y coordinates.\nINFO:cityseer.tools.io:Processing edge geom coordinates, if present.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Snapping gapped endings.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating edges STR tree.\nINFO:cityseer.tools.graphs:Splitting opposing edges.\nINFO:cityseer.tools.graphs:Squashing opposing nodes\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.util:Creating nodes STR tree\nINFO:cityseer.tools.graphs:Consolidating nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 25.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 50.\nINFO:cityseer.tools.graphs:Ironing edges.\nINFO:cityseer.tools.graphs:Merging parallel edges within buffer of 1.\nINFO:cityseer.tools.graphs:Removing dangling nodes.\nINFO:cityseer.tools.graphs:Removing filler nodes.\nINFO:cityseer.tools.graphs:Converting graph to dual.\nINFO:cityseer.tools.graphs:Preparing dual nodes\nINFO:cityseer.tools.graphs:Preparing dual edges (splitting and welding geoms)\nINFO:cityseer.tools.io:Preparing node and edge arrays from networkX graph.\nINFO:cityseer.graph:Edge R-tree built successfully with 8261 items.\nINFO:cityseer.metrics.networks:Computing simplest path node centrality.\nINFO:cityseer.config:Metrics computed for:\nINFO:cityseer.config:Distance: 500m, Beta: 0.008, Walking Time: 6.25 minutes.\nINFO:cityseer.config:Distance: 1000m, Beta: 0.004, Walking Time: 12.5 minutes.\nINFO:cityseer.config:Distance: 2000m, Beta: 0.002, Walking Time: 25.0 minutes.\nINFO:cityseer.config:Distance: 5000m, Beta: 0.0008, Walking Time: 62.5 minutes.\n\n\n\n\n\n\n\n\n\nns_node_idx\nx\ny\nlive\nweight\nprimal_edge\nprimal_edge_node_a\nprimal_edge_node_b\nprimal_edge_idx\ndual_node\n...\ncc_hillier_2000_ang\ncc_hillier_5000_ang\ncc_farness_500_ang\ncc_farness_1000_ang\ncc_farness_2000_ang\ncc_farness_5000_ang\ncc_betweenness_500_ang\ncc_betweenness_1000_ang\ncc_betweenness_2000_ang\ncc_betweenness_5000_ang\n\n\n\n\n48726322_48726455_k0\n0\n6.433811e+06\n1.668938e+06\nTrue\n1\nLINESTRING (6433846.36 1669056.022, 6433841.38...\n48726322\n48726455\n0\nPOINT (6433811.251957 1668937.860386)\n...\n82.064583\n282.401154\n69.122574\n684.074768\n3889.924072\n43576.535156\n0.0\n0.0\n0.0\n0.0\n\n\n12726|58326±94915|35720_1946128965_k0\n1\n6.433905e+06\n1.668819e+06\nTrue\n1\nLINESTRING (6434031.721 1668984.642, 6434023.1...\n1946128965\n12726|58326±94915|35720\n0\nPOINT (6433905.232527 1668818.937382)\n...\n108.170525\n334.010040\n115.184326\n728.558533\n2816.885742\n38371.300781\n0.0\n0.0\n0.0\n0.0\n\n\n12726|58326±94915|35720_9491513922_k0\n2\n6.433850e+06\n1.668726e+06\nTrue\n1\nLINESTRING (6434031.721 1668984.642, 6434026.0...\n9491513922\n12726|58326±94915|35720\n0\nPOINT (6433850.491637 1668725.511627)\n...\n101.548767\n331.368347\n35.281052\n596.484436\n2442.215820\n37604.375000\n0.0\n0.0\n0.0\n0.0\n\n\n33755185_5125635691_k0\n3\n6.433199e+06\n1.669437e+06\nTrue\n1\nLINESTRING (6433477.844 1669569.725, 6433441.0...\n5125635691\n33755185\n0\nPOINT (6433199.422437 1669436.611537)\n...\n85.127052\n336.121613\n35.293468\n358.534912\n2052.508545\n36278.726562\n0.0\n0.0\n0.0\n0.0\n\n\n48726544_5125635684_k0\n4\n6.433514e+06\n1.669124e+06\nTrue\n1\nLINESTRING (6433584.449 1669178.412, 6433502.0...\n48726544\n5125635684\n0\nPOINT (6433513.812668 1669124.248801)\n...\n94.936378\n324.996216\n87.679543\n579.539551\n2248.284668\n38428.621094\n0.0\n0.0\n0.0\n0.0\n\n\n\n\n5 rows × 30 columns\n\n\n\nNext, we use osmnx to acquire data about restaurants within the previously defined polygonal area (poly_wgs).\n\nox.features_from_polygon queries OpenStreetMap for features tagged with \"amenity\": \"restaurant\".\n.to_crs(epsg=3035) reprojects the downloaded restaurant data to the ETRS89 / LAEA Europe projected coordinate system (EPSG:3035) to ensure consistency with the street network data and enable accurate spatial calculations.\ngdf_rest[[\"amenity\", \"geometry\"]] filters out the amenity and geometry columns.\n.reset_index(drop=True) resets the DataFrame index for cleaner data handling.\n\n\ngdf_rest = ox.features_from_polygon(poly_wgs, tags={\"amenity\": \"restaurant\"})\ngdf_rest = gdf_rest.to_crs(epsg=3035)\ngdf_rest = gdf_rest[[\"amenity\", \"geometry\"]]\ngdf_rest = gdf_rest.reset_index(drop=True)\ngdf_rest.head()\n\n\n\n\n\n\n\n\namenity\ngeometry\n\n\n\n\n0\nrestaurant\nPOINT (6433704.816 1670134.568)\n\n\n1\nrestaurant\nPOINT (6433708.714 1669375.407)\n\n\n2\nrestaurant\nPOINT (6433986.532 1669950.98)\n\n\n3\nrestaurant\nPOINT (6434080.329 1669986.277)\n\n\n4\nrestaurant\nPOINT (6435265.366 1669515.579)\n\n\n\n\n\n\n\nWe can then use cityseer once again to calculate accessibility to restaurants from each node in the street network.\n\nlayers.compute_accessibilities is a function that takes the restaurant locations (gdf_rest) and the street network nodes (nodes_gdf) as input.\nlanduse_column_label=\"amenity\" specifies that the ‘amenity’ column in gdf_rest identifies the type of feature (restaurants in this case).\naccessibility_keys=[\"restaurant\"] tells the function to calculate accessibility specifically for features labellieed as ‘restaurant’.\nnetwork_structure provides the pre-calculated network graph and its properties.\ndistances=[200, 400, 800] specifies the distance thresholds (in meters) at which accessibility should be measured. For each node, this will count how many restaurants are reachable within 200m, 400m, and 800m along the network.\n\nThe function updates nodes_gdf by adding new columns representing these accessibility scores (e.g., cc_restaurant_200_wt - weighted count of restaurants within 200m, cc_restaurant_200_nw - raw count of restaurants within 200m, etc.).\n\nnodes_gdf, gdf_rest = layers.compute_accessibilities(\n    gdf_rest,\n    landuse_column_label=\"amenity\",\n    accessibility_keys=[\"restaurant\"],\n    nodes_gdf=nodes_gdf,\n    network_structure=network_structure,\n    distances=[200, 400, 800],\n)\n\nINFO:cityseer.metrics.layers:Computing land-use accessibility for: restaurant\nINFO:cityseer.metrics.layers:Assigning data to network.\nINFO:cityseer.data:Assigning 184 data entries to network nodes (max_dist: 100).\nINFO:cityseer.data:Collected 411 potential node assignments from data entries.\nINFO:cityseer.data:Finished assigning data. 411 assignments added to 329 nodes.\nINFO:cityseer.graph:Barriers unset and R-tree cleared.\nINFO:cityseer.config:Metrics computed for:\nINFO:cityseer.config:Distance: 200m, Beta: 0.02, Walking Time: 2.5 minutes.\nINFO:cityseer.config:Distance: 400m, Beta: 0.01, Walking Time: 5.0 minutes.\nINFO:cityseer.config:Distance: 800m, Beta: 0.005, Walking Time: 10.0 minutes.\n\n\nWe now arrive at the Data Science section, which performs Principal Component Analysis (PCA), a dimensionality reduction technique, on the street network centrality measures. The goal is to identify underlying patterns or latent dimensions within these (often correlated) centrality metrics.\n\nStandardScaler() is initialised to standardise the data. PCA is sensitive to the scale of variables, so standardisation (transforming data to have zero mean and unit variance) is a necessary preprocessing step.\nX_scaled = scaler.fit_transform(...) selects the twelve centrality columns (density, harmonic, and betweenness at four different distances) from nodes_gdf and applies the standardisation.\npca = PCA(n_components=4) initialises PCA to extract the top 4 principal components. These components are new, uncorrelated variables that capture the maximum possible variance from the original data.\nX_pca = pca.fit_transform(X_scaled) applies PCA to the scaled centrality data.\nThe next four lines add these four principal components as new columns (pca_1, pca_2, pca_3, pca_4) to the nodes_gdf GeoDataFrame.\nThe subsequent code sets up a 3x1 plot to visualise the spatial distribution of the first three principal components. Each subplot shows the nodes coloured by their score on a principal component. The title of each subplot indicates the percentage of the original data’s variance that is explained by that component. This helps in understanding how much information is retained by each component.\n\n\nfrom sklearn.decomposition import PCA\nfrom sklearn.preprocessing import StandardScaler\n\n# Standardise the data\nscaler = StandardScaler()\nX_scaled = scaler.fit_transform(\n    nodes_gdf[\n        [\n            \"cc_density_500_ang\",\n            \"cc_density_1000_ang\",\n            \"cc_density_2000_ang\",\n            \"cc_density_5000_ang\",\n            \"cc_harmonic_500_ang\",\n            \"cc_harmonic_1000_ang\",\n            \"cc_harmonic_2000_ang\",\n            \"cc_harmonic_5000_ang\",\n            \"cc_betweenness_500_ang\",\n            \"cc_betweenness_1000_ang\",\n            \"cc_betweenness_2000_ang\",\n            \"cc_betweenness_5000_ang\",\n        ]\n    ]\n)\n\n# Perform PCA\npca = PCA(n_components=4)\nX_pca = pca.fit_transform(X_scaled)\n\n# Add PCA components to the DataFrame\nnodes_gdf[\"pca_1\"] = X_pca[:, 0]\nnodes_gdf[\"pca_2\"] = X_pca[:, 1]\nnodes_gdf[\"pca_3\"] = X_pca[:, 2]\nnodes_gdf[\"pca_4\"] = X_pca[:, 3]\n\n# plot explained variance\nfig, ax = plt.subplots(3, 1, figsize=(8, 12))\nnodes_gdf.plot(\n    column=\"pca_1\",\n    cmap=\"Reds\",\n    legend=False,\n    ax=ax[0],\n)\nax[0].set_xlim(6433800, 6433800 + 2700)\nax[0].set_ylim(1669400, 1669400 + 2700)\nax[0].axis(False)\nax[0].set_title(\n    \"PCA 1 - explained variance: {:.0%}\".format(pca.explained_variance_ratio_[0])\n)\n\nnodes_gdf.plot(\n    column=\"pca_2\",\n    cmap=\"Reds\",\n    legend=False,\n    ax=ax[1],\n)\nax[1].set_xlim(6433800, 6433800 + 2700)\nax[1].set_ylim(1669400, 1669400 + 2700)\nax[1].axis(False)\nax[1].set_title(\n    \"PCA 2 - explained variance: {:.0%}\".format(pca.explained_variance_ratio_[1])\n)\n\nnodes_gdf.plot(\n    column=\"pca_3\",\n    cmap=\"Reds\",\n    legend=False,\n    ax=ax[2],\n)\nax[2].set_xlim(6433800, 6433800 + 2700)\nax[2].set_ylim(1669400, 1669400 + 2700)\nax[2].axis(False)\nax[2].set_title(\n    \"PCA 3 - explained variance: {:.0%}\".format(pca.explained_variance_ratio_[2])\n)\n\nText(0.5, 1.0, 'PCA 3 - explained variance: 10%')\n\n\n\n\n\n\n\n\n\nThis cell uses seaborn, a statistical data visualisation library, to create a histogram and a joint plot.\nHistograms are useful for visualising the distribution of a single variable, while joint plots allow for the visualisation of the relationship between two variables along with their individual distributions.\nThe histogram shows the distribution of restaurant accessibility within 800 meters (cc_restaurant_800_wt). The x-axis represents the accessibility values, while the y-axis shows the frequency of these values. The bins=50 argument specifies that the data should be divided into 50 bins for the histogram.\nThe joint plot visualises the relationship between the first principal component (pca_1) and restaurant accessibility within 800 meters (cc_restaurant_800_wt).\n\nimport seaborn as sns\n\nsns.histplot(\n    data=nodes_gdf,\n    x=\"cc_restaurant_800_wt\",\n    bins=50,\n)\nsns.jointplot(\n    data=nodes_gdf,\n    x=\"pca_1\",\n    y=\"cc_restaurant_800_wt\",\n    kind=\"kde\",\n)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nThis cell demonstrates use of a Random Forest Regressor model to predict restaurant accessibility (cc_restaurant_800_wt) based on the four principal components (pca_1 to pca_4) derived from the network centrality measures. This is an example of supervised learning.\n\nX is defined as the DataFrame containing the predictor variables (the four PCA components).\ny is defined as the target variable (restaurant accessibility at 800m).\ntrain_test_split(X, y, ...) splits the data into training (80%) and testing (20%) sets. The model will be trained on the training set and evaluated on the unseen testing set. random_state=42 ensures reproducibility of the split.\nregressor = RandomForestRegressor(...) initialises a Random Forest Regressor model. n_estimators=100 means it will use 100 decision trees. criterion=\"squared_error\" specifies the function to measure the quality of a split.\nregressor.fit(X_train, y_train) trains the model using the training data.\ny_pred = regressor.predict(X_test) makes predictions on the test set.\nr2 = r2_score(y_test, y_pred) calculates the R-squared score, a measure of how well the model’s predictions fit the actual values in the test set. An R2 score closer to 1 indicates a better fit. Increasing the size of the training set generally improves the model’s performance, as it has more data to learn from.\nThe model then predicts accessibility for all nodes using regressor.predict(X) and stores these predictions in a new column cc_restaurant_800_wt_pred.\nnodes_gdf[\"cc_restaurant_800_residuals\"] calculates the residuals (the difference between predicted and actual accessibility values).\nThe final part of the cell sets up a 3x1 plot to visualise:\n\nThe actual restaurant accessibility.\nThe predicted restaurant accessibility (with the R2 score in the title).\nThe residuals of the regression, showing where the model over or under-predicts accessibility. A good model would have residuals randomly scattered around zero.\n\n\n\nfrom sklearn.ensemble import RandomForestRegressor\nfrom sklearn.metrics import r2_score\nfrom sklearn.model_selection import train_test_split\n\nX = nodes_gdf[[\"pca_1\", \"pca_2\", \"pca_3\", \"pca_4\"]]\ny = nodes_gdf[\"cc_restaurant_800_wt\"]\nX_train, X_test, y_train, y_test = train_test_split(\n    X, y, test_size=0.2, random_state=42\n)\nregressor = RandomForestRegressor(\n    n_estimators=100, random_state=42, criterion=\"squared_error\"\n)\nregressor.fit(X_train, y_train)\ny_pred = regressor.predict(X_test)\n\n# R2 score\nr2 = r2_score(y_test, y_pred)\nprint(\"R2 score: \", r2)\n\n# plot residuals\nnodes_gdf[\"cc_restaurant_800_wt_pred\"] = regressor.predict(X)\nnodes_gdf[\"cc_restaurant_800_residuals\"] = (\n    nodes_gdf[\"cc_restaurant_800_wt_pred\"] - nodes_gdf[\"cc_restaurant_800_wt\"]\n)\n\nfig, ax = plt.subplots(3, 1, figsize=(8, 12))\nnodes_gdf.plot(\n    column=\"cc_restaurant_800_wt\",\n    cmap=\"magma\",\n    legend=True,\n    ax=ax[0],\n)\nax[0].set_xlim(6433800, 6433800 + 2700)\nax[0].set_ylim(1669400, 1669400 + 2700)\nax[0].axis(False)\nax[0].set_title(\"Restaurant Accessibility\")\n\nnodes_gdf.plot(\n    column=\"cc_restaurant_800_wt_pred\",\n    cmap=\"magma\",\n    legend=True,\n    ax=ax[1],\n)\nax[1].set_xlim(6433800, 6433800 + 2700)\nax[1].set_ylim(1669400, 1669400 + 2700)\nax[1].axis(False)\nax[1].set_title(\"Predicted Restaurant Accessibility - R2 score: {:.2f}\".format(r2))\n\nnodes_gdf.plot(\n    column=\"cc_restaurant_800_residuals\",\n    cmap=\"coolwarm\",\n    vmax=4,\n    vmin=-4,\n    legend=True,\n    ax=ax[2],\n)\nax[2].set_xlim(6433800, 6433800 + 2700)\nax[2].set_ylim(1669400, 1669400 + 2700)\nax[2].axis(False)\nax[2].set_title(\"Residuals of Random Forest Regression\")\nplt.tight_layout()\n\nR2 score:  0.7479089307708191",
    "crumbs": [
      "Python 101",
      "Data Science"
    ]
  },
  {
    "objectID": "class/3_spatial.html",
    "href": "class/3_spatial.html",
    "title": "Spatial (Shapely)",
    "section": "",
    "text": "Shapely is a Python library for creating and manipulating geometric objects such as points, lines, and polygons. It offers an intuitive way to work with these shapes within a Cartesian coordinate system. Widely used in spatial analysis, Shapely also underpins other libraries like GeoPandas, which is designed for handling geospatial data.\nWhy is Shapely useful?\n\nGeometry Creation: Easily create points, lines, and polygons.\nSpatial Relationships: Analyse spatial relationships such as containment, intersection, and proximity.\nGeometric Operations: Carry out geometric operations like buffering, union, and intersection.\nIntegration: Seamlessly integrates with libraries such as GeoPandas for more advanced geospatial tasks.\n\nFor more comprehensive details, please refer to the Shapely API documentation.\nIn this lesson, we’ll explore the fundamentals of Shapely and its applications in urban contexts. You’ll learn how to model spatial relationships and perform various geometric operations using this library.\n\n\n\n\n\n\nNote\n\n\n\nThis lesson assumes some familiarity with fundamental GIS concepts. We won’t be covering basics such as coordinate reference systems or spatial predicates in detail. However, if you’ve used tools like QGIS, you’ll find concepts such as spatial types (points, linestrings, polygons) and operations (buffering, predicates) quite familiar.\n\n\n\n\nBasic Geometry\nShapely uses its geometry module to construct basic geometric shapes.\nPoints are the most fundamental geometric objects in Shapely, serving as the building blocks for more complex shapes.\n\nfrom shapely.geometry import Point, LineString, Polygon\n\npt = Point(0, 0)\npt\n\n\n\n\n\n\n\n\nLinestrings represent sequences of connected points. You can define them using a series of XY coordinate pairs or a list of Point objects.\n\nline = LineString([(0, 5), (5, 0), (10, 5)])\n\nline\n\n\n\n\n\n\n\n\nPolygons are closed shapes defined by a sequence of coordinates. Similar to linestrings, you can create them from a list of points or coordinate tuples.\n\npoly = Polygon([(0, 0), (0, 10), (10, 10), (10, 0)])\npoly\n\n\n\n\n\n\n\n\nShapely geometries come with useful properties that provide common information. For instance, you can easily retrieve a polygon’s area:\n\npoly.area\n\n100.0\n\n\nSimilarly, you can get the length of a linestring:\n\nline.length\n\n14.142135623730951\n\n\nOther handy properties include centroids, x and y coordinates, and WKT (Well-Known Text) representations:\n\npoly.centroid\n\n\n\n\n\n\n\n\n\npt.x, pt.y\n\n(0.0, 0.0)\n\n\n\nline.wkt\n\n'LINESTRING (0 5, 5 0, 10 5)'\n\n\n\n\nOperations and Predicates\nShapely supports a range of typical GIS spatial operations and predicates. For example, you can measure the distance between two spatial objects:\n\npt.distance(line)\n\n3.5355339059327378\n\n\nCrucially, Shapely operates using Cartesian coordinates. For accurate distance calculations or predicate operations, ensure your geometries are in a projected coordinate reference system and share the same system. Objects must share the same coordinate system for accurate results.\nThe Shapely documentation provides comprehensive details on all available operations and predicates. For instance, the geometry.Point page describes everything related to point geometries.\n\npt_buff = pt.buffer(2)\n\npt_buff\n\n\n\n\n\n\n\n\nAs an example, the documentation shows that the Point geometry has a buffer method. This method accepts a distance parameter and returns a polygon representing the buffered area.\nCommon spatial predicates are also readily available. For example, you can use the within method to check if a point is located inside a polygon:\n\npt.within(poly)\n\nFalse\n\n\nIf a point is on a polygon’s boundary, within returns False, but intersects returns True.\n\npoly.intersects(pt)\n\nTrue\n\n\n\n\nBuffers, Unions, and Differencing\nOther common geometric operations include buffer. For instance, let’s create a buffer around a linestring:\n\nline_buff = line.buffer(2)\n\nline_buff\n\n\n\n\n\n\n\n\nYou can use the union method to combine two polygons into a single, unified geometry:\n\npoly2 = Polygon([(5, 5), (5, 15), (15, 15), (15, 5)])\n\nunion_poly = poly.union(poly2)\n\nunion_poly\n\n\n\n\n\n\n\n\nOperations like difference also behave intuitively, as you might expect from GIS software:\n\ndiff_poly = poly.difference(pt_buff)\n\ndiff_poly\n\n\n\n\n\n\n\n\nSome operations offer configurable parameters for finer control. For example, the buffer method includes cap_style and join_style parameters, which allow you to control the appearance of the buffer’s ends and joins around a line.\n\nbuffer_round = line.buffer(2, cap_style=1, join_style=1)\n\nbuffer_round\n\n\n\n\n\n\n\n\n\n\nWorkflows\nShapely’s spatial operations and predicates closely mirror those found in GIS software like QGIS. This means tasks you might perform in a graphical user interface (UI) can often be replicated in Python, and vice-versa. Python becomes particularly advantageous for complex or lengthy workflows, as scripting enables advanced processing that can be cumbersome or difficult to achieve through a UI.\nLet’s consider a simple example: modelling streets and checking if they are within a specified distance threshold of particular land uses.\n\nstreet = LineString([(0, 0), (10, 0)])\nstreet_buffer = street.buffer(5, cap_style=1, join_style=1)\n\nstreet_buffer\n\n\n\n\n\n\n\n\n\nland_use = Point(3, 4)\nland_use\n\n\n\n\n\n\n\n\n\nis_within = land_use.within(street_buffer)\nis_within\n\nTrue\n\n\n\ndistance_to_street = land_use.distance(street)\ndistance_to_street\n\n4.0\n\n\nIn real-world scenarios, GeoPandas is frequently used for such workflows. It excels at handling multiple features, managing coordinate reference systems, performing file input/output (I/O), and plotting.\n\n\nExercises\n\nCreate two points and calculate the distance between them.\nCreate a polygon and check if a point is inside it.\nCreate two polygons and check if they intersect.\nCreate a LineString with at least three points.\nCreate a list of points and a polygon. Check which points are inside the polygon.",
    "crumbs": [
      "Python 101",
      "Spatial (Shapely)"
    ]
  },
  {
    "objectID": "class/index.html",
    "href": "class/index.html",
    "title": "Cityseer Guide",
    "section": "",
    "text": "This section provides introductory examples on the usage of Python and computational notebooks. These are high-level snapshots to give a basic indication of how these tools might typically be used; for more detailed examples, please refer to the online documentation for the libraries used.\nIf you would like to master python for spatial analysis, then you are encouraged to avail yourself of online resources and roll up your proverbial sleeves: getting your hands dirty is the only reliable way to familiarise yourself with geospatial python and its capabilities.\n\nNotebooks: Learn what computational notebooks are and how to use them.\nPython Basics: Python basics in a nutshell, touching on variables, data types, and simple operations.\nSpatial Data: Spatial data types and elementary operations using the shapely package.\nGeoPandas: Use of the geopandas package for handling geospatial datasets.\nOSM Data & Urban Morphology: Explore the wider Python geospatial community by using the osmnx and momepy libraries to explore urban morphology.\nExploratory Data Science: Use the seaborn plotting library for exploratory data science.",
    "crumbs": [
      "Python 101"
    ]
  },
  {
    "objectID": "class/1_notebooks.html",
    "href": "class/1_notebooks.html",
    "title": "Notebooks",
    "section": "",
    "text": "Computational notebooks provide an interactive environment for combining code, its results, and explanatory text. They are particularly well-suited for iterative tasks such as data analysis, as they allow you to test and document your work step-by-step. Features like automatic setup, immediate feedback, and the ease of experimentation make notebooks an accessible way to learn Python, especially when compared to more traditional programming approaches.",
    "crumbs": [
      "Python 101",
      "Notebooks"
    ]
  },
  {
    "objectID": "class/1_notebooks.html#google-colab",
    "href": "class/1_notebooks.html#google-colab",
    "title": "Notebooks",
    "section": "Google Colab",
    "text": "Google Colab\nGoogle Colab is a cloud-based platform that lets you run notebooks without any local installation. This makes it useful for quickly exploring datasets or prototyping analytical workflows.\n\nGetting Started\n\nAccess: Visit Google Colab and sign in with a Google account.\nCreate a New Notebook: Click “File &gt; New Notebook.”\nUpload an Existing Notebook: Upload a .ipynb file via “File &gt; Upload Notebook.”",
    "crumbs": [
      "Python 101",
      "Notebooks"
    ]
  },
  {
    "objectID": "class/1_notebooks.html#overview",
    "href": "class/1_notebooks.html#overview",
    "title": "Notebooks",
    "section": "Overview",
    "text": "Overview\nA notebook is made up of cells, which can contain either executable code or formatted text.\n\nCode Cells: For Python code execution. Outputs appear below the cell.\nText Cells: Markdown-based cells for documentation or context.",
    "crumbs": [
      "Python 101",
      "Notebooks"
    ]
  },
  {
    "objectID": "class/1_notebooks.html#running-code",
    "href": "class/1_notebooks.html#running-code",
    "title": "Notebooks",
    "section": "Running Code",
    "text": "Running Code\nTo run a code cell, select it and then either press Shift+Enter or click the play button. Here’s an example:\n\n2 + 2\n\n4\n\n\nThe output appears below the cell.\nAnother example:\n\nx = 5\nprint(x)\n\n5",
    "crumbs": [
      "Python 101",
      "Notebooks"
    ]
  },
  {
    "objectID": "class/1_notebooks.html#implicit-output",
    "href": "class/1_notebooks.html#implicit-output",
    "title": "Notebooks",
    "section": "Implicit Output",
    "text": "Implicit Output\nA handy feature of notebooks is that the value of the last expression in a code cell is automatically displayed as output:\n\n# The value of 'x' will be displayed\nx = 42\nx\n\n42\n\n\nIf you need to display the values of other variables, or variables that aren’t on the last line of a cell, use the print() function:\n\n# Explicitly displaying values\nx = 42\nprint(x)  # This will show the value of 'x'\n\ny = x * 2\ny  # Automatically displayed\n\n42\n\n\n84",
    "crumbs": [
      "Python 101",
      "Notebooks"
    ]
  },
  {
    "objectID": "class/1_notebooks.html#editing-and-rerunning",
    "href": "class/1_notebooks.html#editing-and-rerunning",
    "title": "Notebooks",
    "section": "Editing and Rerunning",
    "text": "Editing and Rerunning\nNotebooks are designed for iterative work. You can easily update and rerun code cells to see the impact of your changes. This flexibility is a core advantage of using notebooks.\n\nVariables and Memory State\nIn an active notebook session, variables defined in one cell remain available in subsequent cells. This allows later cells to build upon the work of earlier ones. While this is a powerful feature, it’s important to be aware that running cells out of sequence, or changing earlier cells without rerunning those that depend on them, can lead to confusion or errors.\n\n\nHow Variables Persist\nAs mentioned, variables you define in one cell can be accessed by other cells that are run later:\n\n# Define a variable\ncity_name = \"Madrid\"\n\nOnce the city_name variable is defined by running its cell, other cells can use it without needing to define it again.\n\nprint(\"The selected city is:\", city_name)\n\nThe selected city is: Madrid\n\n\nIf the defining cell is not run, a subsequent cell using city_name will raise an error.\n\n\nModifying Variables\nIf you change the value of a variable, you must rerun the cell where it’s defined to update its value in the notebook’s memory.\n\n# Update the variable\ncity_name = \"Barcelona\"\n\nSubsequent cells will then use the updated variable:\n\nprint(\"The selected city is now:\", city_name)\n\nThe selected city is now: Barcelona\n\n\n\n\nExecution Order and State\nThe order in which you execute cells is crucial as it determines the notebook’s current state. Running cells out of their logical order can lead to errors or unexpected outcomes.\nTo avoid such issues:\n\nExecute cells in logical order, starting from the top.\nRerun dependent cells after modifying variables.\nPeriodically use “Restart & Run All” to ensure consistency.\n\n\n\nExecution Order Matters\nThe execution order directly affects the notebook’s environment. Variables, functions, and imported libraries become available only after their respective defining cells have been executed. For instance:\n\n# Define a variable\nx = 10\nx\n\n10\n\n\nThe x variable is now defined and available for subsequent cells:\n\ny = x * 2\ny\n\n20\n\n\nIf x’s value is changed in its defining cell, dependent cells must be rerun to use the new value:\n\nz = y + 5\nz\n\n25\n\n\nThe third cell will fail if the preceding cell (defining y) has not been run. Similarly, if the cell defining y is modified (e.g., y = x * 3), the cell using z must be rerun. Otherwise, z will be based on an outdated y.",
    "crumbs": [
      "Python 101",
      "Notebooks"
    ]
  },
  {
    "objectID": "class/1_notebooks.html#adding-text",
    "href": "class/1_notebooks.html#adding-text",
    "title": "Notebooks",
    "section": "Adding Text",
    "text": "Adding Text\nText cells use Markdown, which is a lightweight markup language. Markdown employs simple characters for formatting, enabling you to create headings, bold or italic text, lists, and tables. For a comprehensive guide, please refer to the linked documentation.\n### Observations\n\nThis notebook _demonstrates the basics_ of using computational notebooks for interactive **coding** and **documentation**.",
    "crumbs": [
      "Python 101",
      "Notebooks"
    ]
  },
  {
    "objectID": "class/1_notebooks.html#tips",
    "href": "class/1_notebooks.html#tips",
    "title": "Notebooks",
    "section": "Tips",
    "text": "Tips\n\nTroubleshooting Errors: Ensure all preceding cells have been run.\nCollaborating: Share notebooks via “Share” in the top-right corner. Adjust permissions for viewing or editing.\nSaving Progress: Regularly save your work to Google Drive via “File &gt; Save a Copy in Drive.”\nRestarting the Environment: Use “Runtime &gt; Restart Runtime” to reset the notebook’s state and rerun all cells from the beginning.",
    "crumbs": [
      "Python 101",
      "Notebooks"
    ]
  }
]