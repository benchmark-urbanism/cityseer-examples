---
title: Saving via GeoPandas
date-format: long
date-modified: last-modified
lang: en
language:
  title-block-modified: "Last update"
---

## Generate a network

:::{.callout-tip}
For more details on downloading for a boundary, see [this example](osm_boundaries.qmd).
:::

Assume we have the following network.

```{python}
import osmnx as ox
from cityseer.tools import io, plot

bounds_gdf = ox.geocode_to_gdf(
    "R1536593",  # OSM relation ID
    by_osmid=True,
)
bounds_gdf = bounds_gdf.to_crs(3035)  # projected CRS
bounds_geom = bounds_gdf.union_all().simplify(500)
G_nx = io.osm_graph_from_poly(
    bounds_geom,
    poly_crs_code=3035,  # set to your CRS
    to_crs_code=3035,  # output CRS
    simplify=False,  # set to True for automatic simplification
)
plot.plot_nx(G_nx, plot_geoms=True)
```

## Convert to GeoPandas

You can now convert the network to a `geopandas` `GeoDataFrame`.

```{python}
# convert to a LineString GeoDataFrame
edges_gdf = io.geopandas_from_nx(G_nx, crs=3035)
edges_gdf.head()
```

## Save

It is then possible to save the `GeoDataFrame`. Create a `temp` folder or update your path accordingly:

```{python}
from pathlib import Path

# create the directory if necessary
Path.mkdir(Path("temp"), exist_ok=True)
edges_gdf.to_file("temp/output_file.gpkg")
```

The GPKG file can now be explored or modified in GIS software such as QGIS.

## Reload

To reload, you can read the `LineString` file with `geopandas`.

```{python}
import geopandas as gpd

in_edges_gdf = gpd.read_file("temp/output_file.gpkg")
in_edges_gdf.head()
```

## Convert back to nx

Then use `cityseer` to convert the `LineString` `GeoDataFrame` back into a `networkx` graph.

```{python}
in_G_nx = io.nx_from_generic_geopandas(in_edges_gdf)
plot.plot_nx(in_G_nx, plot_geoms=True)
```